/*! For license information please see main.3440132c.js.LICENSE.txt */
!function(){var e={888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function j(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function q(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case S:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Ie=null;function Se(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Te(e){xe?Ie?Ie.push(e):Ie=[e]:xe=e}function Ee(){if(xe){var e=xe,t=Ie;if(Ie=xe=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==xe||null!==Ie)&&(Ne(),Ee())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Oe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,Ve=null,je={onError:function(e){Me=!0,Fe=e}};function qe(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(je,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(ze(e)!==e)throw Error(a(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,It,St,Tt=!1,Et=[],Ct=null,Nt=null,At=null,Pt=new Map,Rt=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void St(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function jt(){Tt=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Pt.forEach(Vt),Rt.forEach(Vt)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function zt(e){function t(t){return qt(t,e)}if(0<Et.length){qt(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&qt(Ct,e),null!==Nt&&qt(Nt,e),null!==At&&qt(At,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var Bt=b.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,r){var i=kt,a=Bt.transition;Bt.transition=null;try{kt=1,Gt(e,t,n,r)}finally{kt=i,Bt.transition=a}}function Kt(e,t,n,r){var i=kt,a=Bt.transition;Bt.transition=null;try{kt=4,Gt(e,t,n,r)}finally{kt=i,Bt.transition=a}}function Gt(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function Sn(){return In}var Tn=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=an(Tn),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Pn),On=[9,13,27,32],Dn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Dn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function jn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Hn(e,t,n,r){Te(r),0<(t=Kr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Ur(e,0)}function Yn(e){if(G(bi(e)))return e}function $n(e,t){if("change"===e)return t}var Jn=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Hn(t,Gn,e,we(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Ir={};function Sr(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return xr[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Tr=Sr("animationend"),Er=Sr("animationiteration"),Cr=Sr("animationstart"),Nr=Sr("transitionend"),Ar=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ar.set(e,t),s(t,[e])}for(var Or=0;Or<Pr.length;Or++){var Dr=Pr[Or];Rr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Rr(Tr,"onAnimationEnd"),Rr(Er,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(qe.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var qr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[qr]){e[qr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qr]||(t[qr]=!0,jr("selectionchange",!1,t))}}function Br(e,t,n,r){switch($t(t)){case 1:var i=Ht;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Pe((function(){var r=a,i=we(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=En;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Tr:case Er:case Cr:s=yn;break;case Nr:s=An;break;case"scroll":s=hn;break;case"wheel":s=Rn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Re(p,h))&&l.push(Hr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Gr(d))p++;for(d=0,v=h;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)h=Gr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Gr(l),h=Gr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=$n;else if(Wn(u))if(Jn)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Hn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?bi(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Dn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?jn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,zn=!0)),0<(y=Kr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=qn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Dn&&jn(e,t)?(e=en(),Zt=Xt=Jt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Hr(e,a,i)),null!=(a=Re(e,t))&&r.push(Hr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Re(n,a))&&o.unshift(Hr(n,s,u)):i||null!=(s=Re(n,a))&&o.push(Hr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],xi=-1;function Ii(e){return{current:e}}function Si(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Ti(e,t){xi++,_i[xi]=e.current,e.current=t}var Ei={},Ci=Ii(Ei),Ni=Ii(!1),Ai=Ei;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ei;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Si(Ni),Si(Ci)}function Di(e,t,n){if(Ci.current!==Ei)throw Error(a(168));Ti(Ci,t),Ti(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,B(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ei,Ai=Ci.current,Ti(Ci,e),Ti(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Si(Ni),Si(Ci),Ti(Ci,e)):Si(Ni),Ti(Ni,n)}var Ui=null,Vi=!1,ji=!1;function qi(e){null===Ui?Ui=[e]:Ui.push(e)}function zi(){if(!ji&&null!==Ui){ji=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge(Ze,zi),i}finally{kt=t,ji=!1}}return null}var Bi=[],Wi=0,Hi=null,Ki=0,Gi=[],Qi=0,Yi=null,$i=1,Ji="";function Xi(e,t){Bi[Wi++]=Ki,Bi[Wi++]=Hi,Hi=e,Ki=t}function Zi(e,t,n){Gi[Qi++]=$i,Gi[Qi++]=Ji,Gi[Qi++]=Yi,Yi=e;var r=$i;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else $i=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ta(e){for(;e===Hi;)Hi=Bi[--Wi],Bi[Wi]=null,Ki=Bi[--Wi],Bi[Wi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null,$i=Gi[--Qi],Gi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ii(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function _a(e){var t=ya.current;Si(ya),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ta=null;function Ea(e){null===Ta?Ta=[e]:Ta.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ea(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cs)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ea(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Aa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ms|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Va=(new r.Component).refs;function ja(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var qa={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Oa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Oa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Oa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Da(e,i,r))&&(nc(t,e,r,n),La(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function Ba(e,t,n){var r=!1,i=Ei,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Ri(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ei),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=qa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&qa.enqueueReplaceState(t,t.state,null)}function Ha(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Va,Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Ri(t)?Ai:Ci.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ja(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&qa.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ka(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Va&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ka(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=Ka(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=Ka(e,null,t),n.return=e,n;case _:return(t=Uc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Ga(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Ga(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),ia&&Xi(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Xi(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),ia&&Xi(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Xi(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ka(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Lc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Dc(o.type,o.key,o.props,null,r.mode,s)).ref=Ka(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,s)).return=r,r=a}return u(r);case R:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);Ga(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var $a=Ya(!0),Ja=Ya(!1),Xa={},Za=Ii(Xa),eo=Ii(Xa),to=Ii(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Ti(to,t),Ti(eo,e),Ti(Za,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Za),Ti(Za,t)}function io(){Si(Za),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ti(eo,e),Ti(Za,n))}function oo(e){eo.current===e&&(Si(Za),Si(eo))}var uo=Ii(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,bo=0,wo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function So(){var e=0!==bo;return bo=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function Eo(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=Eo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Ms|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Ms|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=Eo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Ro(e,t){var n=vo,r=Eo(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Wo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Vo(9,Do.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&po)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&nc(t,e,1,-1)}function Uo(e){var t=To();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function jo(){return Eo().memoizedState}function qo(e,t,n,r){var i=To();vo.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=Eo();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Vo(t,n,a,r))}vo.flags|=e,i.memoizedState=Vo(1|t,n,a,r)}function Bo(e,t){return qo(8390656,8,e,t)}function Wo(e,t){return zo(2048,8,e,t)}function Ho(e,t){return zo(4,2,e,t)}function Ko(e,t){return zo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Go.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=Eo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=Eo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Ms|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return Eo().memoizedState}function tu(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){nc(n,e,r,ec()),au(n,t,r)}}function nu(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ea(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(nc(n,e,r,i=ec()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Sa,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},uu={readContext:Sa,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:Bo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qo(4194308,4,e,t)},useInsertionEffect:function(e,t){return qo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=To();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&po)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Bo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=Ns.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Sa,useCallback:$o,useContext:Sa,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Ko,useMemo:Jo,useReducer:No,useRef:jo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Xo(Eo(),mo.memoizedState,e)},useTransition:function(){return[No(Co)[0],Eo().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Sa,useCallback:$o,useContext:Sa,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Ko,useMemo:Jo,useReducer:Ao,useRef:jo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=Eo();return null===mo?t.memoizedState=e:Xo(t,mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],Eo().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ws||(Ws=!0,Hs=r),hu(0,t)},n}function vu(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Ks?Ks=new Set([this]):Ks.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Da(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?Ja(t,null,n,r):$a(t,e.child,n,r)}function _u(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=So(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Iu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Wu(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Wu(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Eu(e,t,n,r,i)}function Su(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Os,Rs),Rs|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Os,Rs),Rs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ti(Os,Rs),Rs|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ti(Os,Rs),Rs|=r;return wu(e,t,i,n),t.child}function Tu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Eu(e,t,n,r,i){var a=Ri(n)?Ai:Ci.current;return a=Pi(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=So(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function Cu(e,t,n,r,i){if(Ri(n)){var a=!0;Mi(t)}else a=!1;if(Ia(t,i),null===t.stateNode)Bu(e,t),Ba(t,n,r),Ha(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Sa(c):c=Pi(t,c=Ri(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Wa(t,o,r,c),Aa=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||Aa?("function"===typeof l&&(ja(t,n,l,r),s=t.memoizedState),(u=Aa||za(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ra(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Sa(s):s=Pi(t,s=Ri(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Wa(t,o,r,s),Aa=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||Aa?("function"===typeof d&&(ja(t,n,d,r),p=t.memoizedState),(c=Aa||za(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Tu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Wu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Au(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Pu(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Ru,Ou,Du,Lu={dehydrated:null,treeContext:null,retryLane:0};function Mu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Mc(s,i,0,null),e=Lc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Mu(n),t.memoizedState=Lu,e):Uu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Vu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,u),t.child.memoizedState=Mu(u),t.memoizedState=Lu,o);if(0===(1&t.mode))return Vu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Vu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),nc(r,e,i,-1))}return vc(),Vu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Qi++]=$i,Gi[Qi++]=Ji,Gi[Qi++]=Yi,$i=e.id,Ji=e.overflow,Yi=t),(t=Uu(t,r.children)).flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Oc(r,u):(u=Lc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Mu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Lu,i}return e=(u=e.child).sibling,i=Oc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uu(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vu(e,t,n,r){return null!==r&&pa(r),$a(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ju(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function qu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ju(e,n,t);else if(19===e.tag)ju(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qu(t,!0,n,null,a);break;case"together":qu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ms|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ku(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ku(t),null;case 1:case 17:return Ri(t.type)&&Oi(),Ku(t),null;case 3:return r=t.stateNode,io(),Si(Ni),Si(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Ku(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ou(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ku(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":$(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Ru(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ku(t),null;case 6:if(e&&null!=t.stateNode)Du(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ku(t),null;case 13:if(Si(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ku(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ds&&(Ds=3):vc())),null!==t.updateQueue&&(t.flags|=4),Ku(t),null);case 4:return io(),null===e&&zr(t.stateNode.containerInfo),Ku(t),null;case 10:return _a(t.type._context),Ku(t),null;case 19:if(Si(uo),null===(o=t.memoizedState))return Ku(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Hu(o,!1);else{if(0!==Ds||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Hu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>zs&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Ku(t),null}else 2*Je()-o.renderingStartTime>zs&&1073741824!==n&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=uo.current,Ti(uo,r?1&n|2:1&n),t):(Ku(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rs)&&(Ku(t),6&t.subtreeFlags&&(t.flags|=8192)):Ku(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qu(e,t){switch(ta(t),t.tag){case 1:return Ri(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ni),Si(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(uo),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Ru=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ou=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Vr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Du=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yu=!1,$u=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Xu=null;function Zu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&es(t,n,a)}i=i.next}while(i!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function is(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function as(e){var t=e.alternate;null!==t&&(e.alternate=null,as(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function os(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||os(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var ls=null,fs=!1;function hs(e,t,n){for(n=n.child;null!==n;)ds(e,t,n),n=n.sibling}function ds(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:$u||Zu(n,t);case 6:var r=ls,i=fs;ls=null,hs(e,t,n),fs=i,null!==(ls=r)&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ls.removeChild(n.stateNode));break;case 18:null!==ls&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(ls,n.stateNode));break;case 4:r=ls,i=fs,ls=n.stateNode.containerInfo,fs=!0,hs(e,t,n),ls=r,fs=i;break;case 0:case 11:case 14:case 15:if(!$u&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&es(n,t,o),i=i.next}while(i!==r)}hs(e,t,n);break;case 1:if(!$u&&(Zu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ic(n,t,u)}hs(e,t,n);break;case 21:hs(e,t,n);break;case 22:1&n.mode?($u=(r=$u)||null!==n.memoizedState,hs(e,t,n),$u=r):hs(e,t,n);break;default:hs(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:ls=s.stateNode,fs=!1;break e;case 3:case 4:ls=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===ls)throw Error(a(160));ds(o,u,i),ls=null,fs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ic(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ms(t,e),t=t.sibling}function ms(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vs(t,e),ys(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(m){Ic(e,e.return,m)}try{ns(5,e,e.return)}catch(m){Ic(e,e.return,m)}}break;case 1:vs(t,e),ys(e),512&r&&null!==n&&Zu(n,n.return);break;case 5:if(vs(t,e),ys(e),512&r&&null!==n&&Zu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Ic(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&J(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ic(e,e.return,m)}}break;case 6:if(vs(t,e),ys(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ic(e,e.return,m)}}break;case 3:if(vs(t,e),ys(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Ic(e,e.return,m)}break;case 4:default:vs(t,e),ys(e);break;case 13:vs(t,e),ys(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(qs=Je())),4&r&&ps(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?($u=(l=$u)||f,vs(t,e),$u=l):vs(t,e),ys(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Xu=e,f=e.child;null!==f;){for(h=Xu=f;null!==Xu;){switch(p=(d=Xu).child,d.tag){case 0:case 11:case 14:case 15:ns(4,d,d.return);break;case 1:Zu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Ic(r,n,m)}}break;case 5:Zu(d,d.return);break;case 22:if(null!==d.memoizedState){ws(h);continue}}null!==p?(p.return=d,Xu=p):ws(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){Ic(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Ic(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vs(t,e),ys(e),4&r&&ps(e);case 21:}}function ys(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(os(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cs(e,us(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ss(e,us(e),o);break;default:throw Error(a(161))}}catch(u){Ic(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gs(e,t,n){Xu=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Xu;){var i=Xu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Yu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||$u;u=Yu;var c=$u;if(Yu=o,($u=s)&&!c)for(Xu=i;null!==Xu;)s=(o=Xu).child,22===o.tag&&null!==o.memoizedState?_s(i):null!==s?(s.return=o,Xu=s):_s(i);for(;null!==a;)Xu=a,ks(a,t,n),a=a.sibling;Xu=i,Yu=u,$u=c}bs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Xu=a):bs(e)}}function bs(e){for(;null!==Xu;){var t=Xu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$u||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$u)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}$u||512&t.flags&&is(t)}catch(d){Ic(t,t.return,d)}}if(t===e){Xu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xu=n;break}Xu=t.return}}function ws(e){for(;null!==Xu;){var t=Xu;if(t===e){Xu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xu=n;break}Xu=t.return}}function _s(e){for(;null!==Xu;){var t=Xu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(s){Ic(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ic(t,i,s)}}var a=t.return;try{is(t)}catch(s){Ic(t,a,s)}break;case 5:var o=t.return;try{is(t)}catch(s){Ic(t,o,s)}}}catch(s){Ic(t,t.return,s)}if(t===e){Xu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Xu=u;break}Xu=t.return}}var xs,Is=Math.ceil,Ss=b.ReactCurrentDispatcher,Ts=b.ReactCurrentOwner,Es=b.ReactCurrentBatchConfig,Cs=0,Ns=null,As=null,Ps=0,Rs=0,Os=Ii(0),Ds=0,Ls=null,Ms=0,Fs=0,Us=0,Vs=null,js=null,qs=0,zs=1/0,Bs=null,Ws=!1,Hs=null,Ks=null,Gs=!1,Qs=null,Ys=0,$s=0,Js=null,Xs=-1,Zs=0;function ec(){return 0!==(6&Cs)?Je():-1!==Xs?Xs:Xs=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cs)&&0!==Ps?Ps&-Ps:null!==va.transition?(0===Zs&&(Zs=vt()),Zs):0!==(e=kt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function nc(e,t,n,r){if(50<$s)throw $s=0,Js=null,Error(a(185));yt(e,n,r),0!==(2&Cs)&&e===Ns||(e===Ns&&(0===(2&Cs)&&(Fs|=n),4===Ds&&uc(e,Ps)),rc(e,r),1===n&&0===Cs&&0===(1&t.mode)&&(zs=Je()+500,Vi&&zi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ns?Ps:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,qi(e)}(sc.bind(null,e)):qi(sc.bind(null,e)),oi((function(){0===(6&Cs)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Xs=-1,Zs=0,0!==(6&Cs))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Ns?Ps:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Cs;Cs|=2;var o=pc();for(Ns===e&&Ps===t||(Bs=null,zs=Je()+500,hc(e,t));;)try{gc();break}catch(s){dc(e,s)}wa(),Ss.current=o,Cs=i,null!==As?t=0:(Ns=null,Ps=0,t=Ds)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ls,hc(e,0),uc(e,r),rc(e,Je()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Ls,hc(e,0),uc(e,r),rc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,js,Bs);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=qs+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,js,Bs),t);break}wc(e,js,Bs);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Is(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,js,Bs),r);break}wc(e,js,Bs);break;default:throw Error(a(329))}}}return rc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Vs;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=js,js=n,null!==t&&oc(t)),e}function oc(e){null===js?js=e:js.push.apply(js,e)}function uc(e,t){for(t&=~Us,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Cs))throw Error(a(327));_c();var t=ht(e,0);if(0===(1&t))return rc(e,Je()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ls,hc(e,0),uc(e,t),rc(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,js,Bs),rc(e,Je()),null}function cc(e,t){var n=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=n)&&(zs=Je()+500,Vi&&zi())}}function lc(e){null!==Qs&&0===Qs.tag&&0===(6&Cs)&&_c();var t=Cs;Cs|=1;var n=Es.transition,r=kt;try{if(Es.transition=null,kt=1,e)return e()}finally{kt=r,Es.transition=n,0===(6&(Cs=t))&&zi()}}function fc(){Rs=Os.current,Si(Os)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),Si(Ni),Si(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(uo);break;case 10:_a(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Ns=e,As=e=Oc(e.current,null),Ps=Rs=t,Ds=0,Ls=null,Us=Fs=Ms=0,js=Vs=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(r=(n=Ta[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ta=null}return e}function dc(e,t){for(;;){var n=As;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,bo=0,Ts.current=null,null===n||null===n.return){Ds=1,Ls=t,As=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ps,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(o,l,t),vc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ds&&(Ds=2),null===Vs?Vs=[o]:Vs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ks||!Ks.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,As===n&&null!==n&&(As=n=n.return);continue}break}}function pc(){var e=Ss.current;return Ss.current=ou,null===e?ou:e}function vc(){0!==Ds&&3!==Ds&&2!==Ds||(Ds=4),null===Ns||0===(268435455&Ms)&&0===(268435455&Fs)||uc(Ns,Ps)}function mc(e,t){var n=Cs;Cs|=2;var r=pc();for(Ns===e&&Ps===t||(Bs=null,hc(e,t));;)try{yc();break}catch(i){dc(e,i)}if(wa(),Cs=n,Ss.current=r,null!==As)throw Error(a(261));return Ns=null,Ps=0,Ds}function yc(){for(;null!==As;)kc(As)}function gc(){for(;null!==As&&!Ye();)kc(As)}function kc(e){var t=xs(e.alternate,e,Rs);e.memoizedProps=e.pendingProps,null===t?bc(e):As=t,Ts.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Gu(n,t,Rs)))return void(As=n)}else{if(null!==(n=Qu(n,t)))return n.flags&=32767,void(As=n);if(null===e)return Ds=6,void(As=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Ds&&(Ds=5)}function wc(e,t,n){var r=kt,i=Es.transition;try{Es.transition=null,kt=1,function(e,t,n,r){do{_c()}while(null!==Qs);if(0!==(6&Cs))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(As=Ns=null,Ps=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gs||(Gs=!0,Nc(tt,(function(){return _c(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Es.transition,Es.transition=null;var u=kt;kt=1;var s=Cs;Cs|=4,Ts.current=null,function(e,t){if(ei=Wt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Xu=t;null!==Xu;)if(e=(t=Xu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xu=e;else for(;null!==Xu;){t=Xu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ic(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xu=e;break}Xu=t.return}v=ts,ts=!1}(e,n),ms(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,gs(n,e,i),$e(),Cs=s,kt=u,Es.transition=o}else e.current=n;if(Gs&&(Gs=!1,Qs=e,Ys=i),0===(o=e.pendingLanes)&&(Ks=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Ws)throw Ws=!1,e=Hs,Hs=null,e;0!==(1&Ys)&&0!==e.tag&&_c(),0!==(1&(o=e.pendingLanes))?e===Js?$s++:($s=0,Js=e):$s=0,zi()}(e,t,n,r)}finally{Es.transition=i,kt=r}return null}function _c(){if(null!==Qs){var e=bt(Ys),t=Es.transition,n=kt;try{if(Es.transition=null,kt=16>e?16:e,null===Qs)var r=!1;else{if(e=Qs,Qs=null,Ys=0,0!==(6&Cs))throw Error(a(331));var i=Cs;for(Cs|=4,Xu=e.current;null!==Xu;){var o=Xu,u=o.child;if(0!==(16&Xu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Xu=l;null!==Xu;){var f=Xu;switch(f.tag){case 0:case 11:case 15:ns(8,f,o)}var h=f.child;if(null!==h)h.return=f,Xu=h;else for(;null!==Xu;){var d=(f=Xu).sibling,p=f.return;if(as(f),f===l){Xu=null;break}if(null!==d){d.return=p,Xu=d;break}Xu=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Xu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Xu=u;else e:for(;null!==Xu;){if(0!==(2048&(o=Xu).flags))switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Xu=g;break e}Xu=o.return}}var k=e.current;for(Xu=k;null!==Xu;){var b=(u=Xu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Xu=b;else e:for(u=k;null!==Xu;){if(0!==(2048&(s=Xu).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(_){Ic(s,s.return,_)}if(s===u){Xu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Xu=w;break e}Xu=s.return}}if(Cs=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Es.transition=t}}return!1}function xc(e,t,n){e=Da(e,t=pu(0,t=lu(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Ic(e,t,n){if(3===e.tag)xc(e,e,n);else for(;null!==t;){if(3===t.tag){xc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ks||!Ks.has(r))){t=Da(t,e=vu(t,e=lu(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Ps&n)===n&&(4===Ds||3===Ds&&(130023424&Ps)===Ps&&500>Je()-qs?hc(e,0):Us|=n),rc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Na(e,t))&&(yt(e,t,n),rc(e,n))}function Ec(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Nc(e,t){return Ge(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Ac(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Rc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Lc(n.children,i,o,t);case I:u=8,i|=8;break;case S:return(e=Pc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case N:return(e=Pc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Pc(19,n,t,i)).elementType=A,e.lanes=o,e;case O:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case E:u=9;break e;case C:u=11;break e;case P:u=14;break e;case R:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,i,a,o,u,s){return e=new Vc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function qc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function zc(e){if(!e)return Ei;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function Bc(e,t,n,r,i,a,o,u,s){return(e=jc(n,r,!0,e,0,a,0,u,s)).context=zc(null),n=e.current,(a=Oa(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Da(n,a,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function Wc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Da(i,t,o))&&(nc(e,i,o,a),La(e,i,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}xs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Au(t),da();break;case 5:ao(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fu(e,t,n):(Ti(uo,1&uo.current),null!==(e=Wu(e,t,n))?e.sibling:null);Ti(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Su(e,t,n)}return Wu(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Bu(e,t),e=t.pendingProps;var i=Pi(t,Ci.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Pa(t),i.updater=qa,t.stateNode=i,i._reactInternals=t,Ha(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Bu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Eu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=_u(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Eu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Au(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ra(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Pu(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Pu(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Wu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Tu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ti(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Wu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Oa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Sa(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),xu(e,t,r,i=ma(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Bu(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,Ia(t,n),Ba(t,r,i),Ha(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return zu(e,t,n);case 22:return Su(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Hc(o);u.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Hc(o);a.call(e)}}var o=Bc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Hc(s);u.call(e)}}var s=jc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,zr(8===e.nodeType?e.parentNode:e),lc((function(){Wc(t,s,n,r)})),s}(n,t,e,i,r);return Hc(o)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Wc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,Je()),0===(6&Cs)&&(zs=Je()+500,zi()))}break;case 13:lc((function(){var t=Na(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Gc(e,1)}},_t=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)nc(t,e,134217728,ec());Gc(e,134217728)}},xt=function(e){if(13===e.tag){var t=tc(e),n=Na(e,t);if(null!==n)nc(n,e,t,ec());Gc(e,t)}},It=function(){return kt},St=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));G(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ne=lc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Te,Ee,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return qc(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,v(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(E,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},O={transition:null},D={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:O,ReactCurrentOwner:x};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,O(_);else{var t=r(l);null!==t&&D(w,t.startTime-e)}}function _(e,n){v=!1,m&&(m=!1,g(T),T=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&D(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,I=!1,S=null,T=-1,E=5,C=-1;function N(){return!(t.unstable_now()-C<E)}function A(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?x():(I=!1,S=null)}}else I=!1}if("function"===typeof k)x=function(){k(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=A,x=function(){R.postMessage(null)}}else x=function(){y(A,0)};function O(e){S=e,I||(I=!0,x())}function D(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(T),T=-1):m=!0,D(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,O(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return ai},SDK_VERSION:function(){return Ta},_DEFAULT_ENTRY_NAME:function(){return da},_addComponent:function(){return ya},_addOrOverwriteComponent:function(){return ga},_apps:function(){return va},_clearComponents:function(){return _a},_components:function(){return ma},_getProvider:function(){return ba},_registerComponent:function(){return ka},_removeServiceInstance:function(){return wa},deleteApp:function(){return Aa},getApp:function(){return Ca},getApps:function(){return Na},initializeApp:function(){return Ea},onLog:function(){return Oa},registerVersion:function(){return Ra},setLogLevel:function(){return Da}});var t,r=n(791),i=n(250);function a(e){if(Array.isArray(e))return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||u(e,t)||s()}function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var f=function(e){return e};var h="beforeunload",d="popstate";function p(e){e.preventDefault(),e.returnValue=""}function v(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function m(){return Math.random().toString(36).substr(2,8)}function y(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function g(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var k=(0,r.createContext)(null);var b=(0,r.createContext)(null);var w=(0,r.createContext)({outlet:null,matches:[]});function _(e,t){if(!e)throw new Error(t)}function x(e,t,n){void 0===n&&(n="/");var r=P(("string"===typeof t?g(t):t).pathname||"/",n);if(null==r)return null;var i=I(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=C(i[o],r);return a}function I(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||_(!1),a.relativePath=a.relativePath.slice(r.length));var o=R([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&_(!1),I(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:E(o,e.index),routesMeta:u})})),t}var S=/^:\w+$/,T=function(e){return"*"===e};function E(e,t){var n=e.split("/"),r=n.length;return n.some(T)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!T(e)})).reduce((function(e,t){return e+(S.test(t)?3:""===t?1:10)}),r)}function C(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=N({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:R([i,l.pathname]),pathnameBase:O(R([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=R([i,l.pathnameBase]))}return a}function N(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=c(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(TA){return e}}(l[n]||""),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function A(e,t,n){var r,i="string"===typeof e?g(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var u=a.split("/");".."===u[0];)u.shift(),o-=1;i.pathname=u.join("/")}r=o>=0?t[o]:"/"}var s=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?g(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:D(a),hash:L(u)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var R=function(e){return e.join("/").replace(/\/\/+/g,"/")},O=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},D=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},L=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function M(e){F()||_(!1);var t=(0,r.useContext)(k),n=t.basename,i=t.navigator,a=j(e),o=a.hash,u=a.pathname,s=a.search,c=u;if("/"!==n){var l=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?g(e).pathname:e.pathname}(e),f=null!=l&&l.endsWith("/");c="/"===u?n+(f?"/":""):R([n,u])}return i.createHref({pathname:c,search:s,hash:o})}function F(){return null!=(0,r.useContext)(b)}function U(){return F()||_(!1),(0,r.useContext)(b).location}function V(){F()||_(!1);var e=(0,r.useContext)(k),t=e.basename,n=e.navigator,i=(0,r.useContext)(w).matches,a=U().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),u=(0,r.useRef)(!1);(0,r.useEffect)((function(){u.current=!0}));var s=(0,r.useCallback)((function(e,r){if(void 0===r&&(r={}),u.current)if("number"!==typeof e){var i=A(e,JSON.parse(o),a);"/"!==t&&(i.pathname=R([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state)}else n.go(e)}),[t,n,o,a]);return s}function j(e){var t=(0,r.useContext)(w).matches,n=U().pathname,i=JSON.stringify(t.map((function(e){return e.pathnameBase})));return(0,r.useMemo)((function(){return A(e,JSON.parse(i),n)}),[e,i,n])}function q(e,t){return void 0===t&&(t=[]),null==e?null:e.reduceRight((function(n,i,a){return(0,r.createElement)(w.Provider,{children:void 0!==i.route.element?i.route.element:n,value:{outlet:n,matches:t.concat(e.slice(0,a+1))}})}),null)}function z(e){_(!1)}function B(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,u=e.location,s=e.navigationType,c=void 0===s?t.Pop:s,l=e.navigator,f=e.static,h=void 0!==f&&f;F()&&_(!1);var d=O(i),p=(0,r.useMemo)((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof u&&(u=g(u));var v=u,m=v.pathname,y=void 0===m?"/":m,w=v.search,x=void 0===w?"":w,I=v.hash,S=void 0===I?"":I,T=v.state,E=void 0===T?null:T,C=v.key,N=void 0===C?"default":C,A=(0,r.useMemo)((function(){var e=P(y,d);return null==e?null:{pathname:e,search:x,hash:S,state:E,key:N}}),[d,y,x,S,E,N]);return null==A?null:(0,r.createElement)(k.Provider,{value:p},(0,r.createElement)(b.Provider,{children:o,value:{location:A,navigationType:c}}))}function W(e){var t=e.children,n=e.location;return function(e,t){F()||_(!1);var n,i=(0,r.useContext)(w).matches,a=i[i.length-1],o=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/"),s=(a&&a.route,U());if(t){var c,l="string"===typeof t?g(t):t;"/"===u||(null==(c=l.pathname)?void 0:c.startsWith(u))||_(!1),n=l}else n=s;var f=n.pathname||"/",h=x(e,{pathname:"/"===u?f:f.slice(u.length)||"/"});return q(h&&h.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:R([u,e.pathname]),pathnameBase:"/"===e.pathnameBase?u:R([u,e.pathnameBase])})})),i)}(H(t),n)}function H(e){var t=[];return r.Children.forEach(e,(function(e){if((0,r.isValidElement)(e))if(e.type!==r.Fragment){e.type!==z&&_(!1);var n={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(n.children=H(e.props.children)),t.push(n)}else t.push.apply(t,H(e.props.children))})),t}function K(){return K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K.apply(this,arguments)}function G(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Q=["onClick","reloadDocument","replace","state","target","to"];function Y(e){var n=e.basename,i=e.children,a=e.window,o=(0,r.useRef)();null==o.current&&(o.current=function(e){void 0===e&&(e={});var n=e.window,r=void 0===n?document.defaultView:n,i=r.history;function a(){var e=r.location,t=e.pathname,n=e.search,a=e.hash,o=i.state||{};return[o.idx,f({pathname:t,search:n,hash:a,state:o.usr||null,key:o.key||"default"})]}var o=null;r.addEventListener(d,(function(){if(o)w.call(o),o=null;else{var e=t.Pop,n=a(),r=n[0],i=n[1];if(w.length){if(null!=r){var u=c-r;u&&(o={action:e,location:i,retry:function(){E(-1*u)}},E(u))}}else T(e)}}));var u=t.Pop,s=a(),c=s[0],k=s[1],b=v(),w=v();function _(e){return"string"===typeof e?e:y(e)}function x(e,t){return void 0===t&&(t=null),f(l({pathname:k.pathname,hash:"",search:""},"string"===typeof e?g(e):e,{state:t,key:m()}))}function I(e,t){return[{usr:e.state,key:e.key,idx:t},_(e)]}function S(e,t,n){return!w.length||(w.call({action:e,location:t,retry:n}),!1)}function T(e){u=e;var t=a();c=t[0],k=t[1],b.call({action:u,location:k})}function E(e){i.go(e)}null==c&&(c=0,i.replaceState(l({},i.state,{idx:c}),""));var C={get action(){return u},get location(){return k},createHref:_,push:function e(n,a){var o=t.Push,u=x(n,a);if(S(o,u,(function(){e(n,a)}))){var s=I(u,c+1),l=s[0],f=s[1];try{i.pushState(l,"",f)}catch(TA){r.location.assign(f)}T(o)}},replace:function e(n,r){var a=t.Replace,o=x(n,r);if(S(a,o,(function(){e(n,r)}))){var u=I(o,c),s=u[0],l=u[1];i.replaceState(s,"",l),T(a)}},go:E,back:function(){E(-1)},forward:function(){E(1)},listen:function(e){return b.push(e)},block:function(e){var t=w.push(e);return 1===w.length&&r.addEventListener(h,p),function(){t(),w.length||r.removeEventListener(h,p)}}};return C}({window:a}));var u=o.current,s=c((0,r.useState)({action:u.action,location:u.location}),2),k=s[0],b=s[1];return(0,r.useLayoutEffect)((function(){return u.listen(b)}),[u]),(0,r.createElement)(B,{basename:n,children:i,location:k.location,navigationType:k.action,navigator:u})}var $=(0,r.forwardRef)((function(e,t){var n=e.onClick,i=e.reloadDocument,a=e.replace,o=void 0!==a&&a,u=e.state,s=e.target,c=e.to,l=G(e,Q),f=M(c),h=function(e,t){var n=void 0===t?{}:t,i=n.target,a=n.replace,o=n.state,u=V(),s=U(),c=j(e);return(0,r.useCallback)((function(t){if(0===t.button&&(!i||"_self"===i)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||y(s)===y(c);u(e,{replace:n,state:o})}}),[s,u,c,a,o,i,e])}(c,{replace:o,state:u,target:s});return(0,r.createElement)("a",K({},l,{href:f,onClick:function(e){n&&n(e),e.defaultPrevented||i||h(e)},ref:t,target:s}))}));function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function X(){X=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(T){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),o=new x(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return S()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=b(o,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(T){return{type:"throw",arg:T}}}e.wrap=s;var l={};function f(){}function h(){}function d(){}var p={};u(p,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(I([])));m&&m!==t&&n.call(m,i)&&(p=m);var y=d.prototype=f.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(i,a,o,u){var s=c(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==J(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,u)}),(function(e){r("throw",e,o,u)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function I(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=d,u(y,"constructor",d),u(d,"constructor",h),h.displayName=u(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(y),u(y,o,"Generator"),u(y,i,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;_(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function Z(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(TA){return void n(TA)}u.done?t(s):Promise.resolve(s).then(r,i)}function ee(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Z(a,r,i,o,u,"next",e)}function u(e){Z(a,r,i,o,u,"throw",e)}o(void 0)}))}}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ie={prefix:"fas",iconName:"pencil",icon:[512,512,[61504,9999,"pencil-alt"],"f303","M421.7 220.3L188.5 453.4L154.6 419.5L158.1 416H112C103.2 416 96 408.8 96 400V353.9L92.51 357.4C87.78 362.2 84.31 368 82.42 374.4L59.44 452.6L137.6 429.6C143.1 427.7 149.8 424.2 154.6 419.5L188.5 453.4C178.1 463.8 165.2 471.5 151.1 475.6L30.77 511C22.35 513.5 13.24 511.2 7.03 504.1C.8198 498.8-1.502 489.7 .976 481.2L36.37 360.9C40.53 346.8 48.16 333.9 58.57 323.5L291.7 90.34L421.7 220.3zM492.7 58.75C517.7 83.74 517.7 124.3 492.7 149.3L444.3 197.7L314.3 67.72L362.7 19.32C387.7-5.678 428.3-5.678 453.3 19.32L492.7 58.75z"]},ae=ie,oe={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M432 256c0 17.69-14.33 32.01-32 32.01H256v144c0 17.69-14.33 31.99-32 31.99s-32-14.3-32-31.99v-144H48c-17.67 0-32-14.32-32-32.01s14.33-31.99 32-31.99H192v-144c0-17.69 14.33-32.01 32-32.01s32 14.32 32 32.01v144h144C417.7 224 432 238.3 432 256z"]},ue={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M135.2 17.69C140.6 6.848 151.7 0 163.8 0H284.2C296.3 0 307.4 6.848 312.8 17.69L320 32H416C433.7 32 448 46.33 448 64C448 81.67 433.7 96 416 96H32C14.33 96 0 81.67 0 64C0 46.33 14.33 32 32 32H128L135.2 17.69zM394.8 466.1C393.2 492.3 372.3 512 346.9 512H101.1C75.75 512 54.77 492.3 53.19 466.1L31.1 128H416L394.8 466.1z"]},se={prefix:"fas",iconName:"xmark",icon:[320,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"]},ce=se;function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,t)||ye(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(e){return function(e){if(Array.isArray(e))return ge(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ye(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(e,t){if(e){if("string"===typeof e)return ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ge(e,t):void 0}}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ke=function(){},be={},we={},_e=null,xe={mark:ke,measure:ke};try{"undefined"!==typeof window&&(be=window),"undefined"!==typeof document&&(we=document),"undefined"!==typeof MutationObserver&&(_e=MutationObserver),"undefined"!==typeof performance&&(xe=performance)}catch(SV){}var Ie=(be.navigator||{}).userAgent,Se=void 0===Ie?"":Ie,Te=be,Ee=we,Ce=_e,Ne=xe,Ae=(Te.document,!!Ee.documentElement&&!!Ee.head&&"function"===typeof Ee.addEventListener&&"function"===typeof Ee.createElement),Pe=~Se.indexOf("MSIE")||~Se.indexOf("Trident/"),Re="svg-inline--fa",Oe="data-fa-i2svg",De="data-fa-pseudo-element",Le="data-prefix",Me="data-icon",Fe="fontawesome-i2svg",Ue=["HTML","HEAD","STYLE","SCRIPT"],Ve=function(){try{return!0}catch(SV){return!1}}(),je={fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit",fa:"solid"},qe={solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"},ze={fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},Be={"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},We=/fa[srltdbk]?[\-\ ]/,He="fa-layers-text",Ke=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Kit)?.*/i,Ge={900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},Qe=[1,2,3,4,5,6,7,8,9,10],Ye=Qe.concat([11,12,13,14,15,16,17,18,19,20]),$e=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Je="duotone-group",Xe="swap-opacity",Ze="primary",et="secondary",tt=[].concat(me(Object.keys(qe)),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Je,Xe,Ze,et]).concat(Qe.map((function(e){return"".concat(e,"x")}))).concat(Ye.map((function(e){return"w-".concat(e)}))),nt=Te.FontAwesomeConfig||{};if(Ee&&"function"===typeof Ee.querySelector){[["data-family-prefix","familyPrefix"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(e){var t=ve(e,2),n=t[0],r=t[1],i=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=Ee.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(n));void 0!==i&&null!==i&&(nt[r]=i)}))}var rt=fe(fe({},{familyPrefix:"fa",styleDefault:"solid",replacementClass:Re,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0}),nt);rt.autoReplaceSvg||(rt.observeMutations=!1);var it={};Object.keys(rt).forEach((function(e){Object.defineProperty(it,e,{enumerable:!0,set:function(t){rt[e]=t,at.forEach((function(e){return e(it)}))},get:function(){return rt[e]}})})),Te.FontAwesomeConfig=it;var at=[];var ot=16,ut={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function st(){for(var e=12,t="";e-- >0;)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return t}function ct(e){for(var t=[],n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function lt(e){return e.classList?ct(e.classList):(e.getAttribute("class")||"").split(" ").filter((function(e){return e}))}function ft(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ht(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,": ").concat(e[n].trim(),";")}),"")}function dt(e){return e.size!==ut.size||e.x!==ut.x||e.y!==ut.y||e.rotate!==ut.rotate||e.flipX||e.flipY}function pt(){var e="fa",t=Re,n=it.familyPrefix,r=it.replacementClass,i=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    transition-delay: 0s;\n    transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, none));\n          transform: rotate(var(--fa-rotate-angle, none));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';if(n!==e||r!==t){var a=new RegExp("\\.".concat(e,"\\-"),"g"),o=new RegExp("\\--".concat(e,"\\-"),"g"),u=new RegExp("\\.".concat(t),"g");i=i.replace(a,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(u,".".concat(r))}return i}var vt=!1;function mt(){it.autoAddCss&&!vt&&(!function(e){if(e&&Ae){var t=Ee.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=Ee.head.childNodes,r=null,i=n.length-1;i>-1;i--){var a=n[i],o=(a.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=a)}Ee.head.insertBefore(t,r)}}(pt()),vt=!0)}var yt={mixout:function(){return{dom:{css:pt,insertCss:mt}}},hooks:function(){return{beforeDOMElementCreation:function(){mt()},beforeI2svg:function(){mt()}}}},gt=Te||{};gt.___FONT_AWESOME___||(gt.___FONT_AWESOME___={}),gt.___FONT_AWESOME___.styles||(gt.___FONT_AWESOME___.styles={}),gt.___FONT_AWESOME___.hooks||(gt.___FONT_AWESOME___.hooks={}),gt.___FONT_AWESOME___.shims||(gt.___FONT_AWESOME___.shims=[]);var kt=gt.___FONT_AWESOME___,bt=[],wt=!1;function _t(e){Ae&&(wt?setTimeout(e,0):bt.push(e))}function xt(e){var t=e.tag,n=e.attributes,r=void 0===n?{}:n,i=e.children,a=void 0===i?[]:i;return"string"===typeof e?ft(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,'="').concat(ft(e[n]),'" ')}),"").trim()}(r),">").concat(a.map(xt).join(""),"</").concat(t,">")}function It(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}Ae&&((wt=(Ee.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Ee.readyState))||Ee.addEventListener("DOMContentLoaded",(function e(){Ee.removeEventListener("DOMContentLoaded",e),wt=1,bt.map((function(e){return e()}))})));var St=function(e,t,n,r){var i,a,o,u=Object.keys(e),s=u.length,c=void 0!==r?function(e,t){return function(n,r,i,a){return e.call(t,n,r,i,a)}}(t,r):t;for(void 0===n?(i=1,o=e[u[0]]):(i=0,o=n);i<s;i++)o=c(o,e[a=u[i]],a,e);return o};function Tt(e){var t=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var a=e.charCodeAt(n++);56320==(64512&a)?t.push(((1023&i)<<10)+(1023&a)+65536):(t.push(i),n--)}else t.push(i)}return t}(e);return 1===t.length?t[0].toString(16):null}function Et(e){return Object.keys(e).reduce((function(t,n){var r=e[n];return!!r.icon?t[r.iconName]=r.icon:t[n]=r,t}),{})}function Ct(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.skipHooks,i=void 0!==r&&r,a=Et(t);"function"!==typeof kt.hooks.addPack||i?kt.styles[e]=fe(fe({},kt.styles[e]||{}),a):kt.hooks.addPack(e,Et(t)),"fas"===e&&Ct("fa",t)}var Nt=kt.styles,At=kt.shims,Pt=Object.values(ze),Rt=null,Ot={},Dt={},Lt={},Mt={},Ft={},Ut=Object.keys(je);function Vt(e,t){var n,r=t.split("-"),i=r[0],a=r.slice(1).join("-");return i!==e||""===a||(n=a,~tt.indexOf(n))?null:a}var jt=function(){var e=function(e){return St(Nt,(function(t,n,r){return t[r]=St(n,e,{}),t}),{})};Ot=e((function(e,t,n){(t[3]&&(e[t[3]]=n),t[2])&&t[2].filter((function(e){return"number"===typeof e})).forEach((function(t){e[t.toString(16)]=n}));return e})),Dt=e((function(e,t,n){(e[n]=n,t[2])&&t[2].filter((function(e){return"string"===typeof e})).forEach((function(t){e[t]=n}));return e})),Ft=e((function(e,t,n){var r=t[2];return e[n]=n,r.forEach((function(t){e[t]=n})),e}));var t="far"in Nt||it.autoFetchSvg,n=St(At,(function(e,n){var r=n[0],i=n[1],a=n[2];return"far"!==i||t||(i="fas"),"string"===typeof r&&(e.names[r]={prefix:i,iconName:a}),"number"===typeof r&&(e.unicodes[r.toString(16)]={prefix:i,iconName:a}),e}),{names:{},unicodes:{}});Lt=n.names,Mt=n.unicodes,Rt=Ht(it.styleDefault)};function qt(e,t){return(Ot[e]||{})[t]}function zt(e,t){return(Ft[e]||{})[t]}function Bt(e){return Lt[e]||{prefix:null,iconName:null}}function Wt(){return Rt}!function(e){at.push(e)}((function(e){Rt=Ht(e.styleDefault)})),jt();function Ht(e){var t=qe[e]||qe[je[e]],n=e in kt.styles?e:null;return t||n||null}function Kt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.skipLookups,r=void 0!==n&&n,i=null,a=e.reduce((function(e,t){var n=Vt(it.familyPrefix,t);if(Nt[t]?(t=Pt.includes(t)?Be[t]:t,i=t,e.prefix=t):Ut.indexOf(t)>-1?(i=t,e.prefix=Ht(t)):n?e.iconName=n:t!==it.replacementClass&&e.rest.push(t),!r&&e.prefix&&e.iconName){var a="fa"===i?Bt(e.iconName):{},o=zt(e.prefix,e.iconName);a.prefix&&(i=null),e.iconName=a.iconName||o||e.iconName,e.prefix=a.prefix||e.prefix,"far"!==e.prefix||Nt.far||!Nt.fas||it.autoFetchSvg||(e.prefix="fas")}return e}),{prefix:null,iconName:null,rest:[]});return"fa"!==a.prefix&&"fa"!==i||(a.prefix=Wt()||"fas"),a}var Gt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}}var t,n,r;return t=e,n=[{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach((function(t){e.definitions[t]=fe(fe({},e.definitions[t]||{}),i[t]),Ct(t,i[t]);var n=ze[t];n&&Ct(n,i[t]),jt()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map((function(t){var r=n[t],i=r.prefix,a=r.iconName,o=r.icon,u=o[2];e[i]||(e[i]={}),u.length>0&&u.forEach((function(t){"string"===typeof t&&(e[i][t]=o)})),e[i][a]=o})),e}}],n&&de(t.prototype,n),r&&de(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Qt=[],Yt={},$t={},Jt=Object.keys($t);function Xt(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=Yt[e]||[];return a.forEach((function(e){t=e.apply(null,[t].concat(r))})),t}function Zt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=Yt[e]||[];i.forEach((function(e){e.apply(null,n)}))}function en(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return $t[e]?$t[e].apply(null,t):void 0}function tn(e){"fa"===e.prefix&&(e.prefix="fas");var t=e.iconName,n=e.prefix||Wt();if(t)return t=zt(n,t)||t,It(nn.definitions,n,t)||It(kt.styles,n,t)}var nn=new Gt,rn={i2svg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ae?(Zt("beforeI2svg",e),en("pseudoElements2svg",e),en("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot;!1===it.autoReplaceSvg&&(it.autoReplaceSvg=!0),it.observeMutations=!0,_t((function(){un({autoReplaceSvgRoot:t}),Zt("watch",e)}))}},an={icon:function(e){if(null===e)return null;if("object"===he(e)&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:zt(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){var t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],n=Ht(e[0]);return{prefix:n,iconName:zt(n,t)||t}}if("string"===typeof e&&(e.indexOf("".concat(it.familyPrefix,"-"))>-1||e.match(We))){var r=Kt(e.split(" "),{skipLookups:!0});return{prefix:r.prefix||Wt(),iconName:zt(r.prefix,r.iconName)||r.iconName}}if("string"===typeof e){var i=Wt();return{prefix:i,iconName:zt(i,e)||e}}}},on={noAuto:function(){it.autoReplaceSvg=!1,it.observeMutations=!1,Zt("noAuto")},config:it,dom:rn,parse:an,library:nn,findIconDefinition:tn,toHtml:xt},un=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot,n=void 0===t?Ee:t;(Object.keys(kt.styles).length>0||it.autoFetchSvg)&&Ae&&it.autoReplaceSvg&&on.dom.i2svg({node:n})};function sn(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((function(e){return xt(e)}))}}),Object.defineProperty(e,"node",{get:function(){if(Ae){var t=Ee.createElement("div");return t.innerHTML=e.html,t.children}}}),e}function cn(e){var t=e.icons,n=t.main,r=t.mask,i=e.prefix,a=e.iconName,o=e.transform,u=e.symbol,s=e.title,c=e.maskId,l=e.titleId,f=e.extra,h=e.watchable,d=void 0!==h&&h,p=r.found?r:n,v=p.width,m=p.height,y="fak"===i,g=[it.replacementClass,a?"".concat(it.familyPrefix,"-").concat(a):""].filter((function(e){return-1===f.classes.indexOf(e)})).filter((function(e){return""!==e||!!e})).concat(f.classes).join(" "),k={children:[],attributes:fe(fe({},f.attributes),{},{"data-prefix":i,"data-icon":a,class:g,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(v," ").concat(m)})},b=y&&!~f.classes.indexOf("fa-fw")?{width:"".concat(v/m*16*.0625,"em")}:{};d&&(k.attributes[Oe]=""),s&&(k.children.push({tag:"title",attributes:{id:k.attributes["aria-labelledby"]||"title-".concat(l||st())},children:[s]}),delete k.attributes.title);var w=fe(fe({},k),{},{prefix:i,iconName:a,main:n,mask:r,maskId:c,transform:o,symbol:u,styles:fe(fe({},b),f.styles)}),_=r.found&&n.found?en("generateAbstractMask",w)||{children:[],attributes:{}}:en("generateAbstractIcon",w)||{children:[],attributes:{}},x=_.children,I=_.attributes;return w.children=x,w.attributes=I,u?function(e){var t=e.prefix,n=e.iconName,r=e.children,i=e.attributes,a=e.symbol,o=!0===a?"".concat(t,"-").concat(it.familyPrefix,"-").concat(n):a;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:fe(fe({},i),{},{id:o}),children:r}]}]}(w):function(e){var t=e.children,n=e.main,r=e.mask,i=e.attributes,a=e.styles,o=e.transform;if(dt(o)&&n.found&&!r.found){var u={x:n.width/n.height/2,y:.5};i.style=ht(fe(fe({},a),{},{"transform-origin":"".concat(u.x+o.x/16,"em ").concat(u.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}(w)}function ln(e){var t=e.content,n=e.width,r=e.height,i=e.transform,a=e.title,o=e.extra,u=e.watchable,s=void 0!==u&&u,c=fe(fe(fe({},o.attributes),a?{title:a}:{}),{},{class:o.classes.join(" ")});s&&(c[Oe]="");var l=fe({},o.styles);dt(i)&&(l.transform=function(e){var t=e.transform,n=e.width,r=void 0===n?16:n,i=e.height,a=void 0===i?16:i,o=e.startCentered,u=void 0!==o&&o,s="";return s+=u&&Pe?"translate(".concat(t.x/ot-r/2,"em, ").concat(t.y/ot-a/2,"em) "):u?"translate(calc(-50% + ".concat(t.x/ot,"em), calc(-50% + ").concat(t.y/ot,"em)) "):"translate(".concat(t.x/ot,"em, ").concat(t.y/ot,"em) "),s+="scale(".concat(t.size/ot*(t.flipX?-1:1),", ").concat(t.size/ot*(t.flipY?-1:1),") "),s+"rotate(".concat(t.rotate,"deg) ")}({transform:i,startCentered:!0,width:n,height:r}),l["-webkit-transform"]=l.transform);var f=ht(l);f.length>0&&(c.style=f);var h=[];return h.push({tag:"span",attributes:c,children:[t]}),a&&h.push({tag:"span",attributes:{class:"sr-only"},children:[a]}),h}function fn(e){var t=e.content,n=e.title,r=e.extra,i=fe(fe(fe({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),a=ht(r.styles);a.length>0&&(i.style=a);var o=[];return o.push({tag:"span",attributes:i,children:[t]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}var hn=kt.styles;function dn(e){var t=e[0],n=e[1],r=ve(e.slice(4),1)[0];return{found:!0,width:t,height:n,icon:Array.isArray(r)?{tag:"g",attributes:{class:"".concat(it.familyPrefix,"-").concat(Je)},children:[{tag:"path",attributes:{class:"".concat(it.familyPrefix,"-").concat(et),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(it.familyPrefix,"-").concat(Ze),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}}}}var pn={found:!1,width:512,height:512};function vn(e,t){var n=t;return"fa"===t&&null!==it.styleDefault&&(t=Wt()),new Promise((function(r,i){en("missingIconAbstract");if("fa"===n){var a=Bt(e)||{};e=a.iconName||e,t=a.prefix||t}if(e&&t&&hn[t]&&hn[t][e])return r(dn(hn[t][e]));!function(e,t){Ve||it.showMissingIcons||!e||console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}(e,t),r(fe(fe({},pn),{},{icon:it.showMissingIcons&&e&&en("missingIconAbstract")||{}}))}))}var mn=function(){},yn=it.measurePerformance&&Ne&&Ne.mark&&Ne.measure?Ne:{mark:mn,measure:mn},gn='FA "6.1.2"',kn=function(e){yn.mark("".concat(gn," ").concat(e," ends")),yn.measure("".concat(gn," ").concat(e),"".concat(gn," ").concat(e," begins"),"".concat(gn," ").concat(e," ends"))},bn=function(e){return yn.mark("".concat(gn," ").concat(e," begins")),function(){return kn(e)}},wn=function(){};function _n(e){return"string"===typeof(e.getAttribute?e.getAttribute(Oe):null)}function xn(e){return Ee.createElementNS("http://www.w3.org/2000/svg",e)}function In(e){return Ee.createElement(e)}function Sn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ceFn,r=void 0===n?"svg"===e.tag?xn:In:n;if("string"===typeof e)return Ee.createTextNode(e);var i=r(e.tag);Object.keys(e.attributes||[]).forEach((function(t){i.setAttribute(t,e.attributes[t])}));var a=e.children||[];return a.forEach((function(e){i.appendChild(Sn(e,{ceFn:r}))})),i}var Tn={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach((function(e){t.parentNode.insertBefore(Sn(e),t)})),null===t.getAttribute(Oe)&&it.keepOriginalSource){var n=Ee.createComment(function(e){var t=" ".concat(e.outerHTML," ");return"".concat(t,"Font Awesome fontawesome.com ")}(t));t.parentNode.replaceChild(n,t)}else t.remove()},nest:function(e){var t=e[0],n=e[1];if(~lt(t).indexOf(it.replacementClass))return Tn.replace(e);var r=new RegExp("".concat(it.familyPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){var i=n[0].attributes.class.split(" ").reduce((function(e,t){return t===it.replacementClass||t.match(r)?e.toSvg.push(t):e.toNode.push(t),e}),{toNode:[],toSvg:[]});n[0].attributes.class=i.toSvg.join(" "),0===i.toNode.length?t.removeAttribute("class"):t.setAttribute("class",i.toNode.join(" "))}var a=n.map((function(e){return xt(e)})).join("\n");t.setAttribute(Oe,""),t.innerHTML=a}};function En(e){e()}function Cn(e,t){var n="function"===typeof t?t:wn;if(0===e.length)n();else{var r=En;"async"===it.mutateApproach&&(r=Te.requestAnimationFrame||En),r((function(){var t=!0===it.autoReplaceSvg?Tn.replace:Tn[it.autoReplaceSvg]||Tn.replace,r=bn("mutate");e.map(t),r(),n()}))}}var Nn=!1;function An(){Nn=!0}function Pn(){Nn=!1}var Rn=null;function On(e){if(Ce&&it.observeMutations){var t=e.treeCallback,n=void 0===t?wn:t,r=e.nodeCallback,i=void 0===r?wn:r,a=e.pseudoElementsCallback,o=void 0===a?wn:a,u=e.observeMutationsRoot,s=void 0===u?Ee:u;Rn=new Ce((function(e){if(!Nn){var t=Wt();ct(e).forEach((function(e){if("childList"===e.type&&e.addedNodes.length>0&&!_n(e.addedNodes[0])&&(it.searchPseudoElements&&o(e.target),n(e.target)),"attributes"===e.type&&e.target.parentNode&&it.searchPseudoElements&&o(e.target.parentNode),"attributes"===e.type&&_n(e.target)&&~$e.indexOf(e.attributeName))if("class"===e.attributeName&&function(e){var t=e.getAttribute?e.getAttribute(Le):null,n=e.getAttribute?e.getAttribute(Me):null;return t&&n}(e.target)){var r=Kt(lt(e.target)),a=r.prefix,u=r.iconName;e.target.setAttribute(Le,a||t),u&&e.target.setAttribute(Me,u)}else(s=e.target)&&s.classList&&s.classList.contains&&s.classList.contains(it.replacementClass)&&i(e.target);var s}))}})),Ae&&Rn.observe(s,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function Dn(e){var t=e.getAttribute("style"),n=[];return t&&(n=t.split(";").reduce((function(e,t){var n=t.split(":"),r=n[0],i=n.slice(1);return r&&i.length>0&&(e[r]=i.join(":").trim()),e}),{})),n}function Ln(e){var t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),r=void 0!==e.innerText?e.innerText.trim():"",i=Kt(lt(e));return i.prefix||(i.prefix=Wt()),t&&n&&(i.prefix=t,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=function(e,t){return(Dt[e]||{})[t]}(i.prefix,e.innerText)||qt(i.prefix,Tt(e.innerText))),!i.iconName&&it.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=e.firstChild.data)),i}function Mn(e){var t=ct(e.attributes).reduce((function(e,t){return"class"!==e.name&&"style"!==e.name&&(e[t.name]=t.value),e}),{}),n=e.getAttribute("title"),r=e.getAttribute("data-fa-title-id");return it.autoA11y&&(n?t["aria-labelledby"]="".concat(it.replacementClass,"-title-").concat(r||st()):(t["aria-hidden"]="true",t.focusable="false")),t}function Fn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},n=Ln(e),r=n.iconName,i=n.prefix,a=n.rest,o=Mn(e),u=Xt("parseNodeAttributes",{},e),s=t.styleParser?Dn(e):[];return fe({iconName:r,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:i,transform:ut,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:a,styles:s,attributes:o}},u)}var Un=kt.styles;function Vn(e){var t="nest"===it.autoReplaceSvg?Fn(e,{styleParser:!1}):Fn(e);return~t.extra.classes.indexOf(He)?en("generateLayersText",e,t):en("generateSvgReplacementMutation",e,t)}function jn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!Ae)return Promise.resolve();var n=Ee.documentElement.classList,r=function(e){return n.add("".concat(Fe,"-").concat(e))},i=function(e){return n.remove("".concat(Fe,"-").concat(e))},a=it.autoFetchSvg?Object.keys(je):Object.keys(Un);a.includes("fa")||a.push("fa");var o=[".".concat(He,":not([").concat(Oe,"])")].concat(a.map((function(e){return".".concat(e,":not([").concat(Oe,"])")}))).join(", ");if(0===o.length)return Promise.resolve();var u=[];try{u=ct(e.querySelectorAll(o))}catch(SV){}if(!(u.length>0))return Promise.resolve();r("pending"),i("complete");var s=bn("onTree"),c=u.reduce((function(e,t){try{var n=Vn(t);n&&e.push(n)}catch(SV){Ve||"MissingIcon"===SV.name&&console.error(SV)}return e}),[]);return new Promise((function(e,n){Promise.all(c).then((function(n){Cn(n,(function(){r("active"),r("complete"),i("pending"),"function"===typeof t&&t(),s(),e()}))})).catch((function(e){s(),n(e)}))}))}function qn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Vn(e).then((function(e){e&&Cn([e],t)}))}var zn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?ut:n,i=t.symbol,a=void 0!==i&&i,o=t.mask,u=void 0===o?null:o,s=t.maskId,c=void 0===s?null:s,l=t.title,f=void 0===l?null:l,h=t.titleId,d=void 0===h?null:h,p=t.classes,v=void 0===p?[]:p,m=t.attributes,y=void 0===m?{}:m,g=t.styles,k=void 0===g?{}:g;if(e){var b=e.prefix,w=e.iconName,_=e.icon;return sn(fe({type:"icon"},e),(function(){return Zt("beforeDOMElementCreation",{iconDefinition:e,params:t}),it.autoA11y&&(f?y["aria-labelledby"]="".concat(it.replacementClass,"-title-").concat(d||st()):(y["aria-hidden"]="true",y.focusable="false")),cn({icons:{main:dn(_),mask:u?dn(u.icon):{found:!1,width:null,height:null,icon:{}}},prefix:b,iconName:w,transform:fe(fe({},ut),r),symbol:a,title:f,maskId:c,titleId:d,extra:{attributes:y,styles:k,classes:v}})}))}},Bn={mixout:function(){return{icon:(e=zn,function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(t||{}).icon?t:tn(t||{}),i=n.mask;return i&&(i=(i||{}).icon?i:tn(i||{})),e(r,fe(fe({},n),{},{mask:i}))})};var e},hooks:function(){return{mutationObserverCallbacks:function(e){return e.treeCallback=jn,e.nodeCallback=qn,e}}},provides:function(e){e.i2svg=function(e){var t=e.node,n=void 0===t?Ee:t,r=e.callback;return jn(n,void 0===r?function(){}:r)},e.generateSvgReplacementMutation=function(e,t){var n=t.iconName,r=t.title,i=t.titleId,a=t.prefix,o=t.transform,u=t.symbol,s=t.mask,c=t.maskId,l=t.extra;return new Promise((function(t,f){Promise.all([vn(n,a),s.iconName?vn(s.iconName,s.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then((function(s){var f=ve(s,2),h=f[0],d=f[1];t([e,cn({icons:{main:h,mask:d},prefix:a,iconName:n,transform:o,symbol:u,maskId:c,title:r,titleId:i,extra:l,watchable:!0})])})).catch(f)}))},e.generateAbstractIcon=function(e){var t,n=e.children,r=e.attributes,i=e.main,a=e.transform,o=ht(e.styles);return o.length>0&&(r.style=o),dt(a)&&(t=en("generateAbstractTransformGrouping",{main:i,transform:a,containerWidth:i.width,iconWidth:i.width})),n.push(t||i.icon),{children:n,attributes:r}}}},Wn={mixout:function(){return{layer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.classes,r=void 0===n?[]:n;return sn({type:"layer"},(function(){Zt("beforeDOMElementCreation",{assembler:e,params:t});var n=[];return e((function(e){Array.isArray(e)?e.map((function(e){n=n.concat(e.abstract)})):n=n.concat(e.abstract)})),[{tag:"span",attributes:{class:["".concat(it.familyPrefix,"-layers")].concat(me(r)).join(" ")},children:n}]}))}}}},Hn={mixout:function(){return{counter:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.title,r=void 0===n?null:n,i=t.classes,a=void 0===i?[]:i,o=t.attributes,u=void 0===o?{}:o,s=t.styles,c=void 0===s?{}:s;return sn({type:"counter",content:e},(function(){return Zt("beforeDOMElementCreation",{content:e,params:t}),fn({content:e.toString(),title:r,extra:{attributes:u,styles:c,classes:["".concat(it.familyPrefix,"-layers-counter")].concat(me(a))}})}))}}}},Kn={mixout:function(){return{text:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?ut:n,i=t.title,a=void 0===i?null:i,o=t.classes,u=void 0===o?[]:o,s=t.attributes,c=void 0===s?{}:s,l=t.styles,f=void 0===l?{}:l;return sn({type:"text",content:e},(function(){return Zt("beforeDOMElementCreation",{content:e,params:t}),ln({content:e,transform:fe(fe({},ut),r),title:a,extra:{attributes:c,styles:f,classes:["".concat(it.familyPrefix,"-layers-text")].concat(me(u))}})}))}}},provides:function(e){e.generateLayersText=function(e,t){var n=t.title,r=t.transform,i=t.extra,a=null,o=null;if(Pe){var u=parseInt(getComputedStyle(e).fontSize,10),s=e.getBoundingClientRect();a=s.width/u,o=s.height/u}return it.autoA11y&&!n&&(i.attributes["aria-hidden"]="true"),Promise.resolve([e,ln({content:e.innerHTML,width:a,height:o,transform:r,title:n,extra:i,watchable:!0})])}}},Gn=new RegExp('"',"ug"),Qn=[1105920,1112319];function Yn(e,t){var n="".concat("data-fa-pseudo-element-pending").concat(t.replace(":","-"));return new Promise((function(r,i){if(null!==e.getAttribute(n))return r();var a=ct(e.children).filter((function(e){return e.getAttribute(De)===t}))[0],o=Te.getComputedStyle(e,t),u=o.getPropertyValue("font-family").match(Ke),s=o.getPropertyValue("font-weight"),c=o.getPropertyValue("content");if(a&&!u)return e.removeChild(a),r();if(u&&"none"!==c&&""!==c){var l=o.getPropertyValue("content"),f=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(u[2])?qe[u[2].toLowerCase()]:Ge[s],h=function(e){var t=e.replace(Gn,""),n=function(e,t){var n,r=e.length,i=e.charCodeAt(t);return i>=55296&&i<=56319&&r>t+1&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(i-55296)+n-56320+65536:i}(t,0),r=n>=Qn[0]&&n<=Qn[1],i=2===t.length&&t[0]===t[1];return{value:Tt(i?t[0]:t),isSecondary:r||i}}(l),d=h.value,p=h.isSecondary,v=u[0].startsWith("FontAwesome"),m=qt(f,d),y=m;if(v){var g=function(e){var t=Mt[e],n=qt("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}(d);g.iconName&&g.prefix&&(m=g.iconName,f=g.prefix)}if(!m||p||a&&a.getAttribute(Le)===f&&a.getAttribute(Me)===y)r();else{e.setAttribute(n,y),a&&e.removeChild(a);var k={iconName:null,title:null,titleId:null,prefix:null,transform:ut,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}},b=k.extra;b.attributes[De]=t,vn(m,f).then((function(i){var a=cn(fe(fe({},k),{},{icons:{main:i,mask:{prefix:null,iconName:null,rest:[]}},prefix:f,iconName:y,extra:b,watchable:!0})),o=Ee.createElement("svg");"::before"===t?e.insertBefore(o,e.firstChild):e.appendChild(o),o.outerHTML=a.map((function(e){return xt(e)})).join("\n"),e.removeAttribute(n),r()})).catch(i)}}else r()}))}function $n(e){return Promise.all([Yn(e,"::before"),Yn(e,"::after")])}function Jn(e){return e.parentNode!==document.head&&!~Ue.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(De)&&(!e.parentNode||"svg"!==e.parentNode.tagName)}function Xn(e){if(Ae)return new Promise((function(t,n){var r=ct(e.querySelectorAll("*")).filter(Jn).map($n),i=bn("searchPseudoElements");An(),Promise.all(r).then((function(){i(),Pn(),t()})).catch((function(){i(),Pn(),n()}))}))}var Zn=!1,er=function(e){return e.toLowerCase().split(" ").reduce((function(e,t){var n=t.toLowerCase().split("-"),r=n[0],i=n.slice(1).join("-");if(r&&"h"===i)return e.flipX=!0,e;if(r&&"v"===i)return e.flipY=!0,e;if(i=parseFloat(i),isNaN(i))return e;switch(r){case"grow":e.size=e.size+i;break;case"shrink":e.size=e.size-i;break;case"left":e.x=e.x-i;break;case"right":e.x=e.x+i;break;case"up":e.y=e.y-i;break;case"down":e.y=e.y+i;break;case"rotate":e.rotate=e.rotate+i}return e}),{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},tr={mixout:function(){return{parse:{transform:function(e){return er(e)}}}},hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-transform");return n&&(e.transform=er(n)),e}}},provides:function(e){e.generateAbstractTransformGrouping=function(e){var t=e.main,n=e.transform,r=e.containerWidth,i=e.iconWidth,a={transform:"translate(".concat(r/2," 256)")},o="translate(".concat(32*n.x,", ").concat(32*n.y,") "),u="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),s="rotate(".concat(n.rotate," 0 0)"),c={outer:a,inner:{transform:"".concat(o," ").concat(u," ").concat(s)},path:{transform:"translate(".concat(i/2*-1," -256)")}};return{tag:"g",attributes:fe({},c.outer),children:[{tag:"g",attributes:fe({},c.inner),children:[{tag:t.icon.tag,children:t.icon.children,attributes:fe(fe({},t.icon.attributes),c.path)}]}]}}}},nr={x:0,y:0,width:"100%",height:"100%"};function rr(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}var ir={hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-mask"),r=n?Kt(n.split(" ").map((function(e){return e.trim()}))):{prefix:null,iconName:null,rest:[]};return r.prefix||(r.prefix=Wt()),e.mask=r,e.maskId=t.getAttribute("data-fa-mask-id"),e}}},provides:function(e){e.generateAbstractMask=function(e){var t,n=e.children,r=e.attributes,i=e.main,a=e.mask,o=e.maskId,u=e.transform,s=i.width,c=i.icon,l=a.width,f=a.icon,h=function(e){var t=e.transform,n=e.containerWidth,r=e.iconWidth,i={transform:"translate(".concat(n/2," 256)")},a="translate(".concat(32*t.x,", ").concat(32*t.y,") "),o="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),u="rotate(".concat(t.rotate," 0 0)");return{outer:i,inner:{transform:"".concat(a," ").concat(o," ").concat(u)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}({transform:u,containerWidth:l,iconWidth:s}),d={tag:"rect",attributes:fe(fe({},nr),{},{fill:"white"})},p=c.children?{children:c.children.map(rr)}:{},v={tag:"g",attributes:fe({},h.inner),children:[rr(fe({tag:c.tag,attributes:fe(fe({},c.attributes),h.path)},p))]},m={tag:"g",attributes:fe({},h.outer),children:[v]},y="mask-".concat(o||st()),g="clip-".concat(o||st()),k={tag:"mask",attributes:fe(fe({},nr),{},{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[d,m]},b={tag:"defs",children:[{tag:"clipPath",attributes:{id:g},children:(t=f,"g"===t.tag?t.children:[t])},k]};return n.push(b,{tag:"rect",attributes:fe({fill:"currentColor","clip-path":"url(#".concat(g,")"),mask:"url(#".concat(y,")")},nr)}),{children:n,attributes:r}}}},ar={provides:function(e){var t=!1;Te.matchMedia&&(t=Te.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var e=[],n={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};e.push({tag:"path",attributes:fe(fe({},n),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var i=fe(fe({},r),{},{attributeName:"opacity"}),a={tag:"circle",attributes:fe(fe({},n),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||a.children.push({tag:"animate",attributes:fe(fe({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:fe(fe({},i),{},{values:"1;0;1;1;0;1;"})}),e.push(a),e.push({tag:"path",attributes:fe(fe({},n),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:fe(fe({},i),{},{values:"1;0;0;0;0;1;"})}]}),t||e.push({tag:"path",attributes:fe(fe({},n),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:fe(fe({},i),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:e}}}};!function(e,t){var n=t.mixoutsTo;Qt=e,Yt={},Object.keys($t).forEach((function(e){-1===Jt.indexOf(e)&&delete $t[e]})),Qt.forEach((function(e){var t=e.mixout?e.mixout():{};if(Object.keys(t).forEach((function(e){"function"===typeof t[e]&&(n[e]=t[e]),"object"===he(t[e])&&Object.keys(t[e]).forEach((function(r){n[e]||(n[e]={}),n[e][r]=t[e][r]}))})),e.hooks){var r=e.hooks();Object.keys(r).forEach((function(e){Yt[e]||(Yt[e]=[]),Yt[e].push(r[e])}))}e.provides&&e.provides($t)}))}([yt,Bn,Wn,Hn,Kn,{hooks:function(){return{mutationObserverCallbacks:function(e){return e.pseudoElementsCallback=Xn,e}}},provides:function(e){e.pseudoElements2svg=function(e){var t=e.node,n=void 0===t?Ee:t;it.searchPseudoElements&&Xn(n)}}},{mixout:function(){return{dom:{unwatch:function(){An(),Zn=!0}}}},hooks:function(){return{bootstrap:function(){On(Xt("mutationObserverCallbacks",{}))},noAuto:function(){Rn&&Rn.disconnect()},watch:function(e){var t=e.observeMutationsRoot;Zn?Pn():On(Xt("mutationObserverCallbacks",{observeMutationsRoot:t}))}}}},tr,ir,ar,{hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-symbol"),r=null!==n&&(""===n||n);return e.symbol=r,e}}}}],{mixoutsTo:on});var or=on.parse,ur=on.icon,sr=n(7),cr=n.n(sr);function lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lr(Object(n),!0).forEach((function(t){dr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hr(e){return hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hr(e)}function dr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pr(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function vr(e){return function(e){if(Array.isArray(e))return mr(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return mr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mr(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yr(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}var gr=["style"];function kr(e){return e.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n,r=t.indexOf(":"),i=yr(t.slice(0,r)),a=t.slice(r+1).trim();return i.startsWith("webkit")?e[(n=i,n.charAt(0).toUpperCase()+n.slice(1))]=a:e[i]=a,e}),{})}var br=!1;try{br=!0}catch(SV){}function wr(e){return e&&"object"===hr(e)&&e.prefix&&e.iconName&&e.icon?e:or.icon?or.icon(e):null===e?null:e&&"object"===hr(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function _r(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?dr({},e,t):{}}var xr=r.forwardRef((function(e,t){var n=e.icon,r=e.mask,i=e.symbol,a=e.className,o=e.title,u=e.titleId,s=e.maskId,c=wr(n),l=_r("classes",[].concat(vr(function(e){var t,n=e.beat,r=e.fade,i=e.beatFade,a=e.bounce,o=e.shake,u=e.flash,s=e.spin,c=e.spinPulse,l=e.spinReverse,f=e.pulse,h=e.fixedWidth,d=e.inverse,p=e.border,v=e.listItem,m=e.flip,y=e.size,g=e.rotation,k=e.pull,b=(dr(t={"fa-beat":n,"fa-fade":r,"fa-beat-fade":i,"fa-bounce":a,"fa-shake":o,"fa-flash":u,"fa-spin":s,"fa-spin-reverse":l,"fa-spin-pulse":c,"fa-pulse":f,"fa-fw":h,"fa-inverse":d,"fa-border":p,"fa-li":v,"fa-flip":!0===m,"fa-flip-horizontal":"horizontal"===m||"both"===m,"fa-flip-vertical":"vertical"===m||"both"===m},"fa-".concat(y),"undefined"!==typeof y&&null!==y),dr(t,"fa-rotate-".concat(g),"undefined"!==typeof g&&null!==g&&0!==g),dr(t,"fa-pull-".concat(k),"undefined"!==typeof k&&null!==k),dr(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(b).map((function(e){return b[e]?e:null})).filter((function(e){return e}))}(e)),vr(a.split(" ")))),f=_r("transform","string"===typeof e.transform?or.transform(e.transform):e.transform),h=_r("mask",wr(r)),d=ur(c,fr(fr(fr(fr({},l),f),h),{},{symbol:i,title:o,titleId:u,maskId:s}));if(!d)return function(){var e;!br&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",c),null;var p=d.abstract,v={ref:t};return Object.keys(e).forEach((function(t){xr.defaultProps.hasOwnProperty(t)||(v[t]=e[t])})),Ir(p[0],v)}));xr.displayName="FontAwesomeIcon",xr.propTypes={beat:cr().bool,border:cr().bool,beatFade:cr().bool,bounce:cr().bool,className:cr().string,fade:cr().bool,flash:cr().bool,mask:cr().oneOfType([cr().object,cr().array,cr().string]),maskId:cr().string,fixedWidth:cr().bool,inverse:cr().bool,flip:cr().oneOf([!0,!1,"horizontal","vertical","both"]),icon:cr().oneOfType([cr().object,cr().array,cr().string]),listItem:cr().bool,pull:cr().oneOf(["right","left"]),pulse:cr().bool,rotation:cr().oneOf([0,90,180,270]),shake:cr().bool,size:cr().oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:cr().bool,spinPulse:cr().bool,spinReverse:cr().bool,symbol:cr().oneOfType([cr().bool,cr().string]),title:cr().string,titleId:cr().string,transform:cr().oneOfType([cr().string,cr().object]),swapOpacity:cr().bool},xr.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var Ir=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var i=(n.children||[]).map((function(n){return e(t,n)})),a=Object.keys(n.attributes||{}).reduce((function(e,t){var r=n.attributes[t];switch(t){case"class":e.attrs.className=r,delete n.attributes.class;break;case"style":e.attrs.style=kr(r);break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=r:e.attrs[yr(t)]=r}return e}),{attrs:{}}),o=r.style,u=void 0===o?{}:o,s=pr(r,gr);return a.attrs.style=fr(fr({},a.attrs.style),u),t.apply(void 0,[n.tag,fr(fr({},a.attrs),s)].concat(vr(i)))}.bind(null,r.createElement);function Sr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Er(e,t,n){return t&&Tr(e.prototype,t),n&&Tr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Cr(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Nr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ar(e,t){return Ar=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ar(e,t)}function Pr(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ar(e,t)}function Rr(e){return Rr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Rr(e)}function Or(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(SV){return!1}}function Dr(e,t){if(t&&("object"===J(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Nr(e)}function Lr(e){var t=Or();return function(){var n,r=Rr(e);if(t){var i=Rr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Dr(this,n)}}function Mr(e,t,n){return Mr=Or()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Ar(i,n.prototype),i},Mr.apply(null,arguments)}function Fr(e){var t="function"===typeof Map?new Map:void 0;return Fr=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Mr(e,arguments,Rr(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Ar(n,e)},Fr(e)}var Ur=!1,Vr=!1,jr="${JSCORE_VERSION}",qr=function(e,t){if(!e)throw zr(t)},zr=function(e){return new Error("Firebase Database ("+jr+") INTERNAL ASSERT FAILED: "+e)},Br=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Wr={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Br(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Hr=function(e){var t=Br(e);return Wr.encodeByteArray(t,!0)},Kr=function(e){return Hr(e).replace(/\./g,"")},Gr=function(e){try{return Wr.decodeString(e,!0)}catch(SV){console.error("base64Decode failed: ",SV)}return null};function Qr(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Qr(e[n],t[n]));return e}var Yr=function(){function e(){var t=this;Sr(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return Er(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function $r(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Kr(JSON.stringify({alg:"none",type:"JWT"})),Kr(JSON.stringify(a)),""].join(".")}function Jr(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Xr(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jr())}function Zr(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(SV){return!1}}function ei(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function ti(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function ni(){var e=Jr();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function ri(){return!0===Ur||!0===Vr}function ii(){return"object"===typeof indexedDB}var ai=function(e){Pr(n,e);var t=Lr(n);function n(e,r,i){var a;return Sr(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(Nr(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(Nr(a),oi.prototype.create),a}return Er(n)}(Fr(Error)),oi=function(){function e(t,n,r){Sr(this,e),this.service=t,this.serviceName=n,this.errors=r}return Er(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?ui(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new ai(n,a,t);return o}}]),e}();function ui(e,t){return e.replace(si,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var si=/\{\$([^}]+)}/g;function ci(e){return JSON.parse(e)}function li(e){return JSON.stringify(e)}var fi=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=ci(Gr(a[0])||""),n=ci(Gr(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(SV){}return{header:t,claims:n,data:r,signature:i}};function hi(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function di(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function pi(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function vi(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function mi(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(yi(u)&&yi(s)){if(!mi(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function yi(e){return null!==e&&"object"===typeof e}function gi(e){for(var t=[],n=function(){var e=c(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function ki(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=c(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function bi(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var wi=function(){function e(){Sr(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return Er(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var u,s,c=this.chain_[0],l=this.chain_[1],f=this.chain_[2],h=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(u=h^l&(f^h),s=1518500249):(u=l^f^h,s=1859775393):p<60?(u=l&f|h&(l|f),s=2400959708):(u=l^f^h,s=3395469782);var v=(c<<5|c>>>27)+u+d+s+n[p]&4294967295;d=h,h=f,f=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function _i(e,t){var n=new xi(e,t);return n.subscribe.bind(n)}var xi=function(){function e(t,n){var r=this;Sr(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return Er(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Cr(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Ii),void 0===r.error&&(r.error=Ii),void 0===r.complete&&(r.complete=Ii);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(SV){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(SV){"undefined"!==typeof console&&console.error&&console.error(SV)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Ii(){}var Si=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function Ti(e,t){return"".concat(e," failed: ").concat(t," argument ")}function Ei(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(Ti(e,t)+"must be a valid function.")}function Ci(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(Ti(e,t)+"must be a valid context object.")}var Ni=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Ai(e){return e&&e._delegate?e._delegate:e}function Pi(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Ri(e){return function(e){if(Array.isArray(e))return o(e)}(e)||Pi(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Oi=function(){function e(t,n,r){Sr(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Er(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Di="[DEFAULT]",Li=function(){function e(t,n){Sr(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Er(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Yr;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(SV){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(SV){if(r)return null;throw SV}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Di})}catch(SV){}var t,n=Cr(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=c(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(SV){}}}catch(s){n.e(s)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Di;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=ee(X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Ri(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Ri(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Di;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Di;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=Cr(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=c(i.value,2),s=u[0],l=u[1],f=this.normalizeInstanceIdentifier(s);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Cr(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(u){i.e(u)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Di?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Di;return this.component?this.component.multipleInstances?e:Di:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Mi,Fi,Ui=function(){function e(t){Sr(this,e),this.name=t,this.providers=new Map}return Er(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Li(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Vi=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Fi||(Fi={}));var ji={debug:Fi.DEBUG,verbose:Fi.VERBOSE,info:Fi.INFO,warn:Fi.WARN,error:Fi.ERROR,silent:Fi.SILENT},qi=Fi.INFO,zi=(te(Mi={},Fi.DEBUG,"log"),te(Mi,Fi.VERBOSE,"log"),te(Mi,Fi.INFO,"info"),te(Mi,Fi.WARN,"warn"),te(Mi,Fi.ERROR,"error"),Mi),Bi=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=zi[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Wi=function(){function e(t){Sr(this,e),this.name=t,this._logLevel=qi,this._logHandler=Bi,this._userLogHandler=null,Vi.push(this)}return Er(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Fi))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?ji[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Fi.DEBUG].concat(t)),this._logHandler.apply(this,[this,Fi.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Fi.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Fi.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Fi.INFO].concat(t)),this._logHandler.apply(this,[this,Fi.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Fi.WARN].concat(t)),this._logHandler.apply(this,[this,Fi.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Fi.ERROR].concat(t)),this._logHandler.apply(this,[this,Fi.ERROR].concat(t))}}]),e}();var Hi,Ki;var Gi=new WeakMap,Qi=new WeakMap,Yi=new WeakMap,$i=new WeakMap,Ji=new WeakMap;var Xi={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Qi.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Yi.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ta(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Zi(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ki||(Ki=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(na(this),n),ta(Gi.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ta(e.apply(na(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[na(this),t].concat(r));return Yi.set(a,t.sort?t.sort():[t]),ta(a)}}function ea(e){return"function"===typeof e?Zi(e):(e instanceof IDBTransaction&&function(e){if(!Qi.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Qi.set(e,t)}}(e),t=e,(Hi||(Hi=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,Xi):e);var t}function ta(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(ta(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Gi.set(t,e)})).catch((function(){})),Ji.set(t,e),t}(e);if($i.has(e))return $i.get(e);var t=ea(e);return t!==e&&($i.set(e,t),Ji.set(t,e)),t}var na=function(e){return Ji.get(e)};var ra,ia,aa=["get","getKey","getAll","getAllKeys","count"],oa=["put","add","delete","clear"],ua=new Map;function sa(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(ua.get(t))return ua.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=oa.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||aa.includes(n))){var a=function(){var e=ee(X().mark((function e(t){var a,o,u,s,c,l,f=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return ua.set(t,a),a}}}Xi=function(e){return re(re({},e),{},{get:function(t,n,r){return sa(t,n)||e.get(t,n,r)},has:function(t,n){return!!sa(t,n)||e.has(t,n)}})}(Xi);var ca=function(){function e(t){Sr(this,e),this.container=t}return Er(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var la="@firebase/app",fa="0.7.31",ha=new Wi("@firebase/app"),da="[DEFAULT]",pa=(te(ra={},la,"fire-core"),te(ra,"@firebase/app-compat","fire-core-compat"),te(ra,"@firebase/analytics","fire-analytics"),te(ra,"@firebase/analytics-compat","fire-analytics-compat"),te(ra,"@firebase/app-check","fire-app-check"),te(ra,"@firebase/app-check-compat","fire-app-check-compat"),te(ra,"@firebase/auth","fire-auth"),te(ra,"@firebase/auth-compat","fire-auth-compat"),te(ra,"@firebase/database","fire-rtdb"),te(ra,"@firebase/database-compat","fire-rtdb-compat"),te(ra,"@firebase/functions","fire-fn"),te(ra,"@firebase/functions-compat","fire-fn-compat"),te(ra,"@firebase/installations","fire-iid"),te(ra,"@firebase/installations-compat","fire-iid-compat"),te(ra,"@firebase/messaging","fire-fcm"),te(ra,"@firebase/messaging-compat","fire-fcm-compat"),te(ra,"@firebase/performance","fire-perf"),te(ra,"@firebase/performance-compat","fire-perf-compat"),te(ra,"@firebase/remote-config","fire-rc"),te(ra,"@firebase/remote-config-compat","fire-rc-compat"),te(ra,"@firebase/storage","fire-gcs"),te(ra,"@firebase/storage-compat","fire-gcs-compat"),te(ra,"@firebase/firestore","fire-fst"),te(ra,"@firebase/firestore-compat","fire-fst-compat"),te(ra,"fire-js","fire-js"),te(ra,"firebase","fire-js-all"),ra),va=new Map,ma=new Map;function ya(e,t){try{e.container.addComponent(t)}catch(SV){ha.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),SV)}}function ga(e,t){e.container.addOrOverwriteComponent(t)}function ka(e){var t=e.name;if(ma.has(t))return ha.debug("There were multiple attempts to register component ".concat(t,".")),!1;ma.set(t,e);var n,r=Cr(va.values());try{for(r.s();!(n=r.n()).done;){ya(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function ba(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function wa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:da;ba(e,t).clearInstance(n)}function _a(){ma.clear()}var xa=(te(ia={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),te(ia,"bad-app-name","Illegal App name: '{$appName}"),te(ia,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),te(ia,"app-deleted","Firebase App named '{$appName}' already deleted"),te(ia,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),te(ia,"invalid-log-argument","First argument to `onLog` must be null or a function."),te(ia,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),te(ia,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),te(ia,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),te(ia,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),ia),Ia=new oi("app","Firebase",xa),Sa=function(){function e(t,n,r){var i=this;Sr(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Oi("app",(function(){return i}),"PUBLIC"))}return Er(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Ia.create("app-deleted",{appName:this._name})}}]),e}(),Ta="9.9.3";function Ea(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:da,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ia.create("bad-app-name",{appName:String(i)});var a=va.get(i);if(a){if(mi(e,a.options)&&mi(r,a.config))return a;throw Ia.create("duplicate-app",{appName:i})}var o,u=new Ui(i),s=Cr(ma.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Sa(e,r,u);return va.set(i,l),l}function Ca(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:da,t=va.get(e);if(!t)throw Ia.create("no-app",{appName:e});return t}function Na(){return Array.from(va.values())}function Aa(e){return Pa.apply(this,arguments)}function Pa(){return(Pa=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!va.has(n)){e.next=6;break}return va.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ra(e,t,n){var r,i=null!==(r=pa[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ha.warn(u.join(" "))}ka(new Oi("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Oa(e,t){if(null!==e&&"function"!==typeof e)throw Ia.create("invalid-log-argument");!function(e,t){var n,r=Cr(Vi);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=ji[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Fi[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Da(e){var t;t=e,Vi.forEach((function(e){e.setLogLevel(t)}))}var La="firebase-heartbeat-store",Ma=null;function Fa(){return Ma||(Ma=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=ta(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(ta(u.result),e.oldVersion,e.newVersion,ta(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(La)}}).catch((function(e){throw Ia.create("idb-open",{originalErrorMessage:e.message})}))),Ma}function Ua(e){return Va.apply(this,arguments)}function Va(){return Va=ee(X().mark((function e(t){var n,r,i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fa();case 3:return r=e.sent,e.abrupt("return",r.transaction(La).objectStore(La).get(za(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof ai?ha.warn(e.t0.message):(i=Ia.create("idb-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message}),ha.warn(i.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Va.apply(this,arguments)}function ja(e,t){return qa.apply(this,arguments)}function qa(){return qa=ee(X().mark((function e(t,n){var r,i,a,o,u;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fa();case 3:return i=e.sent,a=i.transaction(La,"readwrite"),o=a.objectStore(La),e.next=8,o.put(n,za(t));case 8:return e.abrupt("return",a.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof ai?ha.warn(e.t0.message):(u=Ia.create("idb-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message}),ha.warn(u.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),qa.apply(this,arguments)}function za(e){return"".concat(e.name,"!").concat(e.options.appId)}var Ba=function(){function e(t){var n=this;Sr(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Qa(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return Er(e,[{key:"triggerHeartbeat",value:function(){var e=ee(X().mark((function e(){var t,n,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Wa(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=ee(X().mark((function e(){var t,n,r,i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Wa(),n=Ha(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=Kr(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Wa(){return(new Date).toISOString().substring(0,10)}function Ha(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=Cr(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Ya(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Ya(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Ka,Ga,Qa=function(){function e(t){Sr(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return Er(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ii()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(TA){t(TA)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=ee(X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Ua(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=ee(X().mark((function e(t){var n,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ja(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=ee(X().mark((function e(t){var n,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ja(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(Ri(r.heartbeats),Ri(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Ya(e){return Kr(JSON.stringify({version:2,heartbeats:e})).length}Ka="",ka(new Oi("platform-logger",(function(e){return new ca(e)}),"PRIVATE")),ka(new Oi("heartbeat",(function(e){return new Ba(e)}),"PRIVATE")),Ra(la,fa,Ka),Ra(la,fa,"esm2017"),Ra("fire-js","");var $a=function(){function e(t,n){var r=this;Sr(this,e),this._delegate=t,this.firebase=n,ya(t,new Oi("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return Er(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Aa(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:da;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:da;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){ya(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){ga(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Ja=(te(Ga={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),te(Ga,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Ga),Xa=new oi("app-compat","Firebase",Ja);var Za=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Ea(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(hi(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Ra,setLogLevel:Da,onLog:Oa,apps:null,SDK_VERSION:Ta,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(ka(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Xa.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Qr(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!hi(n,e=e||da))throw Xa.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}($a);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Qr(n,e)},createSubscribe:_i,ErrorFactory:oi,deepExtend:Qr}),n}(),eo=new Wi("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){eo.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var to=self.firebase.SDK_VERSION;to&&to.indexOf("LITE")>=0&&eo.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var no=Za;!function(e){Ra("@firebase/app-compat","0.1.32",e)}();function ro(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Rr(e)););return e}function io(){return io="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=ro(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},io.apply(this,arguments)}no.registerVersion("firebase","9.9.3","app-compat");function ao(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var oo;Object.create;var uo="facebook.com",so="github.com",co="google.com",lo="password",fo="twitter.com",ho="EMAIL_SIGNIN",po="PASSWORD_RESET",vo="RECOVER_EMAIL",mo="REVERT_SECOND_FACTOR_ADDITION",yo="VERIFY_AND_CHANGE_EMAIL",go="VERIFY_EMAIL";function ko(){return te({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var bo=function(){var e;return te(e={},"admin-restricted-operation","This operation is restricted to administrators only."),te(e,"argument-error",""),te(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),te(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),te(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),te(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),te(e,"cordova-not-ready","Cordova framework is not ready."),te(e,"cors-unsupported","This browser is not supported."),te(e,"credential-already-in-use","This credential is already associated with a different user account."),te(e,"custom-token-mismatch","The custom token corresponds to a different audience."),te(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),te(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),te(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),te(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),te(e,"email-already-in-use","The email address is already in use by another account."),te(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),te(e,"expired-action-code","The action code has expired."),te(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),te(e,"internal-error","An internal AuthError has occurred."),te(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),te(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),te(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),te(e,"invalid-auth-event","An internal AuthError has occurred."),te(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),te(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),te(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),te(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),te(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),te(e,"invalid-email","The email address is badly formatted."),te(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),te(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),te(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),te(e,"invalid-credential","The supplied auth credential is malformed or has expired."),te(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),te(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),te(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),te(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),te(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),te(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),te(e,"wrong-password","The password is invalid or the user does not have a password."),te(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),te(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),te(e,"invalid-provider-id","The specified provider ID is invalid."),te(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),te(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),te(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),te(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),te(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),te(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),te(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),te(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),te(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),te(e,"missing-continue-uri","A continue URL must be provided in the request."),te(e,"missing-iframe-start","An internal AuthError has occurred."),te(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),te(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),te(e,"missing-multi-factor-info","No second factor identifier is provided."),te(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),te(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),te(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),te(e,"app-deleted","This instance of FirebaseApp has been deleted."),te(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),te(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),te(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),te(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),te(e,"no-auth-event","An internal AuthError has occurred."),te(e,"no-such-provider","User was not linked to an account with the given provider."),te(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),te(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),te(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),te(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),te(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),te(e,"provider-already-linked","User can only be linked to one identity for the given provider."),te(e,"quota-exceeded","The project's quota for this operation has been exceeded."),te(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),te(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),te(e,"rejected-credential","The request contains malformed or mismatching credentials."),te(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),te(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),te(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),te(e,"timeout","The operation has timed out."),te(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),te(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),te(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),te(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),te(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),te(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),te(e,"unverified-email","The operation requires a verified email."),te(e,"user-cancelled","The user did not grant your application the permissions it requested."),te(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),te(e,"user-disabled","The user account has been disabled by an administrator."),te(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),te(e,"user-signed-out",""),te(e,"weak-password","The password must be 6 characters long or more."),te(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),te(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},wo=ko,_o=new oi("auth","Firebase",ko()),xo=new Wi("@firebase/auth");function Io(e){if(xo.logLevel<=Fi.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];xo.error.apply(xo,["Auth (".concat(Ta,"): ").concat(e)].concat(n))}}function So(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw No.apply(void 0,[e].concat(n))}function To(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return No.apply(void 0,[e].concat(n))}function Eo(e,t,n){var r=Object.assign(Object.assign({},wo()),te({},t,n));return new oi("auth","Firebase",r).create(t,{appName:e.name})}function Co(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&So(e,"argument-error"),Eo(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function No(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=Ri(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Ri(o)))}return _o.create.apply(_o,[e].concat(n))}function Ao(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw No.apply(void 0,[t].concat(r))}}function Po(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Io(t),new Error(t)}function Ro(e,t){e||Po(t)}var Oo=new Map;function Do(e){Ro(e instanceof Function,"Expected a class definition");var t=Oo.get(e);return t?(Ro(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Oo.set(e,t),t)}function Lo(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Mo(){return"http:"===Fo()||"https:"===Fo()}function Fo(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Uo=function(){function e(t,n){Sr(this,e),this.shortDelay=t,this.longDelay=n,Ro(n>t,"Short delay should be less than long delay!"),this.isMobile=Xr()||ti()}return Er(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Mo()||ei()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Vo(e,t){Ro(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var jo=function(){function e(){Sr(this,e)}return Er(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Po("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Po("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Po("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),qo=(te(oo={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),te(oo,"MISSING_CUSTOM_TOKEN","internal-error"),te(oo,"INVALID_IDENTIFIER","invalid-email"),te(oo,"MISSING_CONTINUE_URI","internal-error"),te(oo,"INVALID_PASSWORD","wrong-password"),te(oo,"MISSING_PASSWORD","internal-error"),te(oo,"EMAIL_EXISTS","email-already-in-use"),te(oo,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),te(oo,"INVALID_IDP_RESPONSE","invalid-credential"),te(oo,"INVALID_PENDING_TOKEN","invalid-credential"),te(oo,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),te(oo,"MISSING_REQ_TYPE","internal-error"),te(oo,"EMAIL_NOT_FOUND","user-not-found"),te(oo,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),te(oo,"EXPIRED_OOB_CODE","expired-action-code"),te(oo,"INVALID_OOB_CODE","invalid-action-code"),te(oo,"MISSING_OOB_CODE","internal-error"),te(oo,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),te(oo,"INVALID_ID_TOKEN","invalid-user-token"),te(oo,"TOKEN_EXPIRED","user-token-expired"),te(oo,"USER_NOT_FOUND","user-token-expired"),te(oo,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),te(oo,"INVALID_CODE","invalid-verification-code"),te(oo,"INVALID_SESSION_INFO","invalid-verification-id"),te(oo,"INVALID_TEMPORARY_PROOF","invalid-credential"),te(oo,"MISSING_SESSION_INFO","missing-verification-id"),te(oo,"SESSION_EXPIRED","code-expired"),te(oo,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),te(oo,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),te(oo,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),te(oo,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),te(oo,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),te(oo,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),te(oo,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),te(oo,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),te(oo,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),te(oo,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),te(oo,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),oo),zo=new Uo(3e4,6e4);function Bo(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Wo(e,t,n,r){return Ho.apply(this,arguments)}function Ho(){return Ho=ee(X().mark((function e(t,n,r,i){var a,o=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Ko(t,a,ee(X().mark((function e(){var a,o,u,s;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=gi(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",jo.fetch()($o(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Ho.apply(this,arguments)}function Ko(e,t,n){return Go.apply(this,arguments)}function Go(){return Go=ee(X().mark((function e(t,n,r){var i,a,o,u,s,l,f,h,d,p;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},qo),n),e.prev=2,a=new Jo(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Xo(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,l=s.split(" : "),f=c(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw Xo(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw Xo(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw Xo(t,"user-disabled",u);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw Eo(t,p,d);case 34:So(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof ai)){e.next=41;break}throw e.t0;case 41:So(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Go.apply(this,arguments)}function Qo(e,t,n,r){return Yo.apply(this,arguments)}function Yo(){return Yo=ee(X().mark((function e(t,n,r,i){var a,o,u=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Wo(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&So(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Yo.apply(this,arguments)}function $o(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Vo(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Jo=function(){function e(t){var n=this;Sr(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(To(n.auth,"network-request-failed"))}),zo.get())}))}return Er(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Xo(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=To(e,t,r);return i.customData._tokenResponse=n,i}function Zo(e,t){return eu.apply(this,arguments)}function eu(){return eu=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wo(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),eu.apply(this,arguments)}function tu(e,t){return nu.apply(this,arguments)}function nu(){return nu=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wo(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),nu.apply(this,arguments)}function ru(e,t){return iu.apply(this,arguments)}function iu(){return iu=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wo(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),iu.apply(this,arguments)}function au(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(SV){}}function ou(){return ou=ee(X().mark((function e(t){var n,r,i,a,o,u,s=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=Ai(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Ao((a=su(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:au(uu(a.auth_time)),issuedAtTime:au(uu(a.iat)),expirationTime:au(uu(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),ou.apply(this,arguments)}function uu(e){return 1e3*Number(e)}function su(e){var t,n=c(e.split("."),3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return Io("JWT malformed, contained fewer than 3 sections"),null;try{var o=Gr(i);return o?JSON.parse(o):(Io("Failed to decode base64 JWT payload"),null)}catch(SV){return Io("Caught error parsing JWT payload as JSON",null===(t=SV)||void 0===t?void 0:t.toString()),null}}function cu(e,t){return lu.apply(this,arguments)}function lu(){return lu=ee(X().mark((function e(t,n){var r=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof ai&&fu(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),lu.apply(this,arguments)}function fu(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var hu=function(){function e(t){Sr(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return Er(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(ee(X().mark((function t(){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=ee(X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===(t=e.t0)||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),du=function(){function e(t,n){Sr(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return Er(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=au(this.lastLoginAt),this.creationTime=au(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function pu(e){return vu.apply(this,arguments)}function vu(){return vu=ee(X().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,cu(t,ru(r,{idToken:i}));case 6:Ao(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?gu(o.providerUserInfo):[],s=yu(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new du(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),vu.apply(this,arguments)}function mu(){return(mu=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ai(t),e.next=3,pu(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yu(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Ri(n),Ri(t))}function gu(e){return e.map((function(e){var t=e.providerId,n=ao(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function ku(e,t){return bu.apply(this,arguments)}function bu(){return bu=ee(X().mark((function e(t,n){var r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ko(t,{},ee(X().mark((function e(){var r,i,a,o,u,s;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gi({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=$o(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",jo.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),bu.apply(this,arguments)}var wu=function(){function e(){Sr(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return Er(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Ao(e.idToken,"internal-error"),Ao("undefined"!==typeof e.idToken,"internal-error"),Ao("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=su(e);return Ao(t,"internal-error"),Ao("undefined"!==typeof t.exp,"internal-error"),Ao("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=ee(X().mark((function e(t){var n,r=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Ao(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=ee(X().mark((function e(t,n){var r,i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ku(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Po("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Ao("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Ao("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Ao("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function _u(e,t){Ao("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var xu=function(){function e(t){Sr(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=ao(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hu(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?Ri(a.providerData):[],this.metadata=new du(a.createdAt||void 0,a.lastLoginAt||void 0)}return Er(e,[{key:"getIdToken",value:function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cu(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Ao(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return ou.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return mu.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Ao(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Ao(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=ee(X().mark((function e(t){var n,r,i=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,pu(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=ee(X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,cu(this,Zo(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;Ao(k&&x,t,"internal-error");var I=wu.fromJSON(this.name,x);Ao("string"===typeof k,t,"internal-error"),_u(f,t.name),_u(h,t.name),Ao("boolean"===typeof b,t,"internal-error"),Ao("boolean"===typeof w,t,"internal-error"),_u(d,t.name),_u(p,t.name),_u(v,t.name),_u(m,t.name),_u(y,t.name),_u(g,t.name);var S=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return _&&Array.isArray(_)&&(S.providerData=_.map((function(e){return Object.assign({},e)}))),m&&(S._redirectEventId=m),S}},{key:"_fromIdTokenResponse",value:function(){var t=ee(X().mark((function t(n,r){var i,a,o,u=arguments;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new wu).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,pu(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Iu=function(){function e(){Sr(this,e),this.type="NONE",this.storage={}}return Er(e,[{key:"_isAvailable",value:function(){var e=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Iu.type="NONE";var Su=Iu;function Tu(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Eu=function(){function e(t,n,r){Sr(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Tu(this.userKey,a.apiKey,o),this.fullPersistenceKey=Tu("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return Er(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=ee(X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?xu._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=ee(X().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Do(Su),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Do(Su),u=Tu(i,n.config.apiKey,n.name),s=null,c=Cr(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=xu._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Cu(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ru(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Nu(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Du(t))return"Blackberry";if(Lu(t))return"Webos";if(Au(t))return"Safari";if((t.includes("chrome/")||Pu(t))&&!t.includes("edge/"))return"Chrome";if(Ou(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Nu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jr();return/firefox\//i.test(e)}function Au(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jr(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Pu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jr();return/crios\//i.test(e)}function Ru(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jr();return/iemobile/i.test(e)}function Ou(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jr();return/android/i.test(e)}function Du(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jr();return/blackberry/i.test(e)}function Lu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jr();return/webos/i.test(e)}function Mu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jr();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Fu(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jr();return Mu(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Uu(){return ni()&&10===document.documentMode}function Vu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jr();return Mu(e)||Ou(e)||Lu(e)||Du(e)||/windows phone/i.test(e)||Ru(e)}function ju(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Cu(Jr());break;case"Worker":t="".concat(Cu(Jr()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Ta,"/").concat(r)}var qu=function(){function e(t){Sr(this,e),this.auth=t,this.queue=[]}return Er(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(SV){r(SV)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=ee(X().mark((function e(t){var n,r,i,a,o,u,s,c;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=Cr(this.queue),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=11,o(t);case 11:o.onAbort&&r.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),u=Cr(r);try{for(u.s();!(s=u.n()).done;){c=s.value;try{c()}catch(l){}}}catch(f){u.e(f)}finally{u.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),zu=function(){function e(t,n,r){Sr(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wu(this),this.idTokenSubscription=new Wu(this),this.beforeStateQueue=new qu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_o,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return Er(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Do(t)),this._initializationPromise=this.queue(ee(X().mark((function r(){var i,a;return X().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Eu.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=ee(X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=ee(X().mark((function e(t){var n,r,i,a,o,u,s;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Ao(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pu(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Ai(t):null)&&Ao(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=ee(X().mark((function e(t){var n,r=this,i=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Ao(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(ee(X().mark((function n(){return X().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Do(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new oi("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=ee(X().mark((function e(t,n){var r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Ao(n=t&&Do(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Eu.create(this,[Do(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=ee(X().mark((function e(t){var n,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=ee(X().mark((function e(t){var n=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Ao(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Ao(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ju(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=ee(X().mark((function e(){var t,n,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=te({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Bu(e){return Ai(e)}var Wu=function(){function e(t){var n=this;Sr(this,e),this.auth=t,this.observer=null,this.addObserver=_i((function(e){return n.observer=e}))}return Er(e,[{key:"next",get:function(){return Ao(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Hu(e,t,n){var r=Bu(e);Ao(r._canInitEmulator,r,"emulator-config-failed"),Ao(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Ku(t),o=function(e){var t=Ku(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Gu(r.substr(a.length+1))}}var o=c(r.split(":"),2);return{host:o[0],port:Gu(o[1])}}(t),u=o.host,s=o.port,l=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ku(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Gu(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Qu=function(){function e(t,n){Sr(this,e),this.providerId=t,this.signInMethod=n}return Er(e,[{key:"toJSON",value:function(){return Po("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Po("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Po("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Po("not implemented")}}]),e}();function Yu(e,t){return $u.apply(this,arguments)}function $u(){return $u=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wo(t,"POST","/v1/accounts:resetPassword",Bo(t,n)));case 1:case"end":return e.stop()}}),e)}))),$u.apply(this,arguments)}function Ju(e,t){return Xu.apply(this,arguments)}function Xu(){return Xu=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wo(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Xu.apply(this,arguments)}function Zu(e,t){return es.apply(this,arguments)}function es(){return es=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wo(t,"POST","/v1/accounts:update",Bo(t,n)));case 1:case"end":return e.stop()}}),e)}))),es.apply(this,arguments)}function ts(e,t){return ns.apply(this,arguments)}function ns(){return ns=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qo(t,"POST","/v1/accounts:signInWithPassword",Bo(t,n)));case 1:case"end":return e.stop()}}),e)}))),ns.apply(this,arguments)}function rs(e,t){return is.apply(this,arguments)}function is(){return is=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wo(t,"POST","/v1/accounts:sendOobCode",Bo(t,n)));case 1:case"end":return e.stop()}}),e)}))),is.apply(this,arguments)}function as(e,t){return os.apply(this,arguments)}function os(){return os=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rs(t,n));case 1:case"end":return e.stop()}}),e)}))),os.apply(this,arguments)}function us(e,t){return ss.apply(this,arguments)}function ss(){return ss=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rs(t,n));case 1:case"end":return e.stop()}}),e)}))),ss.apply(this,arguments)}function cs(e,t){return ls.apply(this,arguments)}function ls(){return ls=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rs(t,n));case 1:case"end":return e.stop()}}),e)}))),ls.apply(this,arguments)}function fs(e,t){return hs.apply(this,arguments)}function hs(){return hs=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rs(t,n));case 1:case"end":return e.stop()}}),e)}))),hs.apply(this,arguments)}function ds(e,t){return ps.apply(this,arguments)}function ps(){return ps=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qo(t,"POST","/v1/accounts:signInWithEmailLink",Bo(t,n)));case 1:case"end":return e.stop()}}),e)}))),ps.apply(this,arguments)}function vs(e,t){return ms.apply(this,arguments)}function ms(){return ms=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qo(t,"POST","/v1/accounts:signInWithEmailLink",Bo(t,n)));case 1:case"end":return e.stop()}}),e)}))),ms.apply(this,arguments)}var ys=function(e){Pr(n,e);var t=Lr(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Sr(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return Er(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",ts(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",ds(t,{email:this._email,oobCode:this._password}));case 5:So(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Ju(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",vs(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:So(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Qu);function gs(e,t){return ks.apply(this,arguments)}function ks(){return ks=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qo(t,"POST","/v1/accounts:signInWithIdp",Bo(t,n)));case 1:case"end":return e.stop()}}),e)}))),ks.apply(this,arguments)}var bs=function(e){Pr(n,e);var t=Lr(n);function n(){var e;return Sr(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return Er(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return gs(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,gs(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,gs(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=gi(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):So("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=ao(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Qu);function ws(e,t){return _s.apply(this,arguments)}function _s(){return _s=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wo(t,"POST","/v1/accounts:sendVerificationCode",Bo(t,n)));case 1:case"end":return e.stop()}}),e)}))),_s.apply(this,arguments)}function xs(){return xs=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qo(t,"POST","/v1/accounts:signInWithPhoneNumber",Bo(t,n)));case 1:case"end":return e.stop()}}),e)}))),xs.apply(this,arguments)}function Is(){return Is=ee(X().mark((function e(t,n){var r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qo(t,"POST","/v1/accounts:signInWithPhoneNumber",Bo(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Xo(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Is.apply(this,arguments)}var Ss=te({},"USER_NOT_FOUND","user-not-found");function Ts(){return Ts=ee(X().mark((function e(t,n){var r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Qo(t,"POST","/v1/accounts:signInWithPhoneNumber",Bo(t,r),Ss));case 2:case"end":return e.stop()}}),e)}))),Ts.apply(this,arguments)}var Es=function(e){Pr(n,e);var t=Lr(n);function n(e){var r;return Sr(this,n),(r=t.call(this,"phone","phone")).params=e,r}return Er(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return xs.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Is.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Ts.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Qu);var Cs=function(){function e(t){var n,r,i,a,o,u;Sr(this,e);var s=ki(bi(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Ao(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return Er(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=ki(bi(e)).link,n=t?ki(bi(t)).deep_link_id:null,r=ki(bi(e)).deep_link_id;return(r?ki(bi(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var Ns=function(){function e(){Sr(this,e),this.providerId=e.PROVIDER_ID}return Er(e,null,[{key:"credential",value:function(e,t){return ys._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Cs.parseLink(t);return Ao(n,"argument-error"),ys._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Ns.PROVIDER_ID="password",Ns.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ns.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var As=function(){function e(t){Sr(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return Er(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Ps=function(e){Pr(n,e);var t=Lr(n);function n(){var e;return Sr(this,n),(e=t.apply(this,arguments)).scopes=[],e}return Er(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Ri(this.scopes)}}]),n}(As),Rs=function(e){Pr(n,e);var t=Lr(n);function n(){return Sr(this,n),t.apply(this,arguments)}return Er(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Ao(e.idToken||e.accessToken,"argument-error"),bs._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Ao("providerId"in t&&"signInMethod"in t,"argument-error"),bs._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(SV){return null}}}]),n}(Ps),Os=function(e){Pr(n,e);var t=Lr(n);function n(){return Sr(this,n),t.call(this,"facebook.com")}return Er(n,null,[{key:"credential",value:function(e){return bs._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(Ps);Os.FACEBOOK_SIGN_IN_METHOD="facebook.com",Os.PROVIDER_ID="facebook.com";var Ds=function(e){Pr(n,e);var t=Lr(n);function n(){var e;return Sr(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return Er(n,null,[{key:"credential",value:function(e,t){return bs._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(Ps);Ds.GOOGLE_SIGN_IN_METHOD="google.com",Ds.PROVIDER_ID="google.com";var Ls=function(e){Pr(n,e);var t=Lr(n);function n(){return Sr(this,n),t.call(this,"github.com")}return Er(n,null,[{key:"credential",value:function(e){return bs._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(Ps);Ls.GITHUB_SIGN_IN_METHOD="github.com",Ls.PROVIDER_ID="github.com";var Ms=function(e){Pr(n,e);var t=Lr(n);function n(e,r){var i;return Sr(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return Er(n,[{key:"_getIdTokenResponse",value:function(e){return gs(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,gs(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,gs(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Qu),Fs=function(e){Pr(n,e);var t=Lr(n);function n(e){return Sr(this,n),Ao(e.startsWith("saml."),"argument-error"),t.call(this,e)}return Er(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Ms.fromJSON(e);return Ao(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Ms._create(r,n)}catch(SV){return null}}}]),n}(As),Us=function(e){Pr(n,e);var t=Lr(n);function n(){return Sr(this,n),t.call(this,"twitter.com")}return Er(n,null,[{key:"credential",value:function(e,t){return bs._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(Ps);function Vs(e,t){return js.apply(this,arguments)}function js(){return js=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qo(t,"POST","/v1/accounts:signUp",Bo(t,n)));case 1:case"end":return e.stop()}}),e)}))),js.apply(this,arguments)}Us.TWITTER_SIGN_IN_METHOD="twitter.com",Us.PROVIDER_ID="twitter.com";var qs=function(){function e(t){Sr(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return Er(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=ee(X().mark((function t(n,r,i){var a,o,u,s,c=arguments;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,xu._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=zs(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=ee(X().mark((function t(n,r,i){var a;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=zs(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function zs(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Bs(){return Bs=ee(X().mark((function e(t){var n,r,i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bu(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new qs({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Vs(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,qs._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Bs.apply(this,arguments)}var Ws=function(e){Pr(n,e);var t=Lr(n);function n(e,r,i,a){var o,u;return Sr(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(Nr(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return Er(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(ai);function Hs(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ws._fromErrorAndOperation(e,n,t,r);throw n}))}function Ks(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Gs(e,t){return Qs.apply(this,arguments)}function Qs(){return Qs=ee(X().mark((function e(t,n){var r,i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ai(t),e.next=3,Js(!0,r,n);case 3:return e.t0=tu,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Ks(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Qs.apply(this,arguments)}function Ys(e,t){return $s.apply(this,arguments)}function $s(){return $s=ee(X().mark((function e(t,n){var r,i,a=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=cu,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",qs._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),$s.apply(this,arguments)}function Js(e,t,n){return Xs.apply(this,arguments)}function Xs(){return(Xs=ee(X().mark((function e(t,n,r){var i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pu(n);case 2:i=Ks(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Ao(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zs(e,t){return ec.apply(this,arguments)}function ec(){return ec=ee(X().mark((function e(t,n){var r,i,a,o,u,s,c,l=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],a=t.auth,o="reauthenticate",e.prev=3,e.next=6,cu(t,Hs(a,o,n,t),r);case 6:return Ao((u=e.sent).idToken,a,"internal-error"),Ao(s=su(u.idToken),a,"internal-error"),c=s.sub,Ao(t.uid===c,a,"user-mismatch"),e.abrupt("return",qs._forOperation(t,o,u));case 15:throw e.prev=15,e.t0=e.catch(3),(null===(i=e.t0)||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&So(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),ec.apply(this,arguments)}function tc(e,t){return nc.apply(this,arguments)}function nc(){return nc=ee(X().mark((function e(t,n){var r,i,a,o,u=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,Hs(t,i,n);case 4:return a=e.sent,e.next=7,qs._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),nc.apply(this,arguments)}function rc(e,t){return ic.apply(this,arguments)}function ic(){return ic=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tc(Bu(t),n));case 1:case"end":return e.stop()}}),e)}))),ic.apply(this,arguments)}function ac(e,t){return oc.apply(this,arguments)}function oc(){return(oc=ee(X().mark((function e(t,n){var r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ai(t),e.next=3,Js(!1,r,n.providerId);case 3:return e.abrupt("return",Ys(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uc(e,t){return sc.apply(this,arguments)}function sc(){return(sc=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zs(Ai(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cc(e,t){return lc.apply(this,arguments)}function lc(){return lc=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qo(t,"POST","/v1/accounts:signInWithCustomToken",Bo(t,n)));case 1:case"end":return e.stop()}}),e)}))),lc.apply(this,arguments)}function fc(){return fc=ee(X().mark((function e(t,n){var r,i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bu(t),e.next=3,cc(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,qs._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),fc.apply(this,arguments)}var hc=function(){function e(t,n){Sr(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return Er(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?dc._fromServerResponse(e,t):So(e,"internal-error")}}]),e}(),dc=function(e){Pr(n,e);var t=Lr(n);function n(e){var r;return Sr(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return Er(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(hc);function pc(e,t,n){var r;Ao((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Ao("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Ao(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Ao(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function vc(){return vc=ee(X().mark((function e(t,n,r){var i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ai(t),a={requestType:"PASSWORD_RESET",email:n},r&&pc(i,a,r),e.next=5,us(i,a);case 5:case"end":return e.stop()}}),e)}))),vc.apply(this,arguments)}function mc(){return mc=ee(X().mark((function e(t,n,r){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yu(Ai(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),mc.apply(this,arguments)}function yc(){return yc=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zu(Ai(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),yc.apply(this,arguments)}function gc(e,t){return kc.apply(this,arguments)}function kc(){return kc=ee(X().mark((function e(t,n){var r,i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ai(t),e.next=3,Yu(r,{oobCode:n});case 3:i=e.sent,Ao(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Ao(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Ao(i.mfaInfo,r,"internal-error");case 13:Ao(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=hc._fromServerResponse(Bu(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),kc.apply(this,arguments)}function bc(){return bc=ee(X().mark((function e(t,n){var r,i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gc(Ai(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),bc.apply(this,arguments)}function wc(e,t,n){return _c.apply(this,arguments)}function _c(){return _c=ee(X().mark((function e(t,n,r){var i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Bu(t),e.next=3,Vs(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,qs._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),_c.apply(this,arguments)}function xc(){return xc=ee(X().mark((function e(t,n,r){var i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ai(t),a={requestType:"EMAIL_SIGNIN",email:n},Ao(r.handleCodeInApp,i,"argument-error"),r&&pc(i,a,r),e.next=6,cs(i,a);case 6:case"end":return e.stop()}}),e)}))),xc.apply(this,arguments)}function Ic(){return Ic=ee(X().mark((function e(t,n,r){var i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ai(t),Ao((a=Ns.credentialWithLink(n,r||Lo()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",rc(i,a));case 4:case"end":return e.stop()}}),e)}))),Ic.apply(this,arguments)}function Sc(e,t){return Tc.apply(this,arguments)}function Tc(){return Tc=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wo(t,"POST","/v1/accounts:createAuthUri",Bo(t,n)));case 1:case"end":return e.stop()}}),e)}))),Tc.apply(this,arguments)}function Ec(){return Ec=ee(X().mark((function e(t,n){var r,i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Mo()?Lo():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Sc(Ai(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),Ec.apply(this,arguments)}function Cc(){return(Cc=ee(X().mark((function e(t,n){var r,i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ai(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&pc(r.auth,a,n),e.next=8,as(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nc(){return(Nc=ee(X().mark((function e(t,n,r){var i,a,o,u;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ai(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&pc(i.auth,o,r),e.next=8,fs(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ac(e,t){return Pc.apply(this,arguments)}function Pc(){return Pc=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wo(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Pc.apply(this,arguments)}function Rc(){return(Rc=ee(X().mark((function e(t,n){var r,i,a,o,u,s,c;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Ai(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,cu(a,Ac(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oc(e,t,n){return Dc.apply(this,arguments)}function Dc(){return Dc=ee(X().mark((function e(t,n,r){var i,a,o,u;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,cu(t,Ju(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),Dc.apply(this,arguments)}var Lc=Er((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Sr(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Mc=function(e){Pr(n,e);var t=Lr(n);function n(e,r,i,a){var o;return Sr(this,n),(o=t.call(this,e,r,i)).username=a,o}return Er(n)}(Lc),Fc=function(e){Pr(n,e);var t=Lr(n);function n(e,r){return Sr(this,n),t.call(this,e,"facebook.com",r)}return Er(n)}(Lc),Uc=function(e){Pr(n,e);var t=Lr(n);function n(e,r){return Sr(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return Er(n)}(Mc),Vc=function(e){Pr(n,e);var t=Lr(n);function n(e,r){return Sr(this,n),t.call(this,e,"google.com",r)}return Er(n)}(Lc),jc=function(e){Pr(n,e);var t=Lr(n);function n(e,r,i){return Sr(this,n),t.call(this,e,"twitter.com",r,i)}return Er(n)}(Mc);function qc(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=su(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Lc(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Fc(a,i);case"github.com":return new Uc(a,i);case"google.com":return new Vc(a,i);case"twitter.com":return new jc(a,i,e.screenName||null);case"custom":case"anonymous":return new Lc(a,null);default:return new Lc(a,r,i)}}(n)}var zc=function(){function e(t,n){Sr(this,e),this.type=t,this.credential=n}return Er(e,[{key:"toJSON",value:function(){return{multiFactorSession:te({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Bc=function(){function e(t,n,r){Sr(this,e),this.session=t,this.hints=n,this.signInResolver=r}return Er(e,[{key:"resolveSignIn",value:function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Bu(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return hc._fromServerResponse(r,e)}));Ao(i.mfaPendingCredential,r,"internal-error");var o=zc._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=ee(X().mark((function e(t){var a,u,s;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,qs._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Ao(n.user,r,"internal-error"),e.abrupt("return",qs._forOperation(n.user,n.operationType,u));case 17:So(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Wc(e,t){return Wo(e,"POST","/v2/accounts/mfaEnrollment:start",Bo(e,t))}function Hc(e,t){return Wo(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Bo(e,t))}var Kc=function(){function e(t){var n=this;Sr(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return hc._fromServerResponse(t.auth,e)})))}))}return Er(e,[{key:"getSession",value:function(){var e=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=zc,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=ee(X().mark((function e(t,n){var r,i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,cu(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=ee(X().mark((function e(t){var n,r,i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return i=e.sent,e.next=6,cu(this.user,Hc(this.user.auth,{idToken:i,mfaEnrollmentId:r}));case 6:return a=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==r})),e.next=10,this.user._updateTokensIfNecessary(a);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Gc=new WeakMap;var Qc="__sak",Yc=function(){function e(t,n){Sr(this,e),this.storageRetriever=t,this.type=n}return Er(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Qc,"1"),this.storage.removeItem(Qc),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var $c=function(e){Pr(n,e);var t=Lr(n);function n(){var e;return Sr(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Jr();return Au(e)||Mu(e)}()&&function(){try{return!(!window||window===window.top)}catch(SV){return!1}}(),e.fallbackToPolling=Vu(),e._shouldAllowMigration=!0,e}return Er(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Uu()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=ee(X().mark((function e(t,r){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,io(Rr(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ee(X().mark((function e(t){var r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,io(Rr(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,io(Rr(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Yc);$c.type="LOCAL";var Jc=$c,Xc=function(e){Pr(n,e);var t=Lr(n);function n(){return Sr(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return Er(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Yc);Xc.type="SESSION";var Zc=Xc;function el(e){return Promise.all(e.map(function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var tl=function(){function e(t){Sr(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return Er(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=ee(X().mark((function e(t){var n,r,i,a,o,u,s,c;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,el(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function nl(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}tl.receivers=[];var rl=function(){function e(t){Sr(this,e),this.target=t,this.handlers=new Set}return Er(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=ee(X().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=nl("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function il(){return window}function al(){return"undefined"!==typeof il().WorkerGlobalScope&&"function"===typeof il().importScripts}function ol(){return ul.apply(this,arguments)}function ul(){return(ul=ee(X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function sl(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var cl="firebaseLocalStorageDb",ll="firebaseLocalStorage",fl="fbase_key",hl=function(){function e(t){Sr(this,e),this.request=t}return Er(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function dl(e,t){return e.transaction([ll],t?"readwrite":"readonly").objectStore(ll)}function pl(){var e=indexedDB.deleteDatabase(cl);return new hl(e).toPromise()}function vl(){var e=indexedDB.open(cl,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(ll,{keyPath:fl})}catch(SV){n(SV)}})),e.addEventListener("success",ee(X().mark((function n(){var r;return X().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(ll)){n.next=12;break}return r.close(),n.next=5,pl();case 5:return n.t0=t,n.next=8,vl();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function ml(e,t,n){return yl.apply(this,arguments)}function yl(){return yl=ee(X().mark((function e(t,n,r){var i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=dl(t,!0).put((te(i={},fl,n),te(i,"value",r),i)),e.abrupt("return",new hl(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),yl.apply(this,arguments)}function gl(e,t){return kl.apply(this,arguments)}function kl(){return kl=ee(X().mark((function e(t,n){var r,i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=dl(t,!1).get(n),e.next=3,new hl(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),kl.apply(this,arguments)}function bl(e,t){var n=dl(e,!0).delete(t);return new hl(n).toPromise()}var wl=function(){function e(){Sr(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return Er(e,[{key:"_openDb",value:function(){var e=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,vl();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=ee(X().mark((function e(t){var n,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",al()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=ee(X().mark((function e(){var t=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=tl._getInstance(al()?self:null),this.receiver._subscribe("keyChanged",function(){var e=ee(X().mark((function e(n,r){var i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=ee(X().mark((function e(){var t,n,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ol();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new rl(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&sl()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=ee(X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,vl();case 5:return t=e.sent,e.next=8,ml(t,Qc,"1");case 8:return e.next=10,bl(t,Qc);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ee(X().mark((function e(t,n){var r=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return ml(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return gl(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ee(X().mark((function e(t){var n=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return bl(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=ee(X().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=dl(e,!1).getAll();return new hl(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Cr(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(ee(X().mark((function t(){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();wl.type="LOCAL";var _l=wl;function xl(e,t){return Wo(e,"POST","/v2/accounts/mfaSignIn:start",Bo(e,t))}function Il(e){return Sl.apply(this,arguments)}function Sl(){return Sl=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wo(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),Sl.apply(this,arguments)}function Tl(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=To("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function El(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Cl=1e12,Nl=function(){function e(t){Sr(this,e),this.auth=t,this.counter=Cl,this._widgets=new Map}return Er(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Al(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Cl;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Cl;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=ee(X().mark((function e(t){var n,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Cl,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Al=function(){function e(t,n,r){var i=this;Sr(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Ao(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return Er(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(SV){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(SV){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Pl=El("rcb"),Rl=new Uo(3e4,6e4),Ol="https://www.google.com/recaptcha/api.js?",Dl=function(){function e(){var t;Sr(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=il().grecaptcha)||void 0===t?void 0:t.render)}return Er(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Ao(Ll(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(il().grecaptcha):new Promise((function(r,i){var a=il().setTimeout((function(){i(To(e,"network-request-failed"))}),Rl.get());il()[Pl]=function(){il().clearTimeout(a),delete il()[Pl];var o=il().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(To(e,"internal-error"))},Tl("".concat(Ol,"?").concat(gi({onload:Pl,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(To(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=il().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function Ll(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var Ml=function(){function e(){Sr(this,e)}return Er(e,[{key:"load",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Nl(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Fl="recaptcha",Ul={theme:"light",type:"image"},Vl=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Ul),r=arguments.length>2?arguments[2]:void 0;Sr(this,e),this.parameters=n,this.type=Fl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Bu(r),this.isInvisible="invisible"===this.parameters.size,Ao("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Ao(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ml:new Dl,this.validateStartingState()}return Er(e,[{key:"verify",value:function(){var e=ee(X().mark((function e(){var t,n,r,i=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(SV){return Promise.reject(SV)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Ao(!this.parameters.sitekey,this.auth,"argument-error"),Ao(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ao("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=il()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Ao(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=ee(X().mark((function e(){var t,n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=ee(X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ao(Mo()&&!al(),this.auth,"internal-error"),e.next=3,jl();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Il(this.auth);case 8:Ao(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Ao(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function jl(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var ql=function(){function e(t,n){Sr(this,e),this.verificationId=t,this.onConfirmation=n}return Er(e,[{key:"confirm",value:function(e){var t=Es._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function zl(){return zl=ee(X().mark((function e(t,n,r){var i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Bu(t),e.next=3,Kl(i,n,Ai(r));case 3:return a=e.sent,e.abrupt("return",new ql(a,(function(e){return rc(i,e)})));case 5:case"end":return e.stop()}}),e)}))),zl.apply(this,arguments)}function Bl(e,t,n){return Wl.apply(this,arguments)}function Wl(){return(Wl=ee(X().mark((function e(t,n,r){var i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ai(t),e.next=3,Js(!1,i,"phone");case 3:return e.next=5,Kl(i.auth,n,Ai(r));case 5:return a=e.sent,e.abrupt("return",new ql(a,(function(e){return ac(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hl(){return(Hl=ee(X().mark((function e(t,n,r){var i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ai(t),e.next=3,Kl(i.auth,n,Ai(r));case 3:return a=e.sent,e.abrupt("return",new ql(a,(function(e){return uc(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kl(e,t,n){return Gl.apply(this,arguments)}function Gl(){return Gl=ee(X().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Ao("string"===typeof a,t,"argument-error"),Ao(r.type===Fl,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Ao("enroll"===u.type,t,"internal-error"),e.next=13,Wc(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Ao("signin"===u.type,t,"internal-error"),Ao(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,xl(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,ws(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Gl.apply(this,arguments)}function Ql(){return(Ql=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ys(Ai(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Yl=function(){function e(t){Sr(this,e),this.providerId=e.PROVIDER_ID,this.auth=Bu(t)}return Er(e,[{key:"verifyPhoneNumber",value:function(e,t){return Kl(this.auth,e,Ai(t))}}],[{key:"credential",value:function(e,t){return Es._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Es._fromTokenResponse(n,r):null}}]),e}();function $l(e,t){return t?Do(t):(Ao(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Yl.PROVIDER_ID="phone",Yl.PHONE_SIGN_IN_METHOD="phone";var Jl=function(e){Pr(n,e);var t=Lr(n);function n(e){var r;return Sr(this,n),(r=t.call(this,"custom","custom")).params=e,r}return Er(n,[{key:"_getIdTokenResponse",value:function(e){return gs(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return gs(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return gs(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Qu);function Xl(e){return tc(e.auth,new Jl(e),e.bypassAuthState)}function Zl(e){var t=e.auth,n=e.user;return Ao(n,t,"internal-error"),Zs(n,new Jl(e),e.bypassAuthState)}function ef(e){return tf.apply(this,arguments)}function tf(){return tf=ee(X().mark((function e(t){var n,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Ao(r=t.user,n,"internal-error"),e.abrupt("return",Ys(r,new Jl(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),tf.apply(this,arguments)}var nf=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Sr(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return Er(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=ee(X().mark((function t(n,r){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=ee(X().mark((function e(t){var n,r,i,a,o,u,s;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Xl;case"linkViaPopup":case"linkViaRedirect":return ef;case"reauthViaPopup":case"reauthViaRedirect":return Zl;default:So(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Ro(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Ro(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),rf=new Uo(2e3,1e4);function af(e,t,n){return of.apply(this,arguments)}function of(){return of=ee(X().mark((function e(t,n,r){var i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Bu(t),Co(t,n,As),a=$l(i,r),o=new lf(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),of.apply(this,arguments)}function uf(){return(uf=ee(X().mark((function e(t,n,r){var i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Co((i=Ai(t)).auth,n,As),a=$l(i.auth,r),o=new lf(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sf(e,t,n){return cf.apply(this,arguments)}function cf(){return(cf=ee(X().mark((function e(t,n,r){var i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Co((i=Ai(t)).auth,n,As),a=$l(i.auth,r),o=new lf(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var lf=function(e){Pr(n,e);var t=Lr(n);function n(e,r,i,a,o){var u;return Sr(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=Nr(u),u}return Er(n,[{key:"executeNotNull",value:function(){var e=ee(X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Ao(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ee(X().mark((function e(){var t,n=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ro(1===this.filter.length,"Popup operations only handle one event"),t=nl(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(To(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(To(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(To(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,rf.get())}()}}]),n}(nf);lf.currentPopupAction=null;var ff=new Map,hf=function(e){Pr(n,e);var t=Lr(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Sr(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return Er(n,[{key:"execute",value:function(){var e=ee(X().mark((function e(){var t,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=ff.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,df(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,io(Rr(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:ff.set(this.auth._key(),t);case 21:return this.bypassAuthState||ff.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=ee(X().mark((function e(t){var r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",io(Rr(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",io(Rr(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(nf);function df(e,t){return pf.apply(this,arguments)}function pf(){return pf=ee(X().mark((function e(t,n){var r,i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=kf(n),i=gf(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),pf.apply(this,arguments)}function vf(e,t){return mf.apply(this,arguments)}function mf(){return mf=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gf(t)._set(kf(n),"true"));case 1:case"end":return e.stop()}}),e)}))),mf.apply(this,arguments)}function yf(e,t){ff.set(e._key(),t)}function gf(e){return Do(e._redirectPersistence)}function kf(e){return Tu("pendingRedirect",e.config.apiKey,e.name)}function bf(e,t,n){return function(e,t,n){return wf.apply(this,arguments)}(e,t,n)}function wf(){return wf=ee(X().mark((function e(t,n,r){var i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Bu(t),Co(t,n,As),a=$l(i,r),e.next=5,vf(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),wf.apply(this,arguments)}function _f(e,t,n){return function(e,t,n){return xf.apply(this,arguments)}(e,t,n)}function xf(){return(xf=ee(X().mark((function e(t,n,r){var i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Co((i=Ai(t)).auth,n,As),a=$l(i.auth,r),e.next=5,vf(a,i.auth);case 5:return e.next=7,Af(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function If(e,t,n){return function(e,t,n){return Sf.apply(this,arguments)}(e,t,n)}function Sf(){return(Sf=ee(X().mark((function e(t,n,r){var i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Co((i=Ai(t)).auth,n,As),a=$l(i.auth,r),e.next=5,Js(!1,i,n.providerId);case 5:return e.next=7,vf(a,i.auth);case 7:return e.next=9,Af(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tf(e,t){return Ef.apply(this,arguments)}function Ef(){return Ef=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bu(t)._initializationPromise;case 2:return e.abrupt("return",Cf(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),Ef.apply(this,arguments)}function Cf(e,t){return Nf.apply(this,arguments)}function Nf(){return Nf=ee(X().mark((function e(t,n){var r,i,a,o,u,s=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Bu(t),a=$l(i,n),o=new hf(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Nf.apply(this,arguments)}function Af(e){return Pf.apply(this,arguments)}function Pf(){return(Pf=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=nl("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Rf=function(){function e(t){Sr(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return Er(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Df(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Df(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(To(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Of(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Of(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Of(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Df(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Lf(e){return Mf.apply(this,arguments)}function Mf(){return Mf=ee(X().mark((function e(t){var n,r=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Wo(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Mf.apply(this,arguments)}var Ff=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Uf=/^https?/;function Vf(){return Vf=ee(X().mark((function e(t){var n,r,i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Lf(t);case 4:n=e.sent,r=n.authorizedDomains,i=Cr(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!jf(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:So(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),Vf.apply(this,arguments)}function jf(e){var t=Lo(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Uf.test(r))return!1;if(Ff.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var qf=new Uo(3e4,6e4);function zf(){var e=il().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Ri(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Bf=null;function Wf(e){return Bf=Bf||function(e){return new Promise((function(t,n){var r,i,a;function o(){zf(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){zf(),n(To(e,"network-request-failed"))},timeout:qf.get()})}if(null===(i=null===(r=il().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=il().gapi)||void 0===a?void 0:a.load)){var u=El("iframefcb");return il()[u]=function(){gapi.load?o():n(To(e,"network-request-failed"))},Tl("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Bf=null,e}))}(e),Bf}var Hf=new Uo(5e3,15e3),Kf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Gf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qf(e){var t=e.config;Ao(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Vo(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Ta},i=Gf.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(gi(r).slice(1))}function Yf(e){return $f.apply(this,arguments)}function $f(){return $f=ee(X().mark((function e(t){var n,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wf(t);case 2:return n=e.sent,Ao(r=il().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Qf(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Kf,dontclear:!0},(function(e){return new Promise(function(){var n=ee(X().mark((function n(r,i){var a,o,u;return X().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){il().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=To(t,"network-request-failed"),o=il().setTimeout((function(){i(a)}),Hf.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),$f.apply(this,arguments)}var Jf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Xf="_blank",Zf="http://localhost",eh=function(){function e(t){Sr(this,e),this.window=t,this.associatedEvent=null}return Er(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(SV){}}}]),e}();function th(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},Jf),{width:r.toString(),height:i.toString(),top:a,left:o}),l=Jr().toLowerCase();n&&(u=Pu(l)?Xf:n),Nu(l)&&(t=t||Zf,s.scrollbars="yes");var f=Object.entries(s).reduce((function(e,t){var n=c(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Fu(l)&&"_self"!==u)return nh(t||"",u),new eh(null);var h=window.open(t||"",u,f);Ao(h,e,"popup-blocked");try{h.focus()}catch(SV){}return new eh(h)}function nh(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var rh="__/auth/handler",ih="emulator/auth/handler";function ah(e,t,n,r,i,a){Ao(e.config.authDomain,e,"auth-domain-config-required"),Ao(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Ta,eventId:i};if(t instanceof As){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",pi(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var l=c(s[u],2),f=l[0],h=l[1];o[f]=h}}if(t instanceof Ps){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,m=Object.keys(p);v<m.length;v++){var y=m[v];void 0===p[y]&&delete p[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(rh);return Vo(t,ih)}(e),"?").concat(gi(p).slice(1))}var oh="webStorageSupport",uh=function(){function e(){Sr(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zc,this._completeRedirectFn=Cf,this._overrideRedirectResult=yf}return Er(e,[{key:"_openPopup",value:function(){var e=ee(X().mark((function e(t,n,r,i){var a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ro(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=ah(t,n,r,Lo(),i),e.abrupt("return",th(t,o,nl()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=ee(X().mark((function e(t,n,r,i){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=ah(t,n,r,Lo(),i),il().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Ro(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=ee(X().mark((function e(t){var n,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yf(t);case 2:return n=e.sent,r=new Rf(t),n.register("authEvent",(function(e){return Ao(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(oh,{type:oh},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),So(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Vf.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Vu()||Au()||Mu()}}]),e}(),sh=uh,ch=function(){function e(t){Sr(this,e),this.factorId=t}return Er(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Po("unexpected MultiFactorSessionType")}}}]),e}(),lh=function(e){Pr(n,e);var t=Lr(n);function n(e){var r;return Sr(this,n),(r=t.call(this,"phone")).credential=e,r}return Er(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Wo(e,"POST","/v2/accounts/mfaEnrollment:finalize",Bo(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Wo(e,"POST","/v2/accounts/mfaSignIn:finalize",Bo(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(ch),fh=function(){function e(){Sr(this,e)}return Er(e,null,[{key:"assertion",value:function(e){return lh._fromCredential(e)}}]),e}();fh.FACTOR_ID="phone";var hh,dh="@firebase/auth",ph="0.20.5",vh=function(){function e(t){Sr(this,e),this.auth=t,this.internalListeners=new Map}return Er(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Ao(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function mh(){return window}hh="Browser",ka(new Oi("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){Ao(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Ao(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:hh,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ju(hh)},i=new zu(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Do);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),ka(new Oi("auth-internal",(function(e){return function(e){return new vh(e)}(Bu(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Ra(dh,ph,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(hh)),Ra(dh,ph,"esm2017");function yh(e,t,n){return gh.apply(this,arguments)}function gh(){return gh=ee(X().mark((function e(t,n,r){var i,a,o,u,s;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=mh(),o=a.BuildInfo,Ro(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Ih(n.sessionId);case 4:return u=e.sent,s={},Mu()?s.ibi=o.packageName:Ou()?s.apn=o.packageName:So(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",ah(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),gh.apply(this,arguments)}function kh(){return kh=ee(X().mark((function e(t){var n,r,i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=mh(),r=n.BuildInfo,i={},Mu()?i.iosBundleId=r.packageName:Ou()?i.androidPackageName=r.packageName:So(t,"operation-not-supported-in-this-environment"),e.next=5,Lf(t,i);case 5:case"end":return e.stop()}}),e)}))),kh.apply(this,arguments)}function bh(e){var t=mh().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jr();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function wh(e,t,n){return _h.apply(this,arguments)}function _h(){return _h=ee(X().mark((function e(t,n,r){var i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=mh(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(To(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Ou()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),_h.apply(this,arguments)}function xh(e){var t,n,r,i,a,o,u,s,c,l,f=mh();Ao("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ao("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ao("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ao("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ao("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Ih(e){return Sh.apply(this,arguments)}function Sh(){return(Sh=ee(X().mark((function e(t){var n,r,i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Th(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Th(e){if(Ro(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Eh=function(e){Pr(n,e);var t=Lr(n);function n(){var e;return Sr(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return Er(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),io(Rr(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Rf);function Ch(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:Oh(),postBody:null,tenantId:e.tenantId,error:To(e,"no-auth-event")}}function Nh(e,t){return Dh()._set(Lh(e),t)}function Ah(e){return Ph.apply(this,arguments)}function Ph(){return Ph=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dh()._get(Lh(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Dh()._remove(Lh(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),Ph.apply(this,arguments)}function Rh(e,t){var n,r,i=function(e){var t=Mh(e),n=t.link?decodeURIComponent(t.link):void 0,r=Mh(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Mh(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Mh(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(SV){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?To(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Oh(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Dh(){return Do(Jc)}function Lh(e){return Tu("authEvent",e.config.apiKey,e.name)}function Mh(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=a(t=n)||Pi(t)||u(t)||s();r[0];return ki(r.slice(1).join("?"))}var Fh=function(){function e(){Sr(this,e),this._redirectPersistence=Zc,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Cf,this._overrideRedirectResult=yf}return Er(e,[{key:"_initialize",value:function(){var e=ee(X().mark((function e(t){var n,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Eh(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){So(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=ee(X().mark((function e(t,n,r,i){var a,o,u,s;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xh(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),ff.clear(),e.next=10,this._originValidation(t);case 10:return o=Ch(t,r,i),e.next=13,Nh(t,o);case 13:return e.next=15,yh(t,o,n);case 15:return u=e.sent,e.next=18,bh(u);case 18:return s=e.sent,e.abrupt("return",wh(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return kh.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=mh(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(ee(X().mark((function n(){return X().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Ah(e);case 2:t.onEvent(Vh());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=ee(X().mark((function n(r){var i,a;return X().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Ah(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Rh(i,r.url)),t.onEvent(a||Vh());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");mh().handleOpenURL=function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(SV){console.error(SV)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Uh=Fh;function Vh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:To("no-auth-event")}}function jh(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function qh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jr();return!("file:"!==jh()&&"ionic:"!==jh()&&"capacitor:"!==jh()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function zh(){return ni()&&11===(null===document||void 0===document?void 0:document.documentMode)}function Bh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jr();return/Edge\/\d+/.test(e)}function Wh(){try{var e=self.localStorage,t=nl();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jr();return zh()||Bh(e)}()||ii()}catch(SV){return Hh()&&ii()}return!1}function Hh(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Kh(){return("http:"===jh()||"https:"===jh()||ei()||qh())&&!(ti()||Zr())&&Wh()&&!Hh()}function Gh(){return qh()&&"undefined"!==typeof document}function Qh(){return Yh.apply(this,arguments)}function Yh(){return(Yh=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Gh()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $h={LOCAL:"local",NONE:"none",SESSION:"session"},Jh=Ao,Xh="persistence";function Zh(e,t){Jh(Object.values($h).includes(t),e,"invalid-persistence-type"),ti()?Jh(t!==$h.SESSION,e,"unsupported-persistence-type"):Zr()?Jh(t===$h.NONE,e,"unsupported-persistence-type"):Hh()?Jh(t===$h.NONE||t===$h.LOCAL&&ii(),e,"unsupported-persistence-type"):Jh(t===$h.NONE||Wh(),e,"unsupported-persistence-type")}function ed(e){return td.apply(this,arguments)}function td(){return td=ee(X().mark((function e(t){var n,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=nd(),r=Tu(Xh,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),td.apply(this,arguments)}function nd(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(SV){return null}}var rd=Ao,id=function(){function e(){Sr(this,e),this.browserResolver=Do(sh),this.cordovaResolver=Do(Uh),this.underlyingResolver=null,this._redirectPersistence=Zc,this._completeRedirectFn=Cf,this._overrideRedirectResult=yf}return Er(e,[{key:"_initialize",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=ee(X().mark((function e(t,n,r,i){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=ee(X().mark((function e(t,n,r,i){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Gh()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return rd(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=ee(X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Qh();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ad(e){return e.unwrap()}function od(e,t){var n,r,i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===(r=t)||void 0===r?void 0:r.code))t.resolver=new fd(e,function(e,t){var n,r=Ai(e),i=t;return Ao(t.customData.operationType,r,"argument-error"),Ao(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Bc._fromError(r,i)}(e,t));else if(i){var a=ud(t),o=t;a&&(o.credential=a,o.tenantId=i.tenantId||void 0,o.email=i.email||void 0,o.phoneNumber=i.phoneNumber||void 0)}}function ud(e){var t=(e instanceof ai?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof ai)&&"temporaryProof"in t&&"phoneNumber"in t)return Yl.credentialFromResult(e);var n,r=t.providerId;if(!r||r===lo)return null;switch(r){case co:n=Ds;break;case uo:n=Os;break;case so:n=Ls;break;case fo:n=Us;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Ms._create(r,u):bs._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Rs(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof ai?n.credentialFromError(e):n.credentialFromResult(e)}function sd(e,t){return t.catch((function(t){throw t instanceof ai&&od(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,ud(t)),additionalUserInfo:qc(e),user:hd.getOrCreate(r)}}))}function cd(e,t){return ld.apply(this,arguments)}function ld(){return ld=ee(X().mark((function e(t,n){var r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return sd(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),ld.apply(this,arguments)}var fd=function(){function e(t,n){Sr(this,e),this.resolver=n,this.auth=t.wrapped()}return Er(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return sd(ad(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),hd=function(){function e(t){Sr(this,e),this._delegate=t,this.multiFactor=function(e){var t=Ai(e);return Gc.has(t)||Gc.set(t,Kc._fromUser(t)),Gc.get(t)}(t)}return Er(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sd(this.auth,ac(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cd(this.auth,Bl(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sd(this.auth,sf(this._delegate,t,id)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ed(Bu(this.auth));case 2:return e.abrupt("return",If(this._delegate,t,id));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sd(this.auth,uc(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return cd(this.auth,function(e,t,n){return Hl.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return sd(this.auth,function(e,t,n){return uf.apply(this,arguments)}(this._delegate,e,id))}},{key:"reauthenticateWithRedirect",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ed(Bu(this.auth));case 2:return e.abrupt("return",_f(this._delegate,t,id));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Cc.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gs(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Oc(Ai(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Oc(Ai(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Ql.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Rc.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Nc.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();hd.USER_MAP=new WeakMap;var dd=Ao,pd=function(){function e(t,n){if(Sr(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;dd(r,"invalid-api-key",{appName:t.name}),dd(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?id:void 0;this._delegate=n.initialize({options:{persistence:md(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(bo),this.linkUnderlyingAuth()}return Er(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?hd.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Hu(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return yc.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return gc(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return mc.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sd(this._delegate,wc(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Ec.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Cs.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=ee(X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dd(Kh(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Tf(this._delegate,id);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",sd(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Bu(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=vd(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=vd(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return xc.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return vc.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=ee(X().mark((function e(t){var n,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Zh(this._delegate,t),e.t0=t,e.next=e.t0===$h.SESSION?4:e.t0===$h.LOCAL?6:e.t0===$h.NONE?11:13;break;case 4:return n=Zc,e.abrupt("break",14);case 6:return e.next=8,Do(_l)._isAvailable();case 8:return r=e.sent,n=r?_l:Jc,e.abrupt("break",14);case 11:return n=Su,e.abrupt("break",14);case 13:return e.abrupt("return",So("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return sd(this._delegate,function(e){return Bs.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return sd(this._delegate,rc(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return sd(this._delegate,function(e,t){return fc.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return sd(this._delegate,function(e,t,n){return rc(Ai(e),Ns.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return sd(this._delegate,function(e,t,n){return Ic.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return cd(this._delegate,function(e,t,n){return zl.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dd(Kh(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",sd(this._delegate,af(this._delegate,t,id)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dd(Kh(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,ed(this._delegate);case 3:return e.abrupt("return",bf(this._delegate,t,id));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return bc.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function vd(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&hd.getOrCreate(e))},error:t,complete:n}}function md(e,t){var n=function(e,t){var n=nd();if(!n)return[];var r=Tu(Xh,e,t);switch(n.getItem(r)){case $h.NONE:return[Su];case $h.LOCAL:return[_l,Zc];case $h.SESSION:return[Zc];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(_l)||n.push(_l),"undefined"!==typeof window)for(var r=0,i=[Jc,Zc];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Su)||n.push(Su),n}pd.Persistence=$h;var yd=function(){function e(){Sr(this,e),this.providerId="phone",this._delegate=new Yl(ad(no.auth()))}return Er(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Yl.credential(e,t)}}]),e}();yd.PHONE_SIGN_IN_METHOD=Yl.PHONE_SIGN_IN_METHOD,yd.PROVIDER_ID=Yl.PROVIDER_ID;var gd,kd=Ao,bd=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:no.app();Sr(this,e),kd(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Vl(t,n,i.auth()),this.type=this._delegate.type}return Er(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(gd=no).INTERNAL.registerComponent(new Oi("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new pd(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ho,PASSWORD_RESET:po,RECOVER_EMAIL:vo,REVERT_SECOND_FACTOR_ADDITION:mo,VERIFY_AND_CHANGE_EMAIL:yo,VERIFY_EMAIL:go}},EmailAuthProvider:Ns,FacebookAuthProvider:Os,GithubAuthProvider:Ls,GoogleAuthProvider:Ds,OAuthProvider:Rs,SAMLAuthProvider:Fs,PhoneAuthProvider:yd,PhoneMultiFactorGenerator:fh,RecaptchaVerifier:bd,TwitterAuthProvider:Us,Auth:pd,AuthCredential:Qu,Error:ai}).setInstantiationMode("LAZY").setMultipleInstances(!1)),gd.registerVersion("@firebase/auth-compat","0.2.18");var wd,_d="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},xd={},Id=Id||{},Sd=_d||self;function Td(){}function Ed(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Cd(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Nd="closure_uid_"+(1e9*Math.random()>>>0),Ad=0;function Pd(e,t,n){return e.call.apply(e.bind,arguments)}function Rd(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Od(e,t,n){return(Od=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Pd:Rd).apply(null,arguments)}function Dd(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Ld(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Md(){this.s=this.s,this.o=this.o}var Fd={};Md.prototype.s=!1,Md.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Nd)&&e[Nd]||(e[Nd]=++Ad)}(this);delete Fd[e]}},Md.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Ud=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Vd=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function jd(e){return Array.prototype.concat.apply([],arguments)}function qd(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function zd(e){return/^[\s\xa0]*$/.test(e)}var Bd,Wd=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Hd(e,t){return-1!=e.indexOf(t)}function Kd(e,t){return e<t?-1:e>t?1:0}e:{var Gd=Sd.navigator;if(Gd){var Qd=Gd.userAgent;if(Qd){Bd=Qd;break e}}Bd=""}function Yd(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function $d(e){var t={};for(var n in e)t[n]=e[n];return t}var Jd="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xd(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Jd.length;a++)n=Jd[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Zd(e){return Zd[" "](e),e}Zd[" "]=Td;var ep,tp=Hd(Bd,"Opera"),np=Hd(Bd,"Trident")||Hd(Bd,"MSIE"),rp=Hd(Bd,"Edge"),ip=rp||np,ap=Hd(Bd,"Gecko")&&!(Hd(Bd.toLowerCase(),"webkit")&&!Hd(Bd,"Edge"))&&!(Hd(Bd,"Trident")||Hd(Bd,"MSIE"))&&!Hd(Bd,"Edge"),op=Hd(Bd.toLowerCase(),"webkit")&&!Hd(Bd,"Edge");function up(){var e=Sd.document;return e?e.documentMode:void 0}e:{var sp="",cp=function(){var e=Bd;return ap?/rv:([^\);]+)(\)|;)/.exec(e):rp?/Edge\/([\d\.]+)/.exec(e):np?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):op?/WebKit\/(\S+)/.exec(e):tp?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(cp&&(sp=cp?cp[1]:""),np){var lp=up();if(null!=lp&&lp>parseFloat(sp)){ep=String(lp);break e}}ep=sp}var fp,hp={};function dp(){return function(e){var t=hp;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Wd(String(ep)).split("."),n=Wd("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Kd(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Kd(0==a[2].length,0==o[2].length)||Kd(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Sd.document&&np){var pp=up();fp=pp||(parseInt(ep,10)||void 0)}else fp=void 0;var vp=fp,mp=function(){if(!Sd.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Sd.addEventListener("test",Td,t),Sd.removeEventListener("test",Td,t)}catch(n){}return e}();function yp(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function gp(e,t){if(yp.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(ap){e:{try{Zd(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:kp[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&gp.Z.h.call(this)}}yp.prototype.h=function(){this.defaultPrevented=!0},Ld(gp,yp);var kp={2:"touch",3:"pen",4:"mouse"};gp.prototype.h=function(){gp.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var bp="closure_listenable_"+(1e6*Math.random()|0),wp=0;function _p(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++wp,this.ca=this.fa=!1}function xp(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Ip(e){this.src=e,this.g={},this.h=0}function Sp(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Ud(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(xp(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Tp(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Ip.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Tp(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new _p(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Ep="closure_lm_"+(1e6*Math.random()|0),Cp={};function Np(e,t,n,r,i){if(r&&r.once)return Pp(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Np(e,t[a],n,r,i);return null}return n=Up(n),e&&e[bp]?e.N(t,n,Cd(r)?!!r.capture:!!r,i):Ap(e,t,n,!1,r,i)}function Ap(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Cd(i)?!!i.capture:!!i,u=Mp(e);if(u||(e[Ep]=u=new Ip(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Lp;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)mp||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Dp(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Pp(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Pp(e,t[a],n,r,i);return null}return n=Up(n),e&&e[bp]?e.O(t,n,Cd(r)?!!r.capture:!!r,i):Ap(e,t,n,!0,r,i)}function Rp(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Rp(e,t[a],n,r,i);else r=Cd(r)?!!r.capture:!!r,n=Up(n),e&&e[bp]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Tp(a=e.g[t],n,r,i))&&(xp(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Mp(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Tp(t,n,r,i)),(n=-1<e?t[e]:null)&&Op(n))}function Op(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[bp])Sp(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Dp(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Mp(t))?(Sp(n,e),0==n.h&&(n.src=null,t[Ep]=null)):xp(e)}}}function Dp(e){return e in Cp?Cp[e]:Cp[e]="on"+e}function Lp(e,t){if(e.ca)e=!0;else{t=new gp(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Op(e),e=n.call(r,t)}return e}function Mp(e){return(e=e[Ep])instanceof Ip?e:null}var Fp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Up(e){return"function"===typeof e?e:(e[Fp]||(e[Fp]=function(t){return e.handleEvent(t)}),e[Fp])}function Vp(){Md.call(this),this.i=new Ip(this),this.P=this,this.I=null}function jp(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new yp(t,e);else if(t instanceof yp)t.target=t.target||e;else{var i=t;Xd(t=new yp(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=qp(o,r,!0,t)&&i}if(i=qp(o=t.g=e,r,!0,t)&&i,i=qp(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=qp(o=t.g=n[a],r,!1,t)&&i}function qp(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&Sp(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Ld(Vp,Md),Vp.prototype[bp]=!0,Vp.prototype.removeEventListener=function(e,t,n,r){Rp(this,e,t,n,r)},Vp.prototype.M=function(){if(Vp.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)xp(n[r]);delete t.g[e],t.h--}}this.I=null},Vp.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Vp.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var zp=Sd.JSON.stringify;function Bp(){var e=Jp,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Wp,Hp=function(){function e(){Sr(this,e),this.h=this.g=null}return Er(e,[{key:"add",value:function(e,t){var n=Kp.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Kp=new(function(){function e(t,n){Sr(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Er(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Gp}),(function(e){return e.reset()})),Gp=function(){function e(){Sr(this,e),this.next=this.g=this.h=null}return Er(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Qp(e){Sd.setTimeout((function(){throw e}),0)}function Yp(e,t){Wp||function(){var e=Sd.Promise.resolve(void 0);Wp=function(){e.then(Xp)}}(),$p||(Wp(),$p=!0),Jp.add(e,t)}var $p=!1,Jp=new Hp;function Xp(){for(var e;e=Bp();){try{e.h.call(e.g)}catch(n){Qp(n)}var t=Kp;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}$p=!1}function Zp(e,t){Vp.call(this),this.h=e||1,this.g=t||Sd,this.j=Od(this.kb,this),this.l=Date.now()}function ev(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function tv(e,t,n){if("function"===typeof e)n&&(e=Od(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Od(e.handleEvent,e)}return 2147483647<Number(t)?-1:Sd.setTimeout(e,t||0)}function nv(e){e.g=tv((function(){e.g=null,e.i&&(e.i=!1,nv(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Ld(Zp,Vp),(wd=Zp.prototype).da=!1,wd.S=null,wd.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),jp(this,"tick"),this.da&&(ev(this),this.start()))}},wd.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},wd.M=function(){Zp.Z.M.call(this),ev(this),delete this.g};var rv=function(e){Pr(n,e);var t=Lr(n);function n(e,r){var i;return Sr(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return Er(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:nv(this)}},{key:"M",value:function(){io(Rr(n.prototype),"M",this).call(this),this.g&&(Sd.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Md);function iv(e){Md.call(this),this.h=e,this.g={}}Ld(iv,Md);var av=[];function ov(e,t,n,r){Array.isArray(n)||(n&&(av[0]=n.toString()),n=av);for(var i=0;i<n.length;i++){var a=Np(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function uv(e){Yd(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Op(e)}),e),e.g={}}function sv(){this.g=!0}function cv(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return zp(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}iv.prototype.M=function(){iv.Z.M.call(this),uv(this)},iv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},sv.prototype.Aa=function(){this.g=!1},sv.prototype.info=function(){};var lv={},fv=null;function hv(){return fv=fv||new Vp}function dv(e){yp.call(this,lv.Ma,e)}function pv(e){var t=hv();jp(t,new dv(t,e))}function vv(e,t){yp.call(this,lv.STAT_EVENT,e),this.stat=t}function mv(e){var t=hv();jp(t,new vv(t,e))}function yv(e,t){yp.call(this,lv.Na,e),this.size=t}function gv(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Sd.setTimeout((function(){e()}),t)}lv.Ma="serverreachability",Ld(dv,yp),lv.STAT_EVENT="statevent",Ld(vv,yp),lv.Na="timingevent",Ld(yv,yp);var kv={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},bv={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function wv(){}function _v(e){return e.h||(e.h=e.i())}function xv(){}wv.prototype.h=null;var Iv,Sv={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Tv(){yp.call(this,"d")}function Ev(){yp.call(this,"c")}function Cv(){}function Nv(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new iv(this),this.P=Pv,e=ip?125:void 0,this.W=new Zp(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Av}function Av(){this.i=null,this.g="",this.h=!1}Ld(Tv,yp),Ld(Ev,yp),Ld(Cv,wv),Cv.prototype.g=function(){return new XMLHttpRequest},Cv.prototype.i=function(){return{}},Iv=new Cv;var Pv=45e3,Rv={},Ov={};function Dv(e,t,n){e.K=1,e.v=rm(Jv(t)),e.s=n,e.U=!0,Lv(e,null)}function Lv(e,t){e.F=Date.now(),Vv(e),e.A=Jv(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),mm(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Av,e.g=gy(e.l,n?t:null,!e.s),0<e.O&&(e.L=new rv(Od(e.Ia,e,e.g),e.O)),ov(e.V,e.g,"readystatechange",e.gb),t=e.H?$d(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),pv(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Mv(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Fv(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Uv(e,n))==Ov){4==t&&(e.o=4,mv(14),i=!1),cv(e.j,e.m,null,"[Incomplete Response]");break}if(r==Rv){e.o=4,mv(15),cv(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}cv(e.j,e.m,r,null),Wv(e,r)}Mv(e)&&r!=Ov&&r!=Rv&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,mv(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),ly(t),t.L=!0,mv(11))):(cv(e.j,e.m,n,"[Invalid Chunked Response]"),Bv(e),zv(e))}function Uv(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ov:(n=Number(t.substring(n,r)),isNaN(n)?Rv:(r+=1)+n>t.length?Ov:(t=t.substr(r,n),e.C=r+n,t))}function Vv(e){e.Y=Date.now()+e.P,jv(e,e.P)}function jv(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=gv(Od(e.eb,e),t)}function qv(e){e.B&&(Sd.clearTimeout(e.B),e.B=null)}function zv(e){0==e.l.G||e.I||dy(e.l,e)}function Bv(e){qv(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,ev(e.W),uv(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Wv(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Im(n.i,e)))if(n.I=e.N,!e.J&&Im(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;hy(n),ty(n)}cy(n),mv(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=gv(Od(n.ab,n),6e3));if(1>=xm(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else vy(n,11)}else if((e.J||n.g==e)&&hy(n),!zd(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(Hd(l,"spdy")||Hd(l,"quic")||Hd(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Sm(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,nm(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=yy(r,r.H?r.la:null,r.W),d.J){Tm(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(qv(p),Vv(p)),r.g=d}else sy(r);0<n.l.length&&iy(n)}else"stop"!=a[0]&&"close"!=a[0]||vy(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?vy(n,7):ey(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}pv(4)}catch(a){}}function Hv(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Ed(e)||"string"===typeof e)Vd(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Ed(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Ed(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Kv(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Kv)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Gv(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Qv(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Qv(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Qv(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(wd=Nv.prototype).setTimeout=function(e){this.P=e},wd.gb=function(e){e=e.target;var t=this.L;t&&3==Ym(e)?t.l():this.Ia(e)},wd.Ia=function(e){try{if(e==this.g)e:{var t=Ym(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||ip||this.g&&(this.h.h||this.g.ga()||$m(this.g)))){this.I||4!=t||7==n||pv(8==n||0>=r?3:2),qv(this);var i=this.g.ba();this.N=i;t:if(Mv(this)){var a=$m(this.g);e="";var o=a.length,u=4==Ym(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Bv(this),zv(this);var s="";break t}this.h.i=new Sd.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zd(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,mv(12),Bv(this),zv(this);break e}cv(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Wv(this,i)}this.U?(Fv(this,t,s),ip&&this.i&&3==t&&(ov(this.V,this.W,"tick",this.fb),this.W.start())):(cv(this.j,this.m,s,null),Wv(this,s)),4==t&&Bv(this),this.i&&!this.I&&(4==t?dy(this.l,this):(this.i=!1,Vv(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,mv(12)):(this.o=0,mv(13)),Bv(this),zv(this)}}}catch(t){}},wd.fb=function(){if(this.g){var e=Ym(this.g),t=this.g.ga();this.C<t.length&&(qv(this),Fv(this,e,t),this.i&&4!=e&&Vv(this))}},wd.cancel=function(){this.I=!0,Bv(this)},wd.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(pv(3),mv(17)),Bv(this),this.o=2,zv(this)):jv(this,this.Y-e)},(wd=Kv.prototype).R=function(){Gv(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},wd.T=function(){return Gv(this),this.g.concat()},wd.get=function(e,t){return Qv(this.h,e)?this.h[e]:t},wd.set=function(e,t){Qv(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},wd.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Yv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function $v(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof $v){this.g=void 0!==t?t:e.g,Xv(this,e.j),this.s=e.s,Zv(this,e.i),em(this,e.m),this.l=e.l,t=e.h;var n=new hm;n.i=t.i,t.g&&(n.g=new Kv(t.g),n.h=t.h),tm(this,n),this.o=e.o}else e&&(n=String(e).match(Yv))?(this.g=!!t,Xv(this,n[1]||"",!0),this.s=im(n[2]||""),Zv(this,n[3]||"",!0),em(this,n[4]),this.l=im(n[5]||"",!0),tm(this,n[6]||"",!0),this.o=im(n[7]||"")):(this.g=!!t,this.h=new hm(null,this.g))}function Jv(e){return new $v(e)}function Xv(e,t,n){e.j=n?im(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Zv(e,t,n){e.i=n?im(t,!0):t}function em(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function tm(e,t,n){t instanceof hm?(e.h=t,function(e,t){t&&!e.j&&(dm(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(pm(this,t),mm(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=am(t,lm)),e.h=new hm(t,e.g))}function nm(e,t,n){e.h.set(t,n)}function rm(e){return nm(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function im(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function am(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,om),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function om(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}$v.prototype.toString=function(){var e=[],t=this.j;t&&e.push(am(t,um,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(am(t,um,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(am(n,"/"==n.charAt(0)?cm:sm,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",am(n,fm)),e.join("")};var um=/[#\/\?@]/g,sm=/[#\?:]/g,cm=/[#\?]/g,lm=/[#\?@]/g,fm=/#/g;function hm(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function dm(e){e.g||(e.g=new Kv,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function pm(e,t){dm(e),t=ym(e,t),Qv(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Qv((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Gv(e)))}function vm(e,t){return dm(e),t=ym(e,t),Qv(e.g.h,t)}function mm(e,t,n){pm(e,t),0<n.length&&(e.i=null,e.g.set(ym(e,t),qd(n)),e.h+=n.length)}function ym(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(wd=hm.prototype).add=function(e,t){dm(this),this.i=null,e=ym(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},wd.forEach=function(e,t){dm(this),this.g.forEach((function(n,r){Vd(n,(function(n){e.call(t,n,r,this)}),this)}),this)},wd.T=function(){dm(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},wd.R=function(e){dm(this);var t=[];if("string"===typeof e)vm(this,e)&&(t=jd(t,this.g.get(ym(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=jd(t,e[n])}return t},wd.set=function(e,t){return dm(this),this.i=null,vm(this,e=ym(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},wd.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},wd.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var gm=Er((function e(t,n){Sr(this,e),this.h=t,this.g=n}));function km(e){this.l=e||wm,Sd.PerformanceNavigationTiming?e=0<(e=Sd.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Sd.g&&Sd.g.Ea&&Sd.g.Ea()&&Sd.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var bm,wm=10;function _m(e){return!!e.h||!!e.g&&e.g.size>=e.j}function xm(e){return e.h?1:e.g?e.g.size:0}function Im(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Sm(e,t){e.g?e.g.add(t):e.h=t}function Tm(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Em(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Cr(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return qd(e.i)}function Cm(){}function Nm(){this.g=new Cm}function Am(e,t,n){var r=n||"";try{Hv(e,(function(e,n){var i=e;Cd(e)&&(i=zp(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(SV){throw t.push(r+"type="+encodeURIComponent("_badmap")),SV}}function Pm(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Rm(e){this.l=e.$b||null,this.j=e.ib||!1}function Om(e,t){Vp.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Dm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}km.prototype.cancel=function(){if(this.i=Em(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Cr(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Cm.prototype.stringify=function(e){return Sd.JSON.stringify(e,void 0)},Cm.prototype.parse=function(e){return Sd.JSON.parse(e,void 0)},Ld(Rm,wv),Rm.prototype.g=function(){return new Om(this.l,this.j)},Rm.prototype.i=(bm={},function(){return bm}),Ld(Om,Vp);var Dm=0;function Lm(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Mm(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Fm(e)}function Fm(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(wd=Om.prototype).open=function(e,t){if(this.readyState!=Dm)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Fm(this)},wd.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Sd).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},wd.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Mm(this)),this.readyState=Dm},wd.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Fm(this)),this.g&&(this.readyState=3,Fm(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Sd.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Lm(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},wd.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Mm(this):Fm(this),3==this.readyState&&Lm(this)}},wd.Ua=function(e){this.g&&(this.response=this.responseText=e,Mm(this))},wd.Ta=function(e){this.g&&(this.response=e,Mm(this))},wd.ha=function(){this.g&&Mm(this)},wd.setRequestHeader=function(e,t){this.v.append(e,t)},wd.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},wd.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Om.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Um=Sd.JSON.parse;function Vm(e){Vp.call(this),this.headers=new Kv,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=jm,this.K=this.L=!1}Ld(Vm,Vp);var jm="",qm=/^https?$/i,zm=["POST","PUT"];function Bm(e){return"content-type"==e.toLowerCase()}function Wm(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Hm(e),Gm(e)}function Hm(e){e.D||(e.D=!0,jp(e,"complete"),jp(e,"error"))}function Km(e){if(e.h&&"undefined"!=typeof Id&&(!e.C[1]||4!=Ym(e)||2!=e.ba()))if(e.v&&4==Ym(e))tv(e.Fa,0,e);else if(jp(e,"readystatechange"),4==Ym(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Yv)[1]||null;if(!a&&Sd.self&&Sd.self.location){var o=Sd.self.location.protocol;a=o.substr(0,o.length-1)}i=!qm.test(a?a.toLowerCase():"")}t=i}if(t)jp(e,"complete"),jp(e,"success");else{e.m=6;try{var u=2<Ym(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",Hm(e)}}finally{Gm(e)}}}function Gm(e,t){if(e.g){Qm(e);var n=e.g,r=e.C[0]?Td:null;e.g=null,e.C=null,t||jp(e,"ready");try{n.onreadystatechange=r}catch(SV){}}}function Qm(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Sd.clearTimeout(e.A),e.A=null)}function Ym(e){return e.g?e.g.readyState:0}function $m(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case jm:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Jm(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Yd(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):nm(e,t,n))}function Xm(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Zm(e){this.za=0,this.l=[],this.h=new sv,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Xm("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Xm("baseRetryDelayMs",5e3,e),this.$a=Xm("retryDelaySeedMs",1e4,e),this.Ya=Xm("forwardChannelMaxRetries",2,e),this.ra=Xm("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new km(e&&e.concurrentRequestLimit),this.Ca=new Nm,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function ey(e){if(ny(e),3==e.G){var t=e.V++,n=Jv(e.F);nm(n,"SID",e.J),nm(n,"RID",t),nm(n,"TYPE","terminate"),oy(e,n),(t=new Nv(e,e.h,t,void 0)).K=2,t.v=rm(Jv(n)),n=!1,Sd.navigator&&Sd.navigator.sendBeacon&&(n=Sd.navigator.sendBeacon(t.v.toString(),"")),!n&&Sd.Image&&((new Image).src=t.v,n=!0),n||(t.g=gy(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Vv(t)}my(e)}function ty(e){e.g&&(ly(e),e.g.cancel(),e.g=null)}function ny(e){ty(e),e.u&&(Sd.clearTimeout(e.u),e.u=null),hy(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Sd.clearTimeout(e.m),e.m=null)}function ry(e,t){e.l.push(new gm(e.Za++,t)),3==e.G&&iy(e)}function iy(e){_m(e.i)||e.m||(e.m=!0,Yp(e.Ha,e),e.C=0)}function ay(e,t){var n;n=t?t.m:e.V++;var r=Jv(e.F);nm(r,"SID",e.J),nm(r,"RID",n),nm(r,"AID",e.U),oy(e,r),e.o&&e.s&&Jm(r,e.o,e.s),n=new Nv(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=uy(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Sm(e.i,n),Dv(n,r,t)}function oy(e,t){e.j&&Hv({},(function(e,n){nm(t,n,e)}))}function uy(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Od(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Am(l,o,"req"+c+"_")}catch(Ky){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function sy(e){e.g||e.u||(e.Y=1,Yp(e.Ga,e),e.A=0)}function cy(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=gv(Od(e.Ga,e),py(e,e.A)),e.A++,!0)}function ly(e){null!=e.B&&(Sd.clearTimeout(e.B),e.B=null)}function fy(e){e.g=new Nv(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Jv(e.oa);nm(t,"RID","rpc"),nm(t,"SID",e.J),nm(t,"CI",e.N?"0":"1"),nm(t,"AID",e.U),oy(e,t),nm(t,"TYPE","xmlhttp"),e.o&&e.s&&Jm(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=rm(Jv(t)),n.s=null,n.U=!0,Lv(n,e)}function hy(e){null!=e.v&&(Sd.clearTimeout(e.v),e.v=null)}function dy(e,t){var n=null;if(e.g==t){hy(e),ly(e),e.g=null;var r=2}else{if(!Im(e.i,t))return;n=t.D,Tm(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;jp(r=hv(),new yv(r,n,t,i)),iy(e)}else sy(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(xm(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=gv(Od(e.Ha,e,t),py(e,e.C)),e.C++,!0))}(e,t)||2==r&&cy(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:vy(e,5);break;case 4:vy(e,10);break;case 3:vy(e,6);break;default:vy(e,2)}}function py(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function vy(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Od(e.jb,e);n||(n=new $v("//www.google.com/images/cleardot.gif"),Sd.location&&"http"==Sd.location.protocol||Xv(n,"https"),rm(n)),function(e,t){var n=new sv;if(Sd.Image){var r=new Image;r.onload=Dd(Pm,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Dd(Pm,n,r,"TestLoadImage: error",!1,t),r.onabort=Dd(Pm,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Dd(Pm,n,r,"TestLoadImage: timeout",!1,t),Sd.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else mv(2);e.G=0,e.j&&e.j.va(t),my(e),ny(e)}function my(e){e.G=0,e.I=-1,e.j&&(0==Em(e.i).length&&0==e.l.length||(e.i.i.length=0,qd(e.l),e.l.length=0),e.j.ua())}function yy(e,t,n){var r=function(e){return e instanceof $v?Jv(e):new $v(e,void 0)}(n);if(""!=r.i)t&&Zv(r,t+"."+r.i),em(r,r.m);else{var i=Sd.location;r=function(e,t,n,r){var i=new $v(null,void 0);return e&&Xv(i,e),t&&Zv(i,t),n&&em(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Yd(e.aa,(function(e,t){nm(r,t,e)})),t=e.D,n=e.sa,t&&n&&nm(r,t,n),nm(r,"VER",e.ma),oy(e,r),r}function gy(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Vm(new Rm({ib:!0})):new Vm(e.qa)).L=e.H,t}function ky(){}function by(){if(np&&!(10<=Number(vp)))throw Error("Environmental error: no available transport.")}function wy(e,t){Vp.call(this),this.g=new Zm(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!zd(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!zd(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Iy(this)}function _y(e){Tv.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function xy(){Ev.call(this),this.status=1}function Iy(e){this.g=e}(wd=Vm.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Iv.g(),this.C=this.u?_v(this.u):_v(Iv),this.g.onreadystatechange=Od(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void Wm(this,a)}e=n||"";var i=new Kv(this.headers);r&&Hv(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Bm,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Sd.FormData&&e instanceof Sd.FormData,!(0<=Ud(zm,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Qm(this),0<this.B&&((this.K=function(e){return np&&dp()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Od(this.pa,this)):this.A=tv(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){Wm(this,a)}},wd.pa=function(){"undefined"!=typeof Id&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,jp(this,"timeout"),this.abort(8))},wd.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,jp(this,"complete"),jp(this,"abort"),Gm(this))},wd.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Gm(this,!0)),Vm.Z.M.call(this)},wd.Fa=function(){this.s||(this.F||this.v||this.l?Km(this):this.cb())},wd.cb=function(){Km(this)},wd.ba=function(){try{return 2<Ym(this)?this.g.status:-1}catch(bm){return-1}},wd.ga=function(){try{return this.g?this.g.responseText:""}catch(bm){return""}},wd.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Um(t)}},wd.Da=function(){return this.m},wd.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(wd=Zm.prototype).ma=8,wd.G=1,wd.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},wd.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Nv(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Xd(n=$d(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=uy(this,t,r),nm(i=Jv(this.F),"RID",e),nm(i,"CVER",22),this.D&&nm(i,"X-HTTP-Session-Id",this.D),oy(this,i),this.o&&n&&Jm(i,this.o,n),Sm(this.i,t),this.Ra&&nm(i,"TYPE","init"),this.ja?(nm(i,"$req",r),nm(i,"SID","null"),t.$=!0,Dv(t,i,null)):Dv(t,i,r),this.G=2}}else 3==this.G&&(e?ay(this,e):0==this.l.length||_m(this.i)||ay(this))},wd.Ga=function(){if(this.u=null,fy(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=gv(Od(this.bb,this),e)}},wd.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,mv(10),ty(this),fy(this))},wd.ab=function(){null!=this.v&&(this.v=null,ty(this),cy(this),mv(19))},wd.jb=function(e){e?(this.h.info("Successfully pinged google.com"),mv(2)):(this.h.info("Failed to ping google.com"),mv(1))},(wd=ky.prototype).xa=function(){},wd.wa=function(){},wd.va=function(){},wd.ua=function(){},wd.Oa=function(){},by.prototype.g=function(e,t){return new wy(e,t)},Ld(wy,Vp),wy.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Yp(Od(e.hb,e,t))),mv(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=yy(e,null,e.W),iy(e)},wy.prototype.close=function(){ey(this.g)},wy.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,ry(this.g,t)}else this.v?((t={}).__data__=zp(e),ry(this.g,t)):ry(this.g,e)},wy.prototype.M=function(){this.g.j=null,delete this.j,ey(this.g),delete this.g,wy.Z.M.call(this)},Ld(_y,Tv),Ld(xy,Ev),Ld(Iy,ky),Iy.prototype.xa=function(){jp(this.g,"a")},Iy.prototype.wa=function(e){jp(this.g,new _y(e))},Iy.prototype.va=function(e){jp(this.g,new xy(e))},Iy.prototype.ua=function(){jp(this.g,"b")},by.prototype.createWebChannel=by.prototype.g,wy.prototype.send=wy.prototype.u,wy.prototype.open=wy.prototype.m,wy.prototype.close=wy.prototype.close,kv.NO_ERROR=0,kv.TIMEOUT=8,kv.HTTP_ERROR=6,bv.COMPLETE="complete",xv.EventType=Sv,Sv.OPEN="a",Sv.CLOSE="b",Sv.ERROR="c",Sv.MESSAGE="d",Vp.prototype.listen=Vp.prototype.N,Vm.prototype.listenOnce=Vm.prototype.O,Vm.prototype.getLastError=Vm.prototype.La,Vm.prototype.getLastErrorCode=Vm.prototype.Da,Vm.prototype.getStatus=Vm.prototype.ba,Vm.prototype.getResponseJson=Vm.prototype.Qa,Vm.prototype.getResponseText=Vm.prototype.ga,Vm.prototype.send=Vm.prototype.ea;var Sy=xd.createWebChannelTransport=function(){return new by},Ty=xd.getStatEventTarget=function(){return hv()},Ey=xd.ErrorCode=kv,Cy=xd.EventType=bv,Ny=xd.Event=lv,Ay=xd.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Py=xd.FetchXmlHttpFactory=Rm,Ry=xd.WebChannel=xv,Oy=xd.XhrIo=Vm,Dy="@firebase/firestore",Ly=function(){function e(t){Sr(this,e),this.uid=t}return Er(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Ly.UNAUTHENTICATED=new Ly(null),Ly.GOOGLE_CREDENTIALS=new Ly("google-credentials-uid"),Ly.FIRST_PARTY=new Ly("first-party-uid"),Ly.MOCK_USER=new Ly("mock-user");var My="9.9.2",Fy=new Wi("@firebase/firestore");function Uy(){return Fy.logLevel}function Vy(e){if(Fy.logLevel<=Fi.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(zy);Fy.debug.apply(Fy,["Firestore (".concat(My,"): ").concat(e)].concat(Ri(i)))}}function jy(e){if(Fy.logLevel<=Fi.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(zy);Fy.error.apply(Fy,["Firestore (".concat(My,"): ").concat(e)].concat(Ri(i)))}}function qy(e){if(Fy.logLevel<=Fi.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(zy);Fy.warn.apply(Fy,["Firestore (".concat(My,"): ").concat(e)].concat(Ri(i)))}}function zy(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function By(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(My,") INTERNAL ASSERTION FAILED: ")+e;throw jy(t),new Error(t)}function Wy(e,t){e||By()}function Hy(e,t){return e}var Ky={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Gy=function(e){Pr(n,e);var t=Lr(n);function n(e,r){var i;return Sr(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return Er(n)}(ai),Qy=Er((function e(){var t=this;Sr(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Yy=Er((function e(t,n){Sr(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),$y=function(){function e(){Sr(this,e)}return Er(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ly.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Jy=function(){function e(t){Sr(this,e),this.token=t,this.changeListener=null}return Er(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Xy=function(){function e(t){Sr(this,e),this.t=t,this.currentUser=Ly.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Er(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Qy;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Qy,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Vy("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Vy("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Qy)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Vy("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Wy("string"==typeof n.accessToken),new Yy(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Wy(null===e||"string"==typeof e),new Ly(e)}}]),e}(),Zy=Er((function e(t,n,r){Sr(this,e),this.type="FirstParty",this.user=Ly.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),eg=function(){function e(t,n,r){Sr(this,e),this.h=t,this.l=n,this.m=r}return Er(e,[{key:"getToken",value:function(){return Promise.resolve(new Zy(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ly.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),tg=Er((function e(t){Sr(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),ng=function(){function e(t){Sr(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return Er(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Vy("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,Vy("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Vy("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):Vy("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Wy("string"==typeof t.token),e.p=t.token,new tg(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function rg(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var ig=function(){function e(){Sr(this,e)}return Er(e,null,[{key:"I",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=rg(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function ag(e,t){return e<t?-1:e>t?1:0}function og(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function ug(e){return e+"\0"}var sg=function(){function e(t,n){if(Sr(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Gy(Ky.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Gy(Ky.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Gy(Ky.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Gy(Ky.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Er(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?ag(this.nanoseconds,e.nanoseconds):ag(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),cg=function(){function e(t){Sr(this,e),this.timestamp=t}return Er(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new sg(0,0))}},{key:"max",value:function(){return new e(new sg(253402300799,999999999))}}]),e}(),lg=function(){function e(t,n,r){Sr(this,e),void 0===n?n=0:n>t.length&&By(),void 0===r?r=t.length-n:r>t.length-n&&By(),this.segments=t,this.offset=n,this.len=r}return Er(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),fg=function(e){Pr(n,e);var t=Lr(n);function n(){return Sr(this,n),t.apply(this,arguments)}return Er(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Gy(Ky.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Ri(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(lg),hg=/^[_a-zA-Z][_a-zA-Z0-9]*$/,dg=function(e){Pr(n,e);var t=Lr(n);function n(){return Sr(this,n),t.apply(this,arguments)}return Er(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return hg.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Gy(Ky.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Gy(Ky.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Gy(Ky.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Gy(Ky.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(lg),pg=function(){function e(t){Sr(this,e),this.path=t}return Er(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===fg.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(fg.fromString(t))}},{key:"fromName",value:function(t){return new e(fg.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(fg.emptyPath())}},{key:"comparator",value:function(e,t){return fg.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new fg(t.slice()))}}]),e}(),vg=Er((function e(t,n,r,i){Sr(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function mg(e){return e.fields.find((function(e){return 2===e.kind}))}function yg(e){return e.fields.filter((function(e){return 2!==e.kind}))}vg.UNKNOWN_ID=-1;var gg=Er((function e(t,n){Sr(this,e),this.fieldPath=t,this.kind=n}));var kg=function(){function e(t,n){Sr(this,e),this.sequenceNumber=t,this.offset=n}return Er(e,null,[{key:"empty",value:function(){return new e(0,_g.min())}}]),e}();function bg(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=cg.fromTimestamp(1e9===r?new sg(n+1,0):new sg(n,r));return new _g(i,pg.empty(),t)}function wg(e){return new _g(e.readTime,e.key,-1)}var _g=function(){function e(t,n,r){Sr(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return Er(e,null,[{key:"min",value:function(){return new e(cg.min(),pg.empty(),-1)}},{key:"max",value:function(){return new e(cg.max(),pg.empty(),-1)}}]),e}();function xg(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=pg.comparator(e.documentKey,t.documentKey))?n:ag(e.largestBatchId,t.largestBatchId)}var Ig="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Sg=function(){function e(){Sr(this,e),this.onCommittedListeners=[]}return Er(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Tg(e){return Eg.apply(this,arguments)}function Eg(){return Eg=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Ky.FAILED_PRECONDITION&&t.message===Ig){e.next=2;break}throw t;case 2:Vy("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Eg.apply(this,arguments)}var Cg=function(){function e(t){var n=this;Sr(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return Er(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&By(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Cr(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Ng=function(){function e(t,n){var r=this;Sr(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.T=new Qy,this.transaction.oncomplete=function(){r.T.resolve()},this.transaction.onabort=function(){n.error?r.T.reject(new Rg(t,n.error)):r.T.resolve()},this.transaction.onerror=function(e){var n=Fg(e.target.error);r.T.reject(new Rg(t,n))}}return Er(e,[{key:"A",get:function(){return this.T.promise}},{key:"abort",value:function(e){e&&this.T.reject(e),this.aborted||(Vy("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"R",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Dg(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Rg(n,t)}}}]),e}(),Ag=function(){function e(t,n,r){Sr(this,e),this.name=t,this.version=n,this.P=r,12.2===e.v(Jr())&&jy("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return Er(e,[{key:"k",value:function(){var e=ee(X().mark((function e(t){var n=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Vy("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Rg(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Gy(Ky.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Gy(Ky.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Rg(t,n))},i.onupgradeneeded=function(e){Vy("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.P.M(t,i.transaction,e.oldVersion,n.version).next((function(){Vy("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.O&&(this.db.onversionchange=function(e){return n.O(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"F",value:function(e){this.O=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=ee(X().mark((function e(t,n,r,i){var a,o,u,s,c,l=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(X().mark((function e(){var n,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.k(t);case 2:return l.db=e.sent,n=Ng.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.R(),e})).catch((function(e){return n.abort(e),Cg.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.A;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s=e.t1,c="FirebaseError"!==s.name&&o<3,Vy("SimpleDb","Transaction failed with error:",s.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(s));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Vy("SimpleDb","Removing database:",e),Lg(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"V",value:function(){if(!ii())return!1;if(e.S())return!0;var t=Jr(),n=e.v(t),r=0<n&&n<10,i=e.D(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"S",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/twitter-clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyDr7gSfy5mcvs3eSUluMrWt7u5YnNmztxQ",REACT_APP_AUTH_DOMAIN:"twitter-clone-e2920.firebaseapp.com",REACT_APP_PROJECT_ID:"twitter-clone-e2920",REACT_APP_STORAGE_BUCKET:"twitter-clone-e2920.appspot.com",REACT_APP_MESSAGING_SENDER_ID:"736440001454",REACT_APP_APP_ID:"1:736440001454:web:16a50313f65f23178d1e3f"})||void 0===e?void 0:e.C)}},{key:"N",value:function(e,t){return e.store(t)}},{key:"v",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"D",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Pg=function(){function e(t){Sr(this,e),this.$=t,this.B=!1,this.L=null}return Er(e,[{key:"isDone",get:function(){return this.B}},{key:"U",get:function(){return this.L}},{key:"cursor",set:function(e){this.$=e}},{key:"done",value:function(){this.B=!0}},{key:"q",value:function(e){this.L=e}},{key:"delete",value:function(){return Lg(this.$.delete())}}]),e}(),Rg=function(e){Pr(n,e);var t=Lr(n);function n(e,r){var i;return Sr(this,n),(i=t.call(this,Ky.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return Er(n)}(Gy);function Og(e){return"IndexedDbTransactionError"===e.name}var Dg=function(){function e(t){Sr(this,e),this.store=t}return Er(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Vy("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Vy("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Lg(n)}},{key:"add",value:function(e){return Vy("SimpleDb","ADD",this.store.name,e,e),Lg(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Lg(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Vy("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Vy("SimpleDb","DELETE",this.store.name,e),Lg(this.store.delete(e))}},{key:"count",value:function(){return Vy("SimpleDb","COUNT",this.store.name),Lg(this.store.count())}},{key:"K",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.G(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Cg((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"j",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Cg((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"W",value:function(e,t){Vy("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.H=!1;var r=this.cursor(n);return this.G(r,(function(e,t,n){return n.delete()}))}},{key:"J",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.G(r,t)}},{key:"Y",value:function(e){var t=this.cursor({});return new Cg((function(n,r){t.onerror=function(e){var t=Fg(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"G",value:function(e,t){var n=[];return new Cg((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Pg(i),o=t(i.primaryKey,i.value,a);if(o instanceof Cg){var u=o.catch((function(e){return a.done(),Cg.reject(e)}));n.push(u)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return Cg.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Lg(e){return new Cg((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Fg(e.target.error);n(t)}}))}var Mg=!1;function Fg(e){var t=Ag.v(Jr());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Gy("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Mg||(Mg=!0,setTimeout((function(){throw r}),0)),r}}return e}var Ug=function(){function e(t,n){Sr(this,e),this.asyncQueue=t,this.X=n,this.task=null}return Er(e,[{key:"start",value:function(){this.Z(15)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"Z",value:function(e){var t=this;Vy("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Vy,e.t1="Documents written: ",e.next=6,t.X.tt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Og(e.t4)){e.next=17;break}Vy("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Tg(e.t4);case 19:return e.next=21,t.Z(1);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Vg=function(){function e(t,n){Sr(this,e),this.localStore=t,this.persistence=n}return Er(e,[{key:"tt",value:function(){var e=ee(X().mark((function e(){var t,n=this,r=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.et(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"et",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Cg.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Vy("IndexBackiller","Processing collection: ".concat(t)),n.nt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"nt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.st(i,n)})).next((function(n){return Vy("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"st",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=wg(t);xg(r,n)>0&&(n=r)})),new _g(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),jg=function(){function e(t,n){var r=this;Sr(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.it(e)},this.rt=function(e){return n.writeSequenceNumber(e)})}return Er(e,[{key:"it",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.rt&&this.rt(e),e}}]),e}();function qg(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function zg(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Bg(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}jg.ot=-1;var Wg=function(){function e(t,n){Sr(this,e),this.comparator=t,this.root=n||Kg.EMPTY}return Er(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Kg.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Kg.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Hg(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Hg(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Hg(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Hg(this.root,e,this.comparator,!0)}}]),e}(),Hg=function(){function e(t,n,r,i){Sr(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Er(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Kg=function(){function e(t,n,r,i,a){Sr(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Er(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw By();if(this.right.isRed())throw By();var e=this.left.check();if(e!==this.right.check())throw By();return e+(this.isRed()?0:1)}}]),e}();Kg.EMPTY=null,Kg.RED=!0,Kg.BLACK=!1,Kg.EMPTY=new(function(){function e(){Sr(this,e),this.size=0}return Er(e,[{key:"key",get:function(){throw By()}},{key:"value",get:function(){throw By()}},{key:"color",get:function(){throw By()}},{key:"left",get:function(){throw By()}},{key:"right",get:function(){throw By()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Kg(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Gg=function(){function e(t){Sr(this,e),this.comparator=t,this.data=new Wg(this.comparator)}return Er(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Qg(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Qg(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Qg=function(){function e(t){Sr(this,e),this.iter=t}return Er(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Yg(e){return e.hasNext()?e.getNext():void 0}var $g=function(){function e(t){Sr(this,e),this.fields=t,t.sort(dg.comparator)}return Er(e,[{key:"unionWith",value:function(t){var n,r=new Gg(dg.comparator),i=Cr(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=Cr(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=Cr(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return og(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var Jg=function(e){function t(e){Sr(this,t),this.binaryString=e}return Er(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return ag(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Jg.EMPTY_BYTE_STRING=new Jg("");var Xg=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zg(e){if(Wy(!!e),"string"==typeof e){var t=0,n=Xg.exec(e);if(Wy(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ek(e.seconds),nanos:ek(e.nanos)}}function ek(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function tk(e){return"string"==typeof e?Jg.fromBase64String(e):Jg.fromUint8Array(e)}function nk(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function rk(e){var t=e.mapValue.fields.__previous_value__;return nk(t)?rk(t):t}function ik(e){var t=Zg(e.mapValue.fields.__local_write_time__.timestampValue);return new sg(t.seconds,t.nanos)}var ak=Er((function e(t,n,r,i,a,o,u,s){Sr(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),ok=function(){function e(t,n){Sr(this,e),this.projectId=t,this.database=n||"(default)"}return Er(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function uk(e){return null==e}function sk(e){return 0===e&&1/e==-1/0}function ck(e){return"number"==typeof e&&Number.isInteger(e)&&!sk(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var lk={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},fk={nullValue:"NULL_VALUE"};function hk(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?nk(e)?4:Tk(e)?9007199254740991:10:By()}function dk(e,t){if(e===t)return!0;var n=hk(e);if(n!==hk(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ik(e).isEqual(ik(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Zg(e.timestampValue),r=Zg(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return tk(e.bytesValue).isEqual(tk(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ek(e.geoPointValue.latitude)===ek(t.geoPointValue.latitude)&&ek(e.geoPointValue.longitude)===ek(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ek(e.integerValue)===ek(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=ek(e.doubleValue),r=ek(t.doubleValue);return n===r?sk(n)===sk(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return og(e.arrayValue.values||[],t.arrayValue.values||[],dk);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(qg(n)!==qg(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!dk(n[i],r[i])))return!1;return!0}(e,t);default:return By()}}function pk(e,t){return void 0!==(e.values||[]).find((function(e){return dk(e,t)}))}function vk(e,t){if(e===t)return 0;var n=hk(e),r=hk(t);if(n!==r)return ag(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ag(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=ek(e.integerValue||e.doubleValue),r=ek(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return mk(e.timestampValue,t.timestampValue);case 4:return mk(ik(e),ik(t));case 5:return ag(e.stringValue,t.stringValue);case 6:return function(e,t){var n=tk(e),r=tk(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=ag(n[i],r[i]);if(0!==a)return a}return ag(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=ag(ek(e.latitude),ek(t.latitude));return 0!==n?n:ag(ek(e.longitude),ek(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=vk(n[i],r[i]);if(a)return a}return ag(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===lk.mapValue&&t===lk.mapValue)return 0;if(e===lk.mapValue)return 1;if(t===lk.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=ag(r[o],a[o]);if(0!==u)return u;var s=vk(n[r[o]],i[a[o]]);if(0!==s)return s}return ag(r.length,a.length)}(e.mapValue,t.mapValue);default:throw By()}}function mk(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ag(e,t);var n=Zg(e),r=Zg(t),i=ag(n.seconds,r.seconds);return 0!==i?i:ag(n.nanos,r.nanos)}function yk(e){return gk(e)}function gk(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Zg(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?tk(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,pg.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Cr(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=gk(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Cr(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(gk(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):By();var t,n}function kk(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function bk(e){return!!e&&"integerValue"in e}function wk(e){return!!e&&"arrayValue"in e}function _k(e){return!!e&&"nullValue"in e}function xk(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ik(e){return!!e&&"mapValue"in e}function Sk(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return zg(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Sk(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Sk(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Tk(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ek(e){return"nullValue"in e?fk:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?kk(ok.empty(),pg.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:By()}function Ck(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?kk(ok.empty(),pg.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?lk:By()}function Nk(e,t){var n=vk(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Ak(e,t){var n=vk(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Pk=function(){function e(t){Sr(this,e),this.value=t}return Er(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Ik(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sk(t)}},{key:"setAll",value:function(e){var t=this,n=dg.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Sk(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Ik(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return dk(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Ik(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){zg(t,(function(t,n){return e[t]=n}));var r,i=Cr(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Sk(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Rk(e){var t=[];return zg(e.fields,(function(e,n){var r=new dg([e]);if(Ik(n)){var i=Rk(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Cr(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new $g(t)}var Ok=function(){function e(t,n,r,i,a,o){Sr(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return Er(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Pk.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Pk.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=cg.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,cg.min(),cg.min(),Pk.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,cg.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,cg.min(),Pk.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,cg.min(),Pk.empty(),2)}}]),e}(),Dk=Er((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Sr(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ut=null}));function Lk(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Dk(e,t,n,r,i,a,o)}function Mk(e){var t=Hy(e);if(null===t.ut){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+yk(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),uk(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return yk(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return yk(e)})).join(",")),t.ut=n}return t.ut}function Fk(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Zk(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!dk(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!tb(e.startAt,t.startAt)&&tb(e.endAt,t.endAt)}function Uk(e){return pg.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Vk(e,t){return e.filters.filter((function(e){return e instanceof zk&&e.field.isEqual(t)}))}function jk(e,t,n){var r,i=fk,a=!0,o=Cr(Vk(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=fk,c=!0;switch(u.op){case"<":case"<=":s=Ek(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=fk}Nk({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Nk({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function qk(e,t,n){var r,i=lk,a=!0,o=Cr(Vk(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=lk,c=!0;switch(u.op){case">=":case">":s=Ck(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=lk}Ak({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Ak({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var zk=function(e){Pr(n,e);var t=Lr(n);function n(e,r,i){var a;return Sr(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return Er(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(vk(t,this.value)):null!==t&&hk(this.value)===hk(t)&&this.at(vk(t,this.value))}},{key:"at",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return By()}}},{key:"ht",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new Bk(e,t,r):"array-contains"===t?new Gk(e,r):"in"===t?new Qk(e,r):"not-in"===t?new Yk(e,r):"array-contains-any"===t?new $k(e,r):new n(e,t,r)}},{key:"ct",value:function(e,t,n){return"in"===t?new Wk(e,n):new Hk(e,n)}}]),n}(function(){return Er((function e(){Sr(this,e)}))}()),Bk=function(e){Pr(n,e);var t=Lr(n);function n(e,r,i){var a;return Sr(this,n),(a=t.call(this,e,r,i)).key=pg.fromName(i.referenceValue),a}return Er(n,[{key:"matches",value:function(e){var t=pg.comparator(e.key,this.key);return this.at(t)}}]),n}(zk),Wk=function(e){Pr(n,e);var t=Lr(n);function n(e,r){var i;return Sr(this,n),(i=t.call(this,e,"in",r)).keys=Kk("in",r),i}return Er(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(zk),Hk=function(e){Pr(n,e);var t=Lr(n);function n(e,r){var i;return Sr(this,n),(i=t.call(this,e,"not-in",r)).keys=Kk("not-in",r),i}return Er(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(zk);function Kk(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return pg.fromName(e.referenceValue)}))}var Gk=function(e){Pr(n,e);var t=Lr(n);function n(e,r){return Sr(this,n),t.call(this,e,"array-contains",r)}return Er(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return wk(t)&&pk(t.arrayValue,this.value)}}]),n}(zk),Qk=function(e){Pr(n,e);var t=Lr(n);function n(e,r){return Sr(this,n),t.call(this,e,"in",r)}return Er(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&pk(this.value.arrayValue,t)}}]),n}(zk),Yk=function(e){Pr(n,e);var t=Lr(n);function n(e,r){return Sr(this,n),t.call(this,e,"not-in",r)}return Er(n,[{key:"matches",value:function(e){if(pk(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!pk(this.value.arrayValue,t)}}]),n}(zk),$k=function(e){Pr(n,e);var t=Lr(n);function n(e,r){return Sr(this,n),t.call(this,e,"array-contains-any",r)}return Er(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!wk(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return pk(t.value.arrayValue,e)}))}}]),n}(zk),Jk=Er((function e(t,n){Sr(this,e),this.position=t,this.inclusive=n})),Xk=Er((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Sr(this,e),this.field=t,this.dir=n}));function Zk(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function eb(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?pg.comparator(pg.fromName(o.referenceValue),n.key):vk(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function tb(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!dk(e.position[n],t.position[n]))return!1;return!0}var nb=Er((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Sr(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.lt=null,this.ft=null,this.startAt,this.endAt}));function rb(e,t,n,r,i,a,o,u){return new nb(e,t,n,r,i,a,o,u)}function ib(e){return new nb(e)}function ab(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ob(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function ub(e){var t,n=Cr(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.ht())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function sb(e){return null!==e.collectionGroup}function cb(e){var t=Hy(e);if(null===t.lt){t.lt=[];var n=ub(t),r=ob(t);if(null!==n&&null===r)n.isKeyField()||t.lt.push(new Xk(n)),t.lt.push(new Xk(dg.keyField(),"asc"));else{var i,a=!1,o=Cr(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.lt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new Xk(dg.keyField(),s))}}}return t.lt}function lb(e){var t=Hy(e);if(!t.ft)if("F"===t.limitType)t.ft=Lk(t.path,t.collectionGroup,cb(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=Cr(cb(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Xk(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Jk(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Jk(t.startAt.position,t.startAt.inclusive):null;t.ft=Lk(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.ft}function fb(e,t,n){return new nb(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function hb(e,t){return Fk(lb(e),lb(t))&&e.limitType===t.limitType}function db(e){return"".concat(Mk(lb(e)),"|lt:").concat(e.limitType)}function pb(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(yk(t.value));var t})).join(", "),"]")),uk(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return yk(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return yk(e)})).join(",")),"Target(".concat(t,")")}(lb(e)),"; limitType=").concat(e.limitType,")")}function vb(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):pg.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Cr(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Cr(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=eb(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,cb(e),t))&&!(e.endAt&&!function(e,t,n){var r=eb(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,cb(e),t))}(e,t)}function mb(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function yb(e){return function(t,n){var r,i=!1,a=Cr(cb(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=gb(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function gb(e,t,n){var r=e.field.isKeyField()?pg.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?vk(r,i):By()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return By()}}function kb(e,t){if(e.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sk(t)?"-0":t}}function bb(e){return{integerValue:""+e}}function wb(e,t){return ck(t)?bb(t):kb(e,t)}var _b=Er((function e(){Sr(this,e),this._=void 0}));function xb(e,t,n){return e instanceof Tb?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Eb?Cb(e,t):e instanceof Nb?Ab(e,t):function(e,t){var n=Sb(e,t),r=Rb(n)+Rb(e._t);return bk(n)&&bk(e._t)?bb(r):kb(e.wt,r)}(e,t)}function Ib(e,t,n){return e instanceof Eb?Cb(e,t):e instanceof Nb?Ab(e,t):n}function Sb(e,t){return e instanceof Pb?bk(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Tb=function(e){Pr(n,e);var t=Lr(n);function n(){return Sr(this,n),t.apply(this,arguments)}return Er(n)}(_b),Eb=function(e){Pr(n,e);var t=Lr(n);function n(e){var r;return Sr(this,n),(r=t.call(this)).elements=e,r}return Er(n)}(_b);function Cb(e,t){var n,r=Ob(t),i=Cr(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return dk(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Nb=function(e){Pr(n,e);var t=Lr(n);function n(e){var r;return Sr(this,n),(r=t.call(this)).elements=e,r}return Er(n)}(_b);function Ab(e,t){var n,r=Ob(t),i=Cr(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!dk(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Pb=function(e){Pr(n,e);var t=Lr(n);function n(e,r){var i;return Sr(this,n),(i=t.call(this)).wt=e,i._t=r,i}return Er(n)}(_b);function Rb(e){return ek(e.integerValue||e.doubleValue)}function Ob(e){return wk(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Db=Er((function e(t,n){Sr(this,e),this.field=t,this.transform=n}));var Lb=Er((function e(t,n){Sr(this,e),this.version=t,this.transformResults=n})),Mb=function(){function e(t,n){Sr(this,e),this.updateTime=t,this.exists=n}return Er(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Fb(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Ub=Er((function e(){Sr(this,e)}));function Vb(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Jb(e.key,Mb.none()):new Wb(e.key,e.data,Mb.none());var n,r=e.data,i=Pk.empty(),a=new Gg(dg.comparator),o=Cr(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new Hb(e.key,i,new $g(a.toArray()),Mb.none())}function jb(e,t,n){e instanceof Wb?function(e,t,n){var r=e.value.clone(),i=Gb(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Hb?function(e,t,n){if(Fb(e.precondition,t)){var r=Gb(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Kb(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function qb(e,t,n,r){return e instanceof Wb?function(e,t,n,r){if(!Fb(e.precondition,t))return n;var i=e.value.clone(),a=Qb(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Hb?function(e,t,n,r){if(!Fb(e.precondition,t))return n;var i=Qb(e.fieldTransforms,r,t),a=t.data;return a.setAll(Kb(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Fb(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function zb(e,t){var n,r=null,i=Cr(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Sb(a.transform,o||null);null!=u&&(null===r&&(r=Pk.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Bb(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&og(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Eb&&t instanceof Eb||e instanceof Nb&&t instanceof Nb?og(e.elements,t.elements,dk):e instanceof Pb&&t instanceof Pb?dk(e._t,t._t):e instanceof Tb&&t instanceof Tb}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Wb=function(e){Pr(n,e);var t=Lr(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Sr(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return Er(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Ub),Hb=function(e){Pr(n,e);var t=Lr(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Sr(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return Er(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Ub);function Kb(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Gb(e,t,n){var r=new Map;Wy(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Ib(o,u,n[i]))}return r}function Qb(e,t,n){var r,i=new Map,a=Cr(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,xb(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Yb,$b,Jb=function(e){Pr(n,e);var t=Lr(n);function n(e,r){var i;return Sr(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return Er(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Ub),Xb=function(e){Pr(n,e);var t=Lr(n);function n(e,r){var i;return Sr(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return Er(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Ub),Zb=Er((function e(t){Sr(this,e),this.count=t}));function ew(e){switch(e){default:return By();case Ky.CANCELLED:case Ky.UNKNOWN:case Ky.DEADLINE_EXCEEDED:case Ky.RESOURCE_EXHAUSTED:case Ky.INTERNAL:case Ky.UNAVAILABLE:case Ky.UNAUTHENTICATED:return!1;case Ky.INVALID_ARGUMENT:case Ky.NOT_FOUND:case Ky.ALREADY_EXISTS:case Ky.PERMISSION_DENIED:case Ky.FAILED_PRECONDITION:case Ky.ABORTED:case Ky.OUT_OF_RANGE:case Ky.UNIMPLEMENTED:case Ky.DATA_LOSS:return!0}}function tw(e){if(void 0===e)return jy("GRPC error has no .code"),Ky.UNKNOWN;switch(e){case Yb.OK:return Ky.OK;case Yb.CANCELLED:return Ky.CANCELLED;case Yb.UNKNOWN:return Ky.UNKNOWN;case Yb.DEADLINE_EXCEEDED:return Ky.DEADLINE_EXCEEDED;case Yb.RESOURCE_EXHAUSTED:return Ky.RESOURCE_EXHAUSTED;case Yb.INTERNAL:return Ky.INTERNAL;case Yb.UNAVAILABLE:return Ky.UNAVAILABLE;case Yb.UNAUTHENTICATED:return Ky.UNAUTHENTICATED;case Yb.INVALID_ARGUMENT:return Ky.INVALID_ARGUMENT;case Yb.NOT_FOUND:return Ky.NOT_FOUND;case Yb.ALREADY_EXISTS:return Ky.ALREADY_EXISTS;case Yb.PERMISSION_DENIED:return Ky.PERMISSION_DENIED;case Yb.FAILED_PRECONDITION:return Ky.FAILED_PRECONDITION;case Yb.ABORTED:return Ky.ABORTED;case Yb.OUT_OF_RANGE:return Ky.OUT_OF_RANGE;case Yb.UNIMPLEMENTED:return Ky.UNIMPLEMENTED;case Yb.DATA_LOSS:return Ky.DATA_LOSS;default:return By()}}($b=Yb||(Yb={}))[$b.OK=0]="OK",$b[$b.CANCELLED=1]="CANCELLED",$b[$b.UNKNOWN=2]="UNKNOWN",$b[$b.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$b[$b.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$b[$b.NOT_FOUND=5]="NOT_FOUND",$b[$b.ALREADY_EXISTS=6]="ALREADY_EXISTS",$b[$b.PERMISSION_DENIED=7]="PERMISSION_DENIED",$b[$b.UNAUTHENTICATED=16]="UNAUTHENTICATED",$b[$b.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$b[$b.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$b[$b.ABORTED=10]="ABORTED",$b[$b.OUT_OF_RANGE=11]="OUT_OF_RANGE",$b[$b.UNIMPLEMENTED=12]="UNIMPLEMENTED",$b[$b.INTERNAL=13]="INTERNAL",$b[$b.UNAVAILABLE=14]="UNAVAILABLE",$b[$b.DATA_LOSS=15]="DATA_LOSS";var nw=function(){function e(t,n){Sr(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return Er(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Cr(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){zg(this.inner,(function(t,n){var r,i=Cr(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Bg(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),rw=new Wg(pg.comparator);function iw(){return rw}var aw=new Wg(pg.comparator);function ow(){for(var e=aw,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function uw(e){var t=aw;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function sw(){return lw()}function cw(){return lw()}function lw(){return new nw((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var fw=new Wg(pg.comparator),hw=new Gg(pg.comparator);function dw(){for(var e=hw,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var pw=new Gg(ag);function vw(){return pw}var mw=function(){function e(t,n,r,i,a){Sr(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return Er(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,yw.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(cg.min(),r,vw(),iw(),dw())}}]),e}(),yw=function(){function e(t,n,r,i,a){Sr(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return Er(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Jg.EMPTY_BYTE_STRING,n,dw(),dw(),dw())}}]),e}(),gw=Er((function e(t,n,r,i){Sr(this,e),this.gt=t,this.removedTargetIds=n,this.key=r,this.yt=i})),kw=Er((function e(t,n){Sr(this,e),this.targetId=t,this.It=n})),bw=Er((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Jg.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Sr(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),ww=function(){function e(){Sr(this,e),this.Tt=0,this.Et=Iw(),this.At=Jg.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}return Er(e,[{key:"current",get:function(){return this.Rt}},{key:"resumeToken",get:function(){return this.At}},{key:"Pt",get:function(){return 0!==this.Tt}},{key:"vt",get:function(){return this.bt}},{key:"Vt",value:function(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}},{key:"St",value:function(){var e=dw(),t=dw(),n=dw();return this.Et.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:By()}})),new yw(this.At,this.Rt,e,t,n)}},{key:"Dt",value:function(){this.bt=!1,this.Et=Iw()}},{key:"Ct",value:function(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}},{key:"xt",value:function(e){this.bt=!0,this.Et=this.Et.remove(e)}},{key:"Nt",value:function(){this.Tt+=1}},{key:"kt",value:function(){this.Tt-=1}},{key:"Mt",value:function(){this.bt=!0,this.Rt=!0}}]),e}(),_w=function(){function e(t){Sr(this,e),this.Ot=t,this.Ft=new Map,this.$t=iw(),this.Bt=xw(),this.Lt=new Gg(ag)}return Er(e,[{key:"Ut",value:function(e){var t,n=Cr(e.gt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.yt&&e.yt.isFoundDocument()?this.qt(r,e.yt):this.Kt(r,e.key,e.yt)}}catch(u){n.e(u)}finally{n.f()}var i,a=Cr(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Kt(o,e.key,e.yt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Gt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Qt(n);switch(e.state){case 0:t.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||t.removeTarget(n);break;case 3:t.jt(n)&&(r.Mt(),r.Vt(e.resumeToken));break;case 4:t.jt(n)&&(t.Wt(n),r.Vt(e.resumeToken));break;default:By()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((function(e,r){n.jt(r)&&t(r)}))}},{key:"zt",value:function(e){var t=e.targetId,n=e.It.count,r=this.Ht(t);if(r){var i=r.target;if(Uk(i))if(0===n){var a=new pg(i.path);this.Kt(t,a,Ok.newNoDocument(a,cg.min()))}else Wy(1===n);else this.Jt(t)!==n&&(this.Wt(t),this.Lt=this.Lt.add(t))}}},{key:"Yt",value:function(e){var t=this,n=new Map;this.Ft.forEach((function(r,i){var a=t.Ht(i);if(a){if(r.current&&Uk(a.target)){var o=new pg(a.target.path);null!==t.$t.get(o)||t.Xt(i,o)||t.Kt(i,o,Ok.newNoDocument(o,e))}r.vt&&(n.set(i,r.St()),r.Dt())}}));var r=dw();this.Bt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Ht(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.$t.forEach((function(t,n){return n.setReadTime(e)}));var i=new mw(e,n,this.Lt,this.$t,r);return this.$t=iw(),this.Bt=xw(),this.Lt=new Gg(ag),i}},{key:"qt",value:function(e,t){if(this.jt(e)){var n=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,n),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}}},{key:"Kt",value:function(e,t,n){if(this.jt(e)){var r=this.Qt(e);this.Xt(e,t)?r.Ct(t,1):r.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),n&&(this.$t=this.$t.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Ft.delete(e)}},{key:"Jt",value:function(e){var t=this.Qt(e).St();return this.Ot.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Nt",value:function(e){this.Qt(e).Nt()}},{key:"Qt",value:function(e){var t=this.Ft.get(e);return t||(t=new ww,this.Ft.set(e,t)),t}},{key:"Zt",value:function(e){var t=this.Bt.get(e);return t||(t=new Gg(ag),this.Bt=this.Bt.insert(e,t)),t}},{key:"jt",value:function(e){var t=null!==this.Ht(e);return t||Vy("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Ht",value:function(e){var t=this.Ft.get(e);return t&&t.Pt?null:this.Ot.te(e)}},{key:"Wt",value:function(e){var t=this;this.Ft.set(e,new ww),this.Ot.getRemoteKeysForTarget(e).forEach((function(n){t.Kt(e,n,null)}))}},{key:"Xt",value:function(e,t){return this.Ot.getRemoteKeysForTarget(e).has(t)}}]),e}();function xw(){return new Wg(pg.comparator)}function Iw(){return new Wg(pg.comparator)}var Sw={asc:"ASCENDING",desc:"DESCENDING"},Tw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ew=Er((function e(t,n){Sr(this,e),this.databaseId=t,this.dt=n}));function Cw(e,t){return e.dt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Nw(e,t){return e.dt?t.toBase64():t.toUint8Array()}function Aw(e,t){return Cw(e,t.toTimestamp())}function Pw(e){return Wy(!!e),cg.fromTimestamp(function(e){var t=Zg(e);return new sg(t.seconds,t.nanos)}(e))}function Rw(e,t){return function(e){return new fg(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Ow(e){var t=fg.fromString(e);return Wy(n_(t)),t}function Dw(e,t){return Rw(e.databaseId,t.path)}function Lw(e,t){var n=Ow(t);if(n.get(1)!==e.databaseId.projectId)throw new Gy(Ky.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Gy(Ky.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new pg(Vw(n))}function Mw(e,t){return Rw(e.databaseId,t)}function Fw(e){var t=Ow(e);return 4===t.length?fg.emptyPath():Vw(t)}function Uw(e){return new fg(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Vw(e){return Wy(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function jw(e,t,n){return{name:Dw(e,t),fields:n.value.mapValue.fields}}function qw(e,t,n){var r=Lw(e,t.name),i=Pw(t.updateTime),a=new Pk({mapValue:{fields:t.fields}}),o=Ok.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function zw(e,t){return"found"in t?function(e,t){Wy(!!t.found),t.found.name,t.found.updateTime;var n=Lw(e,t.found.name),r=Pw(t.found.updateTime),i=new Pk({mapValue:{fields:t.found.fields}});return Ok.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Wy(!!t.missing),Wy(!!t.readTime);var n=Lw(e,t.missing),r=Pw(t.readTime);return Ok.newNoDocument(n,r)}(e,t):By()}function Bw(e,t){var n;if(t instanceof Wb)n={update:jw(e,t.key,t.value)};else if(t instanceof Jb)n={delete:Dw(e,t.key)};else if(t instanceof Hb)n={update:jw(e,t.key,t.data),updateMask:t_(t.fieldMask)};else{if(!(t instanceof Xb))return By();n={verify:Dw(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Tb)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Eb)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Nb)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Pb)return{fieldPath:t.field.canonicalString(),increment:n._t};throw By()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Aw(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:By()}(e,t.precondition)),n}function Ww(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Mb.updateTime(Pw(e.updateTime)):void 0!==e.exists?Mb.exists(e.exists):Mb.none()}(t.currentDocument):Mb.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Wy("REQUEST_TIME"===t.setToServerValue),n=new Tb;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Eb(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Nb(i)}else"increment"in t?n=new Pb(e,t.increment):By();var a=dg.fromServerFormat(t.fieldPath);return new Db(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Lw(e,t.update.name),a=new Pk({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new $g(t.map((function(e){return dg.fromServerFormat(e)})))}(t.updateMask);return new Hb(i,a,o,n,r)}return new Wb(i,a,n,r)}if(t.delete){var u=Lw(e,t.delete);return new Jb(u,n)}if(t.verify){var s=Lw(e,t.verify);return new Xb(s,n)}return By()}function Hw(e,t){return{documents:[Mw(e,t.path)]}}function Kw(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Mw(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Mw(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(xk(e.value))return{unaryFilter:{field:Jw(e.field),op:"IS_NAN"}};if(_k(e.value))return{unaryFilter:{field:Jw(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(xk(e.value))return{unaryFilter:{field:Jw(e.field),op:"IS_NOT_NAN"}};if(_k(e.value))return{unaryFilter:{field:Jw(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jw(e.field),op:$w(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Jw(e.field),direction:Yw(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.dt||uk(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Gw(e){var t=Fw(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Wy(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Qw(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Xk(Xw(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return uk(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Jk(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Jk(n,t)}(n.endAt)),rb(t,i,u,o,s,"F",c,l)}function Qw(e){return e?void 0!==e.unaryFilter?[e_(e)]:void 0!==e.fieldFilter?[Zw(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Qw(e)})).reduce((function(e,t){return e.concat(t)})):By():[]}function Yw(e){return Sw[e]}function $w(e){return Tw[e]}function Jw(e){return{fieldPath:e.canonicalString()}}function Xw(e){return dg.fromServerFormat(e.fieldPath)}function Zw(e){return zk.create(Xw(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return By()}}(e.fieldFilter.op),e.fieldFilter.value)}function e_(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Xw(e.unaryFilter.field);return zk.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Xw(e.unaryFilter.field);return zk.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Xw(e.unaryFilter.field);return zk.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Xw(e.unaryFilter.field);return zk.create(i,"!=",{nullValue:"NULL_VALUE"});default:return By()}}function t_(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function n_(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function r_(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=a_(t)),t=i_(e.get(n),t);return a_(t)}function i_(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function a_(e){return e+"\x01\x01"}function o_(e){var t=e.length;if(Wy(t>=2),2===t)return Wy("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),fg.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&By(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:By()}a=o+2}return new fg(r)}var u_=["userId","batchId"];function s_(e,t){return[e,r_(t)]}function c_(e,t,n){return[e,r_(t),n]}var l_={},f_=["prefixPath","collectionGroup","readTime","documentId"],h_=["prefixPath","collectionGroup","documentId"],d_=["collectionGroup","readTime","prefixPath","documentId"],p_=["canonicalId","targetId"],v_=["targetId","path"],m_=["path","targetId"],y_=["collectionId","parent"],g_=["indexId","uid"],k_=["uid","sequenceNumber"],b_=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],w_=["indexId","uid","orderedDocumentKey"],__=["userId","collectionPath","documentId"],x_=["userId","collectionPath","largestBatchId"],I_=["userId","collectionGroup","largestBatchId"],S_=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),T_=[].concat(Ri(S_),["documentOverlays"]),E_=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],C_=E_,N_=[].concat(C_,["indexConfiguration","indexState","indexEntries"]),A_=function(e){Pr(n,e);var t=Lr(n);function n(e,r){var i;return Sr(this,n),(i=t.call(this)).ee=e,i.currentSequenceNumber=r,i}return Er(n)}(Sg);function P_(e,t){var n=Hy(e);return Ag.N(n.ee,t)}var R_=function(){function e(t,n,r,i){Sr(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Er(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&jb(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=Cr(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=qb(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=Cr(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=qb(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=cw();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Vb(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(cg.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),dw())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&og(this.mutations,e.mutations,(function(e,t){return Bb(e,t)}))&&og(this.baseMutations,e.baseMutations,(function(e,t){return Bb(e,t)}))}}]),e}(),O_=function(){function e(t,n,r,i){Sr(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Er(e,null,[{key:"from",value:function(t,n,r){Wy(t.mutations.length===r.length);for(var i=fw,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),D_=function(){function e(t,n){Sr(this,e),this.largestBatchId=t,this.mutation=n}return Er(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),L_=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:cg.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:cg.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Jg.EMPTY_BYTE_STRING;Sr(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return Er(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),M_=Er((function e(t){Sr(this,e),this.ne=t}));function F_(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:U_(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Dw(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Cw(e,t.version.toTimestamp())}}(e.ne,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:V_(t.version)};else{if(!t.isUnknownDocument())return By();r.unknownDocument={path:n.path.toArray(),version:V_(t.version)}}return r}function U_(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function V_(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function j_(e){var t=new sg(e.seconds,e.nanoseconds);return cg.fromTimestamp(t)}function q_(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Ww(e.ne,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Ww(e.ne,t)})),u=sg.fromMillis(t.localWriteTimeMs);return new R_(t.batchId,u,n,o)}function z_(e){var t,n,r=j_(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?j_(e.lastLimboFreeSnapshotVersion):cg.min();return void 0!==e.query.documents?(Wy(1===(n=e.query).documents.length),t=lb(ib(Fw(n.documents[0])))):t=function(e){return lb(Gw(e))}(e.query),new L_(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Jg.fromBase64String(e.resumeToken))}function B_(e,t){var n,r=V_(t.snapshotVersion),i=V_(t.lastLimboFreeSnapshotVersion);n=Uk(t.target)?Hw(e.ne,t.target):Kw(e.ne,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Mk(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function W_(e){var t=Gw({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?fb(t,t.limit,"L"):t}function H_(e,t){return new D_(t.largestBatchId,Ww(e.ne,t.overlayMutation))}function K_(e,t){var n=t.path.lastSegment();return[e,r_(t.path.popLast()),n]}function G_(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:V_(r.readTime),documentKey:r_(r.documentKey.path),largestBatchId:r.largestBatchId}}var Q_=function(){function e(){Sr(this,e)}return Er(e,[{key:"getBundleMetadata",value:function(e,t){return Y_(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:j_(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Y_(e).put({bundleId:(n=t).id,createTime:V_(Pw(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return $_(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:W_(t.bundledQuery),readTime:j_(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return $_(e).put(function(e){return{name:e.name,readTime:V_(Pw(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Y_(e){return P_(e,"bundles")}function $_(e){return P_(e,"namedQueries")}var J_=function(){function e(t,n){Sr(this,e),this.wt=t,this.userId=n}return Er(e,[{key:"getOverlay",value:function(e,t){var n=this;return X_(e).get(K_(this.userId,t)).next((function(e){return e?H_(n.wt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=sw();return Cg.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new D_(t,a);i.push(r.ie(e,o))})),Cg.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(r_(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(X_(e).W("collectionPathOverlayIndex",i))})),Cg.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=sw(),a=r_(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return X_(e).K("collectionPathOverlayIndex",o).next((function(e){var t,n=Cr(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=H_(r.wt,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=sw(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return X_(e).J({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=H_(a.wt,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ie",value:function(e,t){return X_(e).put(function(e,t,n){var r=c(K_(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Bw(e.ne,n.mutation)}}(this.wt,this.userId,t))}}],[{key:"se",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function X_(e){return P_(e,"documentOverlays")}var Z_=function(){function e(){Sr(this,e)}return Er(e,[{key:"re",value:function(e,t){this.oe(e,t),t.ue()}},{key:"oe",value:function(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(ek(e.integerValue));else if("doubleValue"in e){var n=ek(e.doubleValue);isNaN(n)?this.ce(t,13):(this.ce(t,15),sk(n)?t.ae(0):t.ae(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he("".concat(r.seconds||"")),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(tk(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ce(t,45),t.ae(i.latitude||0),t.ae(i.longitude||0)}else"mapValue"in e?Tk(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):By()}},{key:"le",value:function(e,t){this.ce(t,25),this.ge(e,t)}},{key:"ge",value:function(e,t){t.he(e)}},{key:"we",value:function(e,t){var n=e.fields||{};this.ce(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.le(a,t),this.oe(n[a],t)}}},{key:"me",value:function(e,t){var n=e.values||[];this.ce(t,50);var r,i=Cr(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.oe(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ce(t,37),pg.fromName(e).path.forEach((function(e){n.ce(t,60),n.ge(e,t)}))}},{key:"ce",value:function(e,t){e.ae(t)}},{key:"fe",value:function(e){e.ae(2)}}]),e}();function ex(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function tx(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=ex(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Z_.ye=new Z_;var nx=function(){function e(){Sr(this,e),this.buffer=new Uint8Array(1024),this.position=0}return Er(e,[{key:"pe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ie(n.value),n=t.next();this.Te()}},{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){var t,n=Cr(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ie(i);else if(i<2048)this.Ie(960|i>>>6),this.Ie(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ie(480|i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i);else{var a=r.codePointAt(0);this.Ie(240|a>>>18),this.Ie(128|63&a>>>12),this.Ie(128|63&a>>>6),this.Ie(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Te()}},{key:"Pe",value:function(e){var t,n=Cr(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var a=r.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Re()}},{key:"ve",value:function(e){var t=this.Ve(e),n=tx(t);this.Se(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"De",value:function(e){var t=this.Ve(e),n=tx(t);this.Se(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Ce",value:function(){this.xe(255),this.xe(255)}},{key:"Ne",value:function(){this.ke(255),this.ke(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Me",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ve",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ie",value:function(e){var t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}},{key:"Te",value:function(){this.xe(0),this.xe(1)}},{key:"Re",value:function(){this.ke(0),this.ke(1)}},{key:"xe",value:function(e){this.Se(1),this.buffer[this.position++]=e}},{key:"ke",value:function(e){this.Se(1),this.buffer[this.position++]=~e}},{key:"Se",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),rx=function(){function e(t){Sr(this,e),this.Oe=t}return Er(e,[{key:"de",value:function(e){this.Oe.pe(e)}},{key:"he",value:function(e){this.Oe.be(e)}},{key:"ae",value:function(e){this.Oe.ve(e)}},{key:"ue",value:function(){this.Oe.Ce()}}]),e}(),ix=function(){function e(t){Sr(this,e),this.Oe=t}return Er(e,[{key:"de",value:function(e){this.Oe.Ee(e)}},{key:"he",value:function(e){this.Oe.Pe(e)}},{key:"ae",value:function(e){this.Oe.De(e)}},{key:"ue",value:function(){this.Oe.Ne()}}]),e}(),ax=function(){function e(){Sr(this,e),this.Oe=new nx,this.Fe=new rx(this.Oe),this.$e=new ix(this.Oe)}return Er(e,[{key:"seed",value:function(e){this.Oe.seed(e)}},{key:"Be",value:function(e){return 0===e?this.Fe:this.$e}},{key:"Me",value:function(){return this.Oe.Me()}},{key:"reset",value:function(){this.Oe.reset()}}]),e}(),ox=function(){function e(t,n,r,i){Sr(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return Er(e,[{key:"Le",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function ux(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=sx(e.arrayValue,t.arrayValue))?n:0!==(n=sx(e.directionalValue,t.directionalValue))?n:pg.comparator(e.documentKey,t.documentKey)}function sx(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var cx=function(){function e(t){Sr(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.qe=[];var n,r=Cr(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.ht()?this.Ke=i:this.qe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return Er(e,[{key:"Ge",value:function(e){var t=mg(e);if(void 0!==t&&!this.Qe(t))return!1;for(var n=yg(e),r=0,i=0;r<n.length&&this.Qe(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ke){var a=n[r];if(!this.je(this.Ke,a)||!this.We(this.Ue[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ue.length||!this.We(this.Ue[i++],o))return!1}return!0}},{key:"Qe",value:function(e){var t,n=Cr(this.qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"We",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),lx=function(){function e(){Sr(this,e),this.ze=new fx}return Er(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.ze.add(t),Cg.resolve()}},{key:"getCollectionParents",value:function(e,t){return Cg.resolve(this.ze.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Cg.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Cg.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Cg.resolve(null)}},{key:"getIndexType",value:function(e,t){return Cg.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Cg.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Cg.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Cg.resolve(_g.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Cg.resolve(_g.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Cg.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Cg.resolve()}}]),e}(),fx=function(){function e(){Sr(this,e),this.index={}}return Er(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Gg(fg.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Gg(fg.comparator)).toArray()}}]),e}(),hx=new Uint8Array(0),dx=function(){function e(t,n){Sr(this,e),this.user=t,this.databaseId=n,this.He=new fx,this.Je=new nw((function(e){return Mk(e)}),(function(e,t){return Fk(e,t)})),this.uid=t.uid||""}return Er(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.He.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.He.add(t)}));var a={collectionId:r,parent:r_(i)};return px(e).put(a)}return Cg.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[ug(t),""],!1,!0);return px(e).K(r).next((function(e){var r,i=Cr(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(o_(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=mx(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=yx(e);return a.next((function(e){o.put(G_(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=mx(e),r=yx(e),i=vx(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=vx(e),i=!0,a=new Map;return Cg.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=dw(),o=[];return Cg.forEach(a,(function(i,a){var u;Vy("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Mk(t)));var s=function(e,t){var n=mg(t);if(void 0===n)return null;var r,i=Cr(Vk(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=Cr(yg(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=Cr(Vk(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=Cr(yg(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?jk(e,o.fieldPath,e.startAt):qk(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Jk(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=Cr(yg(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?qk(e,o.fieldPath,e.endAt):jk(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Jk(r,i)}(a,i),h=n.Ze(i,a,l),d=n.Ze(i,a,f),p=n.tn(i,a,c),v=n.en(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return Cg.forEach(v,(function(n){return r.j(n,t.limit).next((function(t){t.forEach((function(t){var n=pg.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Cg.resolve(null)}))}},{key:"Ye",value:function(e){var t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}},{key:"en",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.nn(t[s/c]):hx,h=u.sn(e,f,n[s%c],r),d=u.rn(e,f,i[s%c],a),p=o.map((function(t){return u.sn(e,f,t,!0)}));l.push.apply(l,Ri(u.createRange(h,d,p)))},h=0;h<s;++h)f(h);return l}},{key:"sn",value:function(e,t,n,r){var i=new ox(e,pg.empty(),t,n);return r?i:i.Le()}},{key:"rn",value:function(e,t,n,r){var i=new ox(e,pg.empty(),t,n);return r?i.Le():i}},{key:"Xe",value:function(e,t){var n=new cx(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=Cr(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.Ge(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return Cg.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Gg(dg.comparator),r=!1,i=Cr(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=Cr(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"on",value:function(e,t){var n,r=new ax,i=Cr(yg(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Be(a.kind);Z_.ye.re(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Me()}},{key:"nn",value:function(e){var t=new ax;return Z_.ye.re(e,t.Be(0)),t.Me()}},{key:"un",value:function(e,t){var n=new ax;return Z_.ye.re(kk(this.databaseId,t),n.Be(function(e){var t=yg(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Me()}},{key:"tn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new ax);var i,a=0,o=Cr(yg(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=Cr(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.cn(t,s.fieldPath)&&wk(c))r=this.an(r,s,c);else{var h=f.Be(s.kind);Z_.ye.re(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.hn(r)}},{key:"Ze",value:function(e,t,n){return this.tn(e,t,n.position)}},{key:"hn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Me();return t}},{key:"an",value:function(e,t,n){var r,i=Ri(e),a=[],o=Cr(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=Cr(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new ax;f.seed(l.Me()),Z_.ye.re(s,f.Be(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"cn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof zk&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=mx(e),i=yx(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next((function(e){var t=[];return Cg.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new kg(t.sequenceNumber,new _g(j_(t.readTime),new pg(o_(t.documentKey)),t.largestBatchId)):kg.empty(),r=e.fields.map((function(e){var t=c(e,2),n=t[0],r=t[1];return new gg(dg.fromServerFormat(n),r)}));return new vg(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:ag(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=mx(e),a=yx(e);return this.ln(e).next((function(e){return i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Cg.forEach(t,(function(t){return a.put(G_(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Cg.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Cg.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Cg.forEach(a,(function(r){return n.fn(e,t,r).next((function(t){var a=n.dn(i,r);return t.isEqual(a)?Cg.resolve():n._n(e,i,r,t,a)}))}))}))}))}},{key:"wn",value:function(e,t,n,r){return vx(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.un(n,t.key),documentKey:t.key.path.toArray()})}},{key:"mn",value:function(e,t,n,r){return vx(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.un(n,t.key),t.key.path.toArray()])}},{key:"fn",value:function(e,t,n){var r=vx(e),i=new Gg(ux);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.un(n,t)])},(function(e,r){i=i.add(new ox(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"dn",value:function(e,t){var n=new Gg(ux),r=this.on(t,e);if(null==r)return n;var i=mg(t);if(null!=i){var a=e.data.field(i.fieldPath);if(wk(a)){var o,u=Cr(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new ox(t.indexId,e.key,this.nn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new ox(t.indexId,e.key,hx,r));return n}},{key:"_n",value:function(e,t,n,r,i){var a=this;Vy("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Yg(a),s=Yg(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Yg(o)):l?(i(u),u=Yg(a)):(u=Yg(a),s=Yg(o))}}(r,i,ux,(function(r){o.push(a.wn(e,t,n,r))}),(function(r){o.push(a.mn(e,t,n,r))})),Cg.waitFor(o)}},{key:"ln",value:function(e){var t=1;return yx(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return ux(e,t)})).filter((function(e,t,n){return!t||0!==ux(e,n[t-1])}));var r=[];r.push(e);var i,a=Cr(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=ux(o,e),s=ux(o,t);if(0===u)r[0]=e.Le();else if(u>0&&s<0)r.push(o),r.push(o.Le());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,hx,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,hx,[]]));return c}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(gx)}},{key:"getMinOffset",value:function(e,t){var n=this;return Cg.mapArray(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){return e||By()}))})).next(gx)}}]),e}();function px(e){return P_(e,"collectionParents")}function vx(e){return P_(e,"indexEntries")}function mx(e){return P_(e,"indexConfiguration")}function yx(e){return P_(e,"indexState")}function gx(e){Wy(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;xg(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new _g(t.readTime,t.documentKey,n)}var kx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bx=function(){function e(t,n,r){Sr(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Er(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function wx(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.J({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Wy(1===u)})));var c,l=[],f=Cr(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=c_(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Cg.waitFor(a).next((function(){return l}))}function _x(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw By();t=e.noDocument}return JSON.stringify(t).length}bx.DEFAULT_COLLECTION_PERCENTILE=10,bx.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bx.DEFAULT=new bx(41943040,bx.DEFAULT_COLLECTION_PERCENTILE,bx.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bx.DISABLED=new bx(-1,0,0);var xx=function(){function e(t,n,r,i){Sr(this,e),this.userId=t,this.wt=n,this.indexManager=r,this.referenceDelegate=i,this.gn={}}return Er(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Sx(e).J({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Tx(e),o=Sx(e);return o.add({}).next((function(u){Wy("number"==typeof u);var s,c=new R_(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Bw(e.ne,t)})),i=n.mutations.map((function(t){return Bw(e.ne,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.wt,i.userId,c),f=[],h=new Gg((function(e,t){return ag(e.canonicalString(),t.canonicalString())})),d=Cr(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=c_(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,l_))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.gn[u]=c.keys()})),Cg.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Sx(e).get(t).next((function(e){return e?(Wy(e.userId===n.userId),q_(n.wt,e)):null}))}},{key:"yn",value:function(e,t){var n=this;return this.gn[t]?Cg.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.gn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Sx(e).J({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Wy(t.batchId>=r),a=q_(n.wt,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Sx(e).J({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Sx(e).K("userMutationsIndex",n).next((function(e){return e.map((function(e){return q_(t.wt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=s_(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Tx(e).J({range:i},(function(r,i,o){var u=c(r,3),s=u[0],l=u[1],f=u[2],h=o_(l);if(s===n.userId&&t.path.isEqual(h))return Sx(e).get(f).next((function(e){if(!e)throw By();Wy(e.userId===n.userId),a.push(q_(n.wt,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Gg(ag),i=[];return t.forEach((function(t){var a=s_(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Tx(e).J({range:o},(function(e,i,a){var o=c(e,3),u=o[0],s=o[1],l=o[2],f=o_(s);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),Cg.waitFor(i).next((function(){return n.pn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=s_(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Gg(ag);return Tx(e).J({range:o},(function(e,t,a){var o=c(e,3),s=o[0],l=o[1],f=o[2],h=o_(l);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.pn(e,u)}))}},{key:"pn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Sx(e).get(t).next((function(e){if(null===e)throw By();Wy(e.userId===n.userId),r.push(q_(n.wt,e))})))})),Cg.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return wx(e.ee,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.In(t.batchId)})),Cg.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"In",value:function(e){delete this.gn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Cg.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Tx(e).J({range:r},(function(e,n,r){if(e[0]===t.userId){var a=o_(e[1]);i.push(a)}else r.done()})).next((function(){Wy(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Ix(e,this.userId,t)}},{key:"Tn",value:function(e){var t=this;return Ex(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"se",value:function(t,n,r,i){return Wy(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Ix(e,t,n){var r=s_(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Tx(e).J({range:a,H:!0},(function(e,n,r){var a=c(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Sx(e){return P_(e,"mutations")}function Tx(e){return P_(e,"documentMutations")}function Ex(e){return P_(e,"mutationQueues")}var Cx=function(){function e(t){Sr(this,e),this.En=t}return Er(e,[{key:"next",value:function(){return this.En+=2,this.En}}],[{key:"An",value:function(){return new e(0)}},{key:"Rn",value:function(){return new e(-1)}}]),e}(),Nx=function(){function e(t,n){Sr(this,e),this.referenceDelegate=t,this.wt=n}return Er(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.bn(e).next((function(n){var r=new Cx(n.highestTargetId);return n.highestTargetId=r.next(),t.Pn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.bn(e).next((function(e){return cg.fromTimestamp(new sg(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.bn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.bn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Pn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.vn(e,t).next((function(){return n.bn(e).next((function(r){return r.targetCount+=1,n.Vn(t,r),n.Pn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.vn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Ax(e).delete(t.targetId)})).next((function(){return n.bn(e)})).next((function(t){return Wy(t.targetCount>0),t.targetCount-=1,n.Pn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Ax(e).J((function(o,u){var s=z_(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Cg.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Ax(e).J((function(e,n){var r=z_(n);t(r)}))}},{key:"bn",value:function(e){return Px(e).get("targetGlobalKey").next((function(e){return Wy(null!==e),e}))}},{key:"Pn",value:function(e,t){return Px(e).put("targetGlobalKey",t)}},{key:"vn",value:function(e,t){return Ax(e).put(B_(this.wt,t))}},{key:"Vn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.bn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Mk(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Ax(e).J({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=z_(n);Fk(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Rx(e);return t.forEach((function(t){var o=r_(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Cg.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Rx(e);return Cg.forEach(t,(function(t){var a=r_(t.path);return Cg.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Rx(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Rx(e),i=dw();return r.J({range:n,H:!0},(function(e,t,n){var r=o_(e[1]),a=new pg(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=r_(t.path),r=IDBKeyRange.bound([n],[ug(n)],!1,!0),i=0;return Rx(e).J({index:"documentTargetsIndex",H:!0,range:r},(function(e,t,n){var r=c(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"te",value:function(e,t){return Ax(e).get(t).next((function(e){return e?z_(e):null}))}}]),e}();function Ax(e){return P_(e,"targets")}function Px(e){return P_(e,"targetGlobal")}function Rx(e){return P_(e,"targetDocuments")}function Ox(e,t){var n=c(e,2),r=n[0],i=n[1],a=c(t,2),o=a[0],u=a[1],s=ag(r,o);return 0===s?ag(i,u):s}var Dx=function(){function e(t){Sr(this,e),this.Sn=t,this.buffer=new Gg(Ox),this.Dn=0}return Er(e,[{key:"Cn",value:function(){return++this.Dn}},{key:"xn",value:function(e){var t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Ox(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Lx=function(){function e(t,n,r){Sr(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Nn=null}return Er(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}},{key:"stop",value:function(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}},{key:"started",get:function(){return null!==this.Nn}},{key:"kn",value:function(e){var t=this;Vy("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Nn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Og(e.t0)){e.next=12;break}Vy("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Tg(e.t0);case 14:return e.next=16,t.kn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Mx=function(){function e(t,n){Sr(this,e),this.Mn=t,this.params=n}return Er(e,[{key:"calculateTargetCount",value:function(e,t){return this.Mn.On(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Cg.resolve(jg.ot);var r=new Dx(t);return this.Mn.forEachTarget(e,(function(e){return r.xn(e.sequenceNumber)})).next((function(){return n.Mn.Fn(e,(function(e){return r.xn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Mn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Mn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Vy("LruGarbageCollector","Garbage collection skipped; disabled"),Cg.resolve(kx)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Vy("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),kx):n.$n(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Mn.getCacheSize(e)}},{key:"$n",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Vy("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Uy()<=Fi.DEBUG&&Vy("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Cg.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Fx=function(){function e(t,n){Sr(this,e),this.db=t,this.garbageCollector=function(e,t){return new Mx(e,t)}(this,n)}return Er(e,[{key:"On",value:function(e){var t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Bn",value:function(e){var t=0;return this.Fn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Fn",value:function(e,t){return this.Ln(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Ux(e,n)}},{key:"removeReference",value:function(e,t,n){return Ux(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Ux(e,t)}},{key:"Un",value:function(e,t){return function(e,t){var n=!1;return Ex(e).Y((function(r){return Ix(e,r,t).next((function(e){return e&&(n=!0),Cg.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Ln(e,(function(o,u){if(u<=t){var s=n.Un(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,cg.min()),Rx(e).delete([0,r_(o.path)])}))}));i.push(s)}})).next((function(){return Cg.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Ux(e,t)}},{key:"Ln",value:function(e,t){var n,r=Rx(e),i=jg.ot;return r.J({index:"documentTargetsIndex"},(function(e,r){var a=c(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==jg.ot&&t(new pg(o_(n)),i),i=s,n=u):i=jg.ot})).next((function(){i!==jg.ot&&t(new pg(o_(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Ux(e,t){return Rx(e).put(function(e,t){return{targetId:0,path:r_(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Vx=function(){function e(){Sr(this,e),this.changes=new nw((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return Er(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Ok.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Cg.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),jx=function(){function e(t){Sr(this,e),this.wt=t}return Er(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Wx(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Wx(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],U_(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Ok.newInvalidDocument(t);return Wx(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Hx(t))},(function(e,i){r=n.Kn(t,i)})).next((function(){return r}))}},{key:"Gn",value:function(e,t){var n=this,r={size:0,document:Ok.newInvalidDocument(t)};return Wx(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Hx(t))},(function(e,i){r={document:n.Kn(t,i),size:_x(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=iw();return this.Qn(e,t,(function(e,t){var i=n.Kn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"jn",value:function(e,t){var n=this,r=iw(),i=new Wg(pg.comparator);return this.Qn(e,t,(function(e,t){var a=n.Kn(e,t);r=r.insert(e,a),i=i.insert(e,_x(t))})).next((function(){return{documents:r,Wn:i}}))}},{key:"Qn",value:function(e,t,n){if(t.isEmpty())return Cg.resolve();var r=new Gg(Gx);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Hx(r.first()),Hx(r.last())),a=r.getIterator(),o=a.getNext();return Wx(e).J({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=pg.fromSegments([].concat(Ri(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Gx(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.q(Hx(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),U_(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wx(e).K(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=iw(),i=Cr(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.Kn(pg.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=iw(),o=Kx(t,n),u=Kx(t,_g.max());return Wx(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Kn(pg.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new zx(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Bx(e).get("remoteDocumentGlobalKey").next((function(e){return Wy(!!e),e}))}},{key:"qn",value:function(e,t){return Bx(e).put("remoteDocumentGlobalKey",t)}},{key:"Kn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=qw(e.ne,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=pg.fromSegments(t.noDocument.path),i=j_(t.noDocument.readTime);n=Ok.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return By();var a=pg.fromSegments(t.unknownDocument.path),o=j_(t.unknownDocument.version);n=Ok.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new sg(e[0],e[1]);return cg.fromTimestamp(t)}(t.readTime)),n}(this.wt,t);if(!n.isNoDocument()||!n.version.isEqual(cg.min()))return n}return Ok.newInvalidDocument(e)}}]),e}();function qx(e){return new jx(e)}var zx=function(e){Pr(n,e);var t=Lr(n);function n(e,r){var i;return Sr(this,n),(i=t.call(this)).zn=e,i.trackRemovals=r,i.Hn=new nw((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return Er(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Gg((function(e,t){return ag(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Hn.get(a);if(n.push(t.zn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=F_(t.zn.wt,o);i=i.add(a.path.popLast());var c=_x(s);r+=c-u.size,n.push(t.zn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=F_(t.zn.wt,o.convertToNoDocument(cg.min()));n.push(t.zn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.zn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.zn.updateMetadata(e,r)),Cg.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.zn.Gn(e,t).next((function(e){return n.Hn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.zn.jn(e,t).next((function(e){var t=e.documents;return e.Wn.forEach((function(e,r){n.Hn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Vx);function Bx(e){return P_(e,"remoteDocumentGlobal")}function Wx(e){return P_(e,"remoteDocumentsV14")}function Hx(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Kx(e,t){var n=t.documentKey.path.toArray();return[e,U_(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Gx(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=ag(n[a],r[a]))return i;return(i=ag(n.length,r.length))||((i=ag(n[n.length-2],r[r.length-2]))||ag(n[n.length-1],r[r.length-1]))}var Qx=Er((function e(t,n){Sr(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Yx=function(){function e(t,n,r,i){Sr(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return Er(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&qb(r.mutation,e,$g.empty(),sg.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,dw()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dw(),i=sw();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=ow();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=sw();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,dw())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=iw(),a=lw(),o=lw();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Hb)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),qb(o.mutation,t,o.mutation.getFieldMask(),sg.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Qx(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=lw(),i=new Wg((function(e,t){return e-t})),a=dw();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=Cr(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||$g.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||dw()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=cw();c.forEach((function(e){if(!a.has(e)){var n=Vb(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Cg.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return pg.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):sb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Cg.resolve(sw()),u=-1,s=a;return o.next((function(t){return Cg.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Cg.resolve():i.getBaseDocument(e,t,n).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,dw())})).next((function(e){return{batchId:u,changes:uw(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new pg(t)).next((function(e){var t=ow();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=ow();return this.indexManager.getCollectionParents(e,i).next((function(o){return Cg.forEach(o,(function(o){var u=function(e,t){return new nb(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,Ok.newInvalidDocument(n)))}));var n=ow();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&qb(a.mutation,i,$g.empty(),sg.now()),vb(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):Cg.resolve(Ok.newInvalidDocument(t))}}]),e}(),$x=function(){function e(t){Sr(this,e),this.wt=t,this.Jn=new Map,this.Yn=new Map}return Er(e,[{key:"getBundleMetadata",value:function(e,t){return Cg.resolve(this.Jn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Jn.set(t.id,{id:(n=t).id,version:n.version,createTime:Pw(n.createTime)}),Cg.resolve()}},{key:"getNamedQuery",value:function(e,t){return Cg.resolve(this.Yn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Yn.set(t.name,function(e){return{name:e.name,query:W_(e.bundledQuery),readTime:Pw(e.readTime)}}(t)),Cg.resolve()}}]),e}(),Jx=function(){function e(){Sr(this,e),this.overlays=new Wg(pg.comparator),this.Xn=new Map}return Er(e,[{key:"getOverlay",value:function(e,t){return Cg.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=sw();return Cg.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ie(e,t,i)})),Cg.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Xn.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Xn.delete(n)),Cg.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=sw(),i=t.length+1,a=new pg(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Cg.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Wg((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=sw(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=sw(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Cg.resolve(s)}},{key:"ie",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Xn.get(r.largestBatchId).delete(n.key);this.Xn.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new D_(t,n));var a=this.Xn.get(t);void 0===a&&(a=dw(),this.Xn.set(t,a)),this.Xn.set(t,a.add(n.key))}}]),e}(),Xx=function(){function e(){Sr(this,e),this.Zn=new Gg(Zx.ts),this.es=new Gg(Zx.ns)}return Er(e,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Zx(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}},{key:"ss",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.rs(new Zx(e,t))}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new pg(new fg([])),r=new Zx(n,e),i=new Zx(n,e+1),a=[];return this.es.forEachInRange([r,i],(function(e){t.rs(e),a.push(e.key)})),a}},{key:"cs",value:function(){var e=this;this.Zn.forEach((function(t){return e.rs(t)}))}},{key:"rs",value:function(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}},{key:"hs",value:function(e){var t=new pg(new fg([])),n=new Zx(t,e),r=new Zx(t,e+1),i=dw();return this.es.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Zx(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Zx=function(){function e(t,n){Sr(this,e),this.key=t,this.ls=n}return Er(e,null,[{key:"ts",value:function(e,t){return pg.comparator(e.key,t.key)||ag(e.ls,t.ls)}},{key:"ns",value:function(e,t){return ag(e.ls,t.ls)||pg.comparator(e.key,t.key)}}]),e}(),eI=function(){function e(t,n){Sr(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new Gg(Zx.ts)}return Er(e,[{key:"checkEmpty",value:function(e){return Cg.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new R_(i,t,n,r);this.mutationQueue.push(a);var o,u=Cr(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.ds=this.ds.add(new Zx(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Cg.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Cg.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ws(n),i=r<0?0:r;return Cg.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Cg.resolve(0===this.mutationQueue.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(e){return Cg.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Zx(t,0),i=new Zx(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],(function(e){var t=n._s(e.ls);a.push(t)})),Cg.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Gg(ag);return t.forEach((function(e){var t=new Zx(e,0),i=new Zx(e,Number.POSITIVE_INFINITY);n.ds.forEachInRange([t,i],(function(e){r=r.add(e.ls)}))})),Cg.resolve(this.gs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;pg.isDocumentKey(i)||(i=i.child(""));var a=new Zx(new pg(i),0),o=new Gg(ag);return this.ds.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)}),a),Cg.resolve(this.gs(o))}},{key:"gs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Wy(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();var r=this.ds;return Cg.forEach(t.mutations,(function(i){var a=new Zx(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ds=r}))}},{key:"In",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Zx(t,0),r=this.ds.firstAfterOrEqual(n);return Cg.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Cg.resolve()}},{key:"ys",value:function(e,t){return this.ws(e)}},{key:"ws",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"_s",value:function(e){var t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),tI=function(){function e(t){Sr(this,e),this.ps=t,this.docs=new Wg(pg.comparator),this.size=0}return Er(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ps(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Cg.resolve(n?n.document.mutableCopy():Ok.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=iw();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Ok.newInvalidDocument(e))})),Cg.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=iw(),i=new pg(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||xg(wg(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Cg.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){By()}},{key:"Is",value:function(e,t){return Cg.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new nI(this)}},{key:"getSize",value:function(e){return Cg.resolve(this.size)}}]),e}(),nI=function(e){Pr(n,e);var t=Lr(n);function n(e){var r;return Sr(this,n),(r=t.call(this)).zn=e,r}return Er(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.zn.addEntry(e,i)):t.zn.removeEntry(r)})),Cg.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.zn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.zn.getEntries(e,t)}}]),n}(Vx),rI=function(){function e(t){Sr(this,e),this.persistence=t,this.Ts=new nw((function(e){return Mk(e)}),Fk),this.lastRemoteSnapshotVersion=cg.min(),this.highestTargetId=0,this.Es=0,this.As=new Xx,this.targetCount=0,this.Rs=Cx.An()}return Er(e,[{key:"forEachTarget",value:function(e,t){return this.Ts.forEach((function(e,n){return t(n)})),Cg.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Cg.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Cg.resolve(this.Es)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Rs.next(),Cg.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Es&&(this.Es=t),Cg.resolve()}},{key:"vn",value:function(e){this.Ts.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Rs=new Cx(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.vn(t),this.targetCount+=1,Cg.resolve()}},{key:"updateTargetData",value:function(e,t){return this.vn(t),Cg.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,Cg.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Ts.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Ts.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Cg.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Cg.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Ts.get(t)||null;return Cg.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.As.ss(t,n),Cg.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.As.os(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Cg.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.As.us(t),Cg.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.As.hs(t);return Cg.resolve(n)}},{key:"containsKey",value:function(e,t){return Cg.resolve(this.As.containsKey(t))}}]),e}(),iI=function(){function e(t,n){var r=this;Sr(this,e),this.bs={},this.overlays={},this.Ps=new jg(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new rI(this),this.indexManager=new lx,this.remoteDocumentCache=new tI((function(e){return r.referenceDelegate.Ss(e)})),this.wt=new M_(n),this.Ds=new $x(this.wt)}return Er(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.vs=!1,Promise.resolve()}},{key:"started",get:function(){return this.vs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Jx,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.bs[e.toKey()];return n||(n=new eI(t,this.referenceDelegate),this.bs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;Vy("MemoryPersistence","Starting transaction:",e);var i=new aI(this.Ps.next());return this.referenceDelegate.Cs(),n(i).next((function(e){return r.referenceDelegate.xs(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ns",value:function(e,t){return Cg.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),aI=function(e){Pr(n,e);var t=Lr(n);function n(e){var r;return Sr(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return Er(n)}(Sg),oI=function(){function e(t){Sr(this,e),this.persistence=t,this.ks=new Xx,this.Ms=null}return Er(e,[{key:"Fs",get:function(){if(this.Ms)return this.Ms;throw By()}},{key:"addReference",value:function(e,t,n){return this.ks.addReference(n,t),this.Fs.delete(n.toString()),Cg.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ks.removeReference(n,t),this.Fs.add(n.toString()),Cg.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Fs.add(t.toString()),Cg.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ks.us(t.targetId).forEach((function(e){return n.Fs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Fs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Cs",value:function(){this.Ms=new Set}},{key:"xs",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Cg.forEach(this.Fs,(function(r){var i=pg.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i,cg.min())}))})).next((function(){return t.Ms=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.Fs.delete(t.toString()):n.Fs.add(t.toString())}))}},{key:"Ss",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return Cg.or([function(){return Cg.resolve(n.ks.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ns(e,t)}])}}],[{key:"Os",value:function(t){return new e(t)}}]),e}(),uI=function(){function e(t){Sr(this,e),this.wt=t}return Er(e,[{key:"M",value:function(e,t,n,r){var i=this,a=new Ng("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",u_,{unique:!0}),e.createObjectStore("documentMutations")}(e),sI(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Cg.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),sI(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:cg.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").K().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",u_,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Cg.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Bs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ls(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Us(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Ks(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:__});t.createIndex("collectionPathOverlayIndex",x_,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",I_,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:f_});t.createIndex("documentKeyIndex",h_),t.createIndex("collectionGroupIndex",d_)}(e)})).next((function(){return i.Gs(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.Qs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:g_}).createIndex("sequenceNumberIndex",k_,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:b_}).createIndex("documentKeyIndex",w_,{unique:!1})}(e)}))),o}},{key:"Ls",value:function(e){var t=0;return e.store("remoteDocuments").J((function(e,n){t+=_x(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Bs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.K().next((function(n){return Cg.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",i).next((function(r){return Cg.forEach(r,(function(r){Wy(r.userId===n.userId);var i=q_(t.wt,r);return wx(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Us",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.J((function(n,i){var a=new fg(n),o=function(e){return[0,r_(e)]}(a);r.push(t.get(o).next((function(n){return n?Cg.resolve():function(n){return t.put({targetId:0,path:r_(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Cg.waitFor(r)}))}))}},{key:"qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:y_});var n=t.store("collectionParents"),r=new fx,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:r_(i)})}};return t.store("remoteDocuments").J({H:!0},(function(e,t){var n=new fg(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").J({H:!0},(function(e,t){var n=c(e,3),r=(n[0],n[1]),a=(n[2],o_(r));return i(a.popLast())}))}))}},{key:"Ks",value:function(e){var t=this,n=e.store("targets");return n.J((function(e,r){var i=z_(r),a=B_(t.wt,i);return n.put(a)}))}},{key:"Gs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.J((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new pg(fg.fromString(i.document.name).popFirst(5)):i.noDocument?pg.fromSegments(i.noDocument.path):i.unknownDocument?pg.fromSegments(i.unknownDocument.path):By()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Cg.waitFor(r)}))}},{key:"Qs",value:function(e,t){var n=this,r=t.store("mutations"),i=qx(this.wt),a=new iI(oI.Os,this.wt.ne);return r.K().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:dw();q_(n.wt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Cg.forEach(r,(function(e,r){var o=new Ly(r),u=J_.se(n.wt,o),s=a.getIndexManager(o),c=xx.se(o,n.wt,s,a.referenceDelegate);return new Yx(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new A_(t,jg.ot),e).next()}))}))}}]),e}();function sI(e){e.createObjectStore("targetDocuments",{keyPath:v_}).createIndex("documentTargetsIndex",m_,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",p_,{unique:!0}),e.createObjectStore("targetGlobal")}var cI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",lI=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(Sr(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.js=a,this.window=o,this.document=u,this.Ws=c,this.zs=l,this.Hs=f,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=function(e){return Promise.resolve()},!e.V())throw new Gy(Ky.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Fx(this,i),this.ei=n+"main",this.wt=new M_(s),this.ni=new Ag(this.ei,this.Hs,new uI(this.wt)),this.Vs=new Nx(this.referenceDelegate,this.wt),this.remoteDocumentCache=qx(this.wt),this.Ds=new Q_,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===l&&jy("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return Er(e,[{key:"start",value:function(){var e=this;return this.ii().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Gy(Ky.FAILED_PRECONDITION,cI);return e.ri(),e.oi(),e.ui(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Vs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ps=new jg(t,e.Ws)})).then((function(){e.vs=!0})).catch((function(t){return e.ni&&e.ni.close(),Promise.reject(t)}))}},{key:"ci",value:function(e){var t=this;return this.ti=function(){var n=ee(X().mark((function n(r){return X().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ni.F(function(){var t=ee(X().mark((function t(n){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget(ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ii();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ii",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return hI(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.ai(t).next((function(t){t||(e.isPrimary=!1,e.js.enqueueRetryable((function(){return e.ti(!1)})))}))})).next((function(){return e.hi(t)})).next((function(n){return e.isPrimary&&!n?e.li(t).next((function(){return!1})):!!n&&e.fi(t).next((function(){return!0}))}))})).catch((function(t){if(Og(t))return Vy("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Vy("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.js.enqueueRetryable((function(){return e.ti(t)})),e.isPrimary=t}))}},{key:"ai",value:function(e){var t=this;return fI(e).get("owner").next((function(e){return Cg.resolve(t.di(e))}))}},{key:"_i",value:function(e){return hI(e).delete(this.clientId)}},{key:"wi",value:function(){var e=ee(X().mark((function e(){var t,n,r,i,a=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.mi(this.Zs,18e5)){e.next=6;break}return this.Zs=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=P_(e,"clientMetadata");return t.K().next((function(e){var n=a.gi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Cg.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.si){n=Cr(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.si.removeItem(this.yi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ui",value:function(){var e=this;this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ii().then((function(){return e.wi()})).then((function(){return e.ui()}))}))}},{key:"di",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"hi",value:function(e){var t=this;return this.zs?Cg.resolve(!0):fI(e).get("owner").next((function(n){if(null!==n&&t.mi(n.leaseTimestampMs,5e3)&&!t.pi(n.ownerId)){if(t.di(n)&&t.networkEnabled)return!0;if(!t.di(n)){if(!n.allowTabSynchronization)throw new Gy(Ky.FAILED_PRECONDITION,cI);return!1}}return!(!t.networkEnabled||!t.inForeground)||hI(e).K().next((function(e){return void 0===t.gi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Vy("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=ee(X().mark((function e(){var t=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.vs=!1,this.Ii(),this.Xs&&(this.Xs.cancel(),this.Xs=null),this.Ti(),this.Ei(),e.next=7,this.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new A_(e,jg.ot);return t.li(n).next((function(){return t._i(n)}))}));case 7:this.ni.close(),this.Ai();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"gi",value:function(e,t){var n=this;return e.filter((function(e){return n.mi(e.updateTimeMs,t)&&!n.pi(e.clientId)}))}},{key:"Ri",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return hI(t).K().next((function(t){return e.gi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.vs}},{key:"getMutationQueue",value:function(e,t){return xx.se(e,this.wt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new dx(e,this.wt.ne.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return J_.se(this.wt,e)}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;Vy("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Hs)?N_:14===i?C_:13===i?E_:12===i?T_:11===i?S_:void By();return this.ni.runTransaction(e,o,u,(function(i){return a=new A_(i,r.Ps?r.Ps.next():jg.ot),"readwrite-primary"===t?r.ai(a).next((function(e){return!!e||r.hi(a)})).next((function(t){if(!t)throw jy("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.js.enqueueRetryable((function(){return r.ti(!1)})),new Gy(Ky.FAILED_PRECONDITION,Ig);return n(a)})).next((function(e){return r.fi(a).next((function(){return e}))})):r.bi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"bi",value:function(e){var t=this;return fI(e).get("owner").next((function(e){if(null!==e&&t.mi(e.leaseTimestampMs,5e3)&&!t.pi(e.ownerId)&&!t.di(e)&&!(t.zs||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Gy(Ky.FAILED_PRECONDITION,cI)}))}},{key:"fi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return fI(e).put("owner",t)}},{key:"li",value:function(e){var t=this,n=fI(e);return n.get("owner").next((function(e){return t.di(e)?(Vy("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Cg.resolve()}))}},{key:"mi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(jy("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ri",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=function(){e.js.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ii()}))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ti",value:function(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}},{key:"oi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=function(){t.Ii(),!Zr()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.js.enterRestrictedMode(!0),t.js.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Js))}},{key:"Ei",value:function(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}},{key:"pi",value:function(e){var t;try{var n=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Vy("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return jy("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ii",value:function(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(Ld){jy("Failed to set zombie client id.",Ld)}}},{key:"Ai",value:function(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(Ld){}}},{key:"yi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"V",value:function(){return Ag.V()}}]),e}();function fI(e){return P_(e,"owner")}function hI(e){return P_(e,"clientMetadata")}function dI(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var pI=function(){function e(t,n,r,i){Sr(this,e),this.targetId=t,this.fromCache=n,this.Pi=r,this.vi=i}return Er(e,null,[{key:"Vi",value:function(t,n){var r,i=dw(),a=dw(),o=Cr(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),vI=function(){function e(){Sr(this,e),this.Si=!1}return Er(e,[{key:"initialize",value:function(e,t){this.Di=e,this.indexManager=t,this.Si=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ci(e,t).next((function(a){return a||i.xi(e,t,r,n)})).next((function(n){return n||i.Ni(e,t)}))}},{key:"Ci",value:function(e,t){var n=this;if(ab(t))return Cg.resolve(null);var r=lb(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=fb(t,null,"F"),r=lb(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=dw.apply(void 0,Ri(i));return n.Di.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.ki(t,i);return n.Mi(t,o,a,r.readTime)?n.Ci(e,fb(t,null,"F")):n.Oi(e,o,t,r)}))}))})))}))}},{key:"xi",value:function(e,t,n,r){var i=this;return ab(t)||r.isEqual(cg.min())?this.Ni(e,t):this.Di.getDocuments(e,n).next((function(a){var o=i.ki(t,a);return i.Mi(t,o,n,r)?i.Ni(e,t):(Uy()<=Fi.DEBUG&&Vy("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),pb(t)),i.Oi(e,o,t,bg(r,-1)))}))}},{key:"ki",value:function(e,t){var n=new Gg(yb(e));return t.forEach((function(t,r){vb(e,r)&&(n=n.add(r))})),n}},{key:"Mi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ni",value:function(e,t){return Uy()<=Fi.DEBUG&&Vy("QueryEngine","Using full collection scan to execute query:",pb(t)),this.Di.getDocumentsMatchingQuery(e,t,_g.min())}},{key:"Oi",value:function(e,t,n,r){return this.Di.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),mI=function(){function e(t,n,r,i){Sr(this,e),this.persistence=t,this.Fi=n,this.wt=i,this.$i=new Wg(ag),this.Bi=new nw((function(e){return Mk(e)}),Fk),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(r)}return Er(e,[{key:"qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Yx(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.$i)}))}}]),e}();function yI(e,t,n,r){return new mI(e,t,n,r)}function gI(e,t){return kI.apply(this,arguments)}function kI(){return kI=ee(X().mark((function e(t,n){var r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Hy(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=dw(),s=Cr(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=Cr(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=Cr(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=Cr(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{Ki:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),kI.apply(this,arguments)}function bI(e,t){var n=Hy(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Cg.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Wy(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=dw(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function wI(e){var t=Hy(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Vs.getLastRemoteSnapshotVersion(e)}))}function _I(e,t){var n=Hy(e),r=t.snapshotVersion,i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Vs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Vs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Jg.EMPTY_BYTE_STRING,cg.min()).withLastLimboFreeSnapshotVersion(cg.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Vs.updateTargetData(e,c))}}));var u=iw(),s=dw();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(xI(e,a,t.documentUpdates).next((function(e){u=e.Gi,s=e.Qi}))),!r.isEqual(cg.min())){var c=n.Vs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Vs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Cg.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.$i=i,e}))}function xI(e,t,n){var r=dw(),i=dw();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=iw();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(cg.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Vy("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Gi:r,Qi:i}}))}function II(e,t){var n=Hy(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function SI(e,t){var n=Hy(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Vs.getTargetData(e,t).next((function(i){return i?(r=i,Cg.resolve(r)):n.Vs.allocateTargetId(e).next((function(i){return r=new L_(t,i,0,e.currentSequenceNumber),n.Vs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.$i.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.$i=n.$i.insert(e.targetId,e),n.Bi.set(t,e.targetId)),e}))}function TI(e,t,n){return EI.apply(this,arguments)}function EI(){return EI=ee(X().mark((function e(t,n,r){var i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Hy(t),a=i.$i.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Og(e.t1)){e.next=12;break}throw e.t1;case 12:Vy("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.$i=i.$i.remove(n),i.Bi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),EI.apply(this,arguments)}function CI(e,t,n){var r=Hy(e),i=cg.min(),a=dw();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Hy(e),i=r.Bi.get(n);return void 0!==i?Cg.resolve(r.$i.get(i)):r.Vs.getTargetData(t,n)}(r,e,lb(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Fi.getDocumentsMatchingQuery(e,t,n?i:cg.min(),n?a:dw())})).next((function(e){return PI(r,mb(t),e),{documents:e,ji:a}}))}))}function NI(e,t){var n=Hy(e),r=Hy(n.Vs),i=n.$i.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.te(e,t).next((function(e){return e?e.target:null}))}))}function AI(e,t){var n=Hy(e),r=n.Li.get(t)||cg.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Ui.getAllFromCollectionGroup(e,t,bg(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return PI(n,t,e),e}))}function PI(e,t,n){var r=cg.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Li.set(t,r)}function RI(e,t,n,r){return OI.apply(this,arguments)}function OI(){return OI=ee(X().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Hy(t),o=dw(),u=iw(),s=Cr(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Wi(l.metadata.name),l.document&&(o=o.add(f)),(h=n.zi(l)).setReadTime(n.Hi(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Ui.newChangeBuffer({trackRemovals:!0}),e.next=7,SI(a,function(e){return lb(ib(fg.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return xI(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Vs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Vs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Gi,t.Qi)})).next((function(){return t.Gi}))}))})));case 9:case"end":return e.stop()}}),e)}))),OI.apply(this,arguments)}function DI(e,t){return LI.apply(this,arguments)}function LI(){return LI=ee(X().mark((function e(t,n){var r,i,a,o=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:dw(),e.next=3,SI(t,lb(W_(n.bundledQuery)));case 3:return i=e.sent,a=Hy(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Pw(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ds.saveNamedQuery(e,n);var o=i.withResumeToken(Jg.EMPTY_BYTE_STRING,t);return a.$i=a.$i.insert(o.targetId,o),a.Vs.updateTargetData(e,o).next((function(){return a.Vs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Vs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ds.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),LI.apply(this,arguments)}function MI(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function FI(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function UI(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var VI=function(){function e(t,n,r,i){Sr(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return Er(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Gy(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(jy("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),jI=function(){function e(t,n,r){Sr(this,e),this.targetId=t,this.state=n,this.error=r}return Er(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Gy(i.error.code,i.error.message))),a?new e(t,i.state,r):(jy("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),qI=function(){function e(t,n){Sr(this,e),this.clientId=t,this.activeTargetIds=n}return Er(e,null,[{key:"Ji",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=vw(),o=0;i&&o<r.activeTargetIds.length;++o)i=ck(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(jy("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),zI=function(){function e(t,n){Sr(this,e),this.clientId=t,this.onlineState=n}return Er(e,null,[{key:"Ji",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(jy("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),BI=function(){function e(){Sr(this,e),this.activeTargetIds=vw()}return Er(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),WI=function(){function e(t,n,r,i,a){Sr(this,e),this.window=t,this.js=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Wg(ag),this.started=!1,this.ir=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=MI(this.persistenceKey,this.tr),this.ur=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new BI),this.cr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.ar=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.hr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.lr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.dr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.er)}return Er(e,[{key:"start",value:function(){var e=ee(X().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Ri();case 2:t=e.sent,n=Cr(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.tr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(MI(this.persistenceKey,i)))&&(o=qI.Ji(i,a))&&(this.sr=this.sr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this._r(),(u=this.storage.getItem(this.lr))&&(s=this.wr(u))&&this.mr(s),c=Cr(this.ir);try{for(c.s();!(l=c.n()).done;)f=l.value,this.nr(f)}catch(d){c.e(d)}finally{c.f()}this.ir=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ur,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.gr(this.sr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.sr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.yr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.yr(e,t,n),this.pr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(UI(this.persistenceKey,e));if(n){var r=jI.Ji(e,n);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ir.Zi(e),this._r()}},{key:"isLocalQueryTarget",value:function(e){return this.Ir.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(UI(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Tr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.pr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Er(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ar(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Vy("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Vy("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Vy("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"nr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Vy("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void jy("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable(ee(X().mark((function e(){var r,i,a,o,u,s,c;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.cr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Rr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Pr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.ar.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Vr(a));case 16:e.next=41;break;case 18:if(!t.hr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Sr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Dr(o));case 23:e.next=41;break;case 25:if(n.key!==t.lr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.wr(n.newValue))){e.next=30;break}return e.abrupt("return",t.mr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ur){e.next=37;break}s=function(e){var t=jg.ot;if(null!=e)try{var n=JSON.parse(e);Wy("number"==typeof n),t=n}catch(e){jy("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==jg.ot&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.dr){e.next=41;break}return c=t.Cr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Nr(e)})));case 41:e.next=44;break;case 43:t.ir.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ir",get:function(){return this.sr.get(this.tr)}},{key:"_r",value:function(){this.setItem(this.rr,this.Ir.Yi())}},{key:"yr",value:function(e,t,n){var r=new VI(this.currentUser,e,t,n),i=FI(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Yi())}},{key:"pr",value:function(e){var t=FI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Er",value:function(e){var t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}},{key:"Tr",value:function(e,t,n){var r=UI(this.persistenceKey,e),i=new jI(e,t,n);this.setItem(r,i.Yi())}},{key:"Ar",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}},{key:"Rr",value:function(e){var t=this.cr.exec(e);return t?t[1]:null}},{key:"Pr",value:function(e,t){var n=this.Rr(e);return qI.Ji(n,t)}},{key:"vr",value:function(e,t){var n=this.ar.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return VI.Ji(new Ly(i),r,t)}},{key:"Sr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]);return jI.Ji(r,t)}},{key:"wr",value:function(e){return zI.Ji(e)}},{key:"Cr",value:function(e){return JSON.parse(e)}},{key:"Vr",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.kr(t.batchId,t.state,t.error));case 2:Vy("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dr",value:function(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Or(o,u).then((function(){n.sr=r}))}},{key:"mr",value:function(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"gr",value:function(e){var t=vw();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"V",value:function(e){return!(!e||!e.localStorage)}}]),e}(),HI=function(){function e(){Sr(this,e),this.Fr=new BI,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Er(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new BI,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),KI=function(){function e(){Sr(this,e)}return Er(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),GI=function(){function e(){var t=this;Sr(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Kr()},this.Gr=[],this.Qr()}return Er(e,[{key:"Br",value:function(e){this.Gr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){Vy("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Cr(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Kr",value:function(){Vy("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Cr(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"V",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),QI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},YI=function(){function e(t){Sr(this,e),this.jr=t.jr,this.Wr=t.Wr}return Er(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),$I=function(e){Pr(n,e);var t=Lr(n);function n(e){var r;return Sr(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return Er(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Oy;o.listenOnce(Cy.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Ey.NO_ERROR:var t=o.getResponseJson();Vy("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Ey.TIMEOUT:Vy("Connection",'RPC "'+e+'" timed out'),a(new Gy(Ky.DEADLINE_EXCEEDED,"Request time out"));break;case Ey.HTTP_ERROR:var n=o.getStatus();if(Vy("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ky).indexOf(t)>=0?t:Ky.UNKNOWN}(r.status);a(new Gy(u,r.message))}else a(new Gy(Ky.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Gy(Ky.UNAVAILABLE,"Connection failed."));break;default:By()}}finally{Vy("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Sy(),a=Ty(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Py({})),this.uo(o.initMessageHeaders,t,n),Xr()||ti()||Jr().indexOf("Electron/")>=0||ni()||Jr().indexOf("MSAppHost/")>=0||ei()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");Vy("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new YI({jr:function(e){l?Vy("Connection","Not sending because WebChannel is closed:",e):(c||(Vy("Connection","Opening WebChannel transport."),s.open(),c=!0),Vy("Connection","WebChannel sending:",e),s.send(e))},Wr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Ry.EventType.OPEN,(function(){l||Vy("Connection","WebChannel transport opened.")})),h(s,Ry.EventType.CLOSE,(function(){l||(l=!0,Vy("Connection","WebChannel transport closed"),f.eo())})),h(s,Ry.EventType.ERROR,(function(e){l||(l=!0,qy("Connection","WebChannel transport errored:",e),f.eo(new Gy(Ky.UNAVAILABLE,"The operation could not be completed")))})),h(s,Ry.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Wy(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Vy("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Yb[e];if(void 0!==t)return tw(t)}(a),u=i.message;void 0===o&&(o=Ky.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.eo(new Gy(o,u)),s.close()}else Vy("Connection","WebChannel received:",n),f.no(n)}})),h(a,Ny.STAT_EVENT,(function(e){e.stat===Ay.PROXY?Vy("Connection","Detected buffering proxy"):e.stat===Ay.NOPROXY&&Vy("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Zr()}),0),f}}]),n}(function(){function e(t){Sr(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return Er(e,[{key:"ro",value:function(e,t,n,r,i){var a=this.oo(e,t);Vy("RestConnection","Sending: ",a,n);var o={};return this.uo(o,r,i),this.co(e,a,o,n).then((function(e){return Vy("RestConnection","Received: ",e),e}),(function(t){throw qy("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ao",value:function(e,t,n,r,i,a){return this.ro(e,t,n,r,i)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+My,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=QI[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function JI(){return"undefined"!=typeof window?window:null}function XI(){return"undefined"!=typeof document?document:null}function ZI(e){return new Ew(e,!0)}var eS=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Sr(this,e),this.js=t,this.timerId=n,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return Er(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&Vy("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.js.enqueueAfterDelay(this.timerId,i,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),tS=function(){function e(t,n,r,i,a,o,u,s){Sr(this,e),this.js=t,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new eS(t,n)}return Er(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Mo()})))}},{key:"Oo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Mo",value:function(){var e=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"$o",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"close",value:function(){var e=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===Ky.RESOURCE_EXHAUSTED?(jy(n.toString()),jy("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===Ky.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=c(t,2),i=r[0],a=r[1];e.Po===n&&e.Uo(i,a)}),(function(n){t((function(){var t=new Gy(Ky.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.Vo=n.js.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io(ee(X().mark((function t(){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return Vy("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.js.enqueueAndForget((function(){return t.Po===e?n():(Vy("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),nS=function(e){Pr(n,e);var t=Lr(n);function n(e,r,i,a,o,u){var s;return Sr(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).wt=o,s}return Er(n,[{key:"Ko",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:By()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.dt?(Wy(void 0===t||"string"==typeof t),Jg.fromBase64String(t||"")):(Wy(void 0===t||t instanceof Uint8Array),Jg.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Ky.UNKNOWN:tw(e.code);return new Gy(t,e.message||"")}(o);n=new bw(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Lw(e,s.document.name),l=Pw(s.document.updateTime),f=new Pk({mapValue:{fields:s.document.fields}}),h=Ok.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new gw(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=Lw(e,v.document),y=v.readTime?Pw(v.readTime):cg.min(),g=Ok.newNoDocument(m,y),k=v.removedTargetIds||[];n=new gw([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=Lw(e,b.document),_=b.removedTargetIds||[];n=new gw([],_,w,null)}else{if(!("filter"in t))return By();t.filter;var x=t.filter;x.targetId;var I=x.count||0,S=new Zb(I),T=x.targetId;n=new kw(T,S)}return n}(this.wt,e),n=function(e){if(!("targetChange"in e))return cg.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?cg.min():t.readTime?Pw(t.readTime):cg.min()}(e);return this.listener.Go(t,n)}},{key:"Qo",value:function(e){var t={};t.database=Uw(this.wt),t.addTarget=function(e,t){var n,r=t.target;return(n=Uk(r)?{documents:Hw(e,r)}:{query:Kw(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Nw(e,t.resumeToken):t.snapshotVersion.compareTo(cg.min())>0&&(n.readTime=Cw(e,t.snapshotVersion.toTimestamp())),n}(this.wt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return By()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.wt,e);n&&(t.labels=n),this.Oo(t)}},{key:"jo",value:function(e){var t={};t.database=Uw(this.wt),t.removeTarget=e,this.Oo(t)}}]),n}(tS),rS=function(e){Pr(n,e);var t=Lr(n);function n(e,r,i,a,o,u){var s;return Sr(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).wt=o,s.Wo=!1,s}return Er(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,io(Rr(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Ko",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(Wy(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(Wy(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Pw(e.updateTime):Pw(t);return n.isEqual(cg.min())&&(n=Pw(t)),new Lb(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Pw(e.commitTime);return this.listener.Jo(n,t)}return Wy(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=Uw(this.wt),this.Oo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Bw(t.wt,e)}))};this.Oo(n)}}]),n}(tS),iS=function(e){Pr(n,e);var t=Lr(n);function n(e,r,i,a){var o;return Sr(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.wt=a,o.Zo=!1,o}return Er(n,[{key:"tu",value:function(){if(this.Zo)throw new Gy(Ky.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],u=a[1];return r.bo.ro(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ky.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Gy(Ky.UNKNOWN,e.toString())}))}},{key:"ao",value:function(e,t,n,r){var i=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=c(a,2),u=o[0],s=o[1];return i.bo.ao(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ky.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Gy(Ky.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return Er((function e(){Sr(this,e)}))}()),aS=function(){function e(t,n){Sr(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return Er(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(jy(t),this.su=!1):Vy("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),oS=Er((function e(t,n,r,i,a){var o=this;Sr(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br((function(e){r.enqueueAndForget(ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=yS(o),!e.t0){e.next=5;break}return Vy("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Hy(t)).lu.add(4),e.next=4,cS(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,uS(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new aS(r,i)}));function uS(e){return sS.apply(this,arguments)}function sS(){return sS=ee(X().mark((function e(t){var n,r,i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!yS(t)){e.next=18;break}n=Cr(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),sS.apply(this,arguments)}function cS(e){return lS.apply(this,arguments)}function lS(){return lS=ee(X().mark((function e(t){var n,r,i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Cr(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),lS.apply(this,arguments)}function fS(e,t){var n=Hy(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),mS(n)?vS(n):KS(n).Co()&&dS(n,t))}function hS(e,t){var n=Hy(e),r=KS(n);n.hu.delete(t),r.Co()&&pS(n,t),0===n.hu.size&&(r.Co()?r.ko():yS(n)&&n._u.set("Unknown"))}function dS(e,t){e.wu.Nt(t.targetId),KS(e).Qo(t)}function pS(e,t){e.wu.Nt(t),KS(e).jo(t)}function vS(e){e.wu=new _w({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},te:function(t){return e.hu.get(t)||null}}),KS(e).start(),e._u.iu()}function mS(e){return yS(e)&&!KS(e).Do()&&e.hu.size>0}function yS(e){return 0===Hy(e).lu.size}function gS(e){e.wu=void 0}function kS(e){return bS.apply(this,arguments)}function bS(){return bS=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){dS(t,e)}));case 1:case"end":return e.stop()}}),e)}))),bS.apply(this,arguments)}function wS(e,t){return _S.apply(this,arguments)}function _S(){return _S=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:gS(t),mS(t)?(t._u.uu(n),vS(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),_S.apply(this,arguments)}function xS(e,t,n){return IS.apply(this,arguments)}function IS(){return IS=ee(X().mark((function e(t,n,r){var i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof bw&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=ee(X().mark((function e(t,n){var r,i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Cr(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.hu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.hu.delete(o),t.wu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Vy("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,SS(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof gw?t.wu.Ut(n):n instanceof kw?t.wu.zt(n):t.wu.Gt(n),r.isEqual(cg.min())){e.next=29;break}return e.prev=14,e.next=17,wI(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.Yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(Jg.EMPTY_BYTE_STRING,n.snapshotVersion)),pS(e,t);var r=new L_(n.target,t,1,n.sequenceNumber);dS(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Vy("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,SS(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),IS.apply(this,arguments)}function SS(e,t,n){return TS.apply(this,arguments)}function TS(){return TS=ee(X().mark((function e(t,n,r){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Og(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,cS(t);case 5:t._u.set("Offline"),r||(r=function(){return wI(t.localStore)}),t.asyncQueue.enqueueRetryable(ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vy("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,uS(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),TS.apply(this,arguments)}function ES(e,t){return t().catch((function(n){return SS(e,n,t)}))}function CS(e){return NS.apply(this,arguments)}function NS(){return NS=ee(X().mark((function e(t){var n,r,i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Hy(t),r=GS(n),i=n.au.length>0?n.au[n.au.length-1].batchId:-1;case 2:if(!AS(n)){e.next=19;break}return e.prev=3,e.next=6,II(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.au.length&&r.ko(),e.abrupt("break",19);case 10:i=a.batchId,PS(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,SS(n,e.t0);case 17:e.next=2;break;case 19:RS(n)&&OS(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),NS.apply(this,arguments)}function AS(e){return yS(e)&&e.au.length<10}function PS(e,t){e.au.push(t);var n=GS(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function RS(e){return yS(e)&&!GS(e).Do()&&e.au.length>0}function OS(e){GS(e).start()}function DS(e){return LS.apply(this,arguments)}function LS(){return LS=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:GS(t).Xo();case 1:case"end":return e.stop()}}),e)}))),LS.apply(this,arguments)}function MS(e){return FS.apply(this,arguments)}function FS(){return FS=ee(X().mark((function e(t){var n,r,i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=GS(t),r=Cr(t.au);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Ho(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),FS.apply(this,arguments)}function US(e,t,n){return VS.apply(this,arguments)}function VS(){return VS=ee(X().mark((function e(t,n,r){var i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.au.shift(),a=O_.from(i,n,r),e.next=3,ES(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,CS(t);case 5:case"end":return e.stop()}}),e)}))),VS.apply(this,arguments)}function jS(e,t){return qS.apply(this,arguments)}function qS(){return qS=ee(X().mark((function e(t,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&GS(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=ee(X().mark((function e(t,n){var r,i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ew(i=n.code)||i===Ky.ABORTED){e.next=7;break}return r=t.au.shift(),GS(t).No(),e.next=5,ES(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,CS(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:RS(t)&&OS(t);case 5:case"end":return e.stop()}}),e)}))),qS.apply(this,arguments)}function zS(e,t){return BS.apply(this,arguments)}function BS(){return BS=ee(X().mark((function e(t,n){var r,i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Hy(t)).asyncQueue.verifyOperationInProgress(),Vy("RemoteStore","RemoteStore received new credentials"),i=yS(r),r.lu.add(3),e.next=6,cS(r);case 6:return i&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,uS(r);case 12:case"end":return e.stop()}}),e)}))),BS.apply(this,arguments)}function WS(e,t){return HS.apply(this,arguments)}function HS(){return HS=ee(X().mark((function e(t,n){var r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Hy(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,uS(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,cS(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),HS.apply(this,arguments)}function KS(e){return e.mu||(e.mu=function(e,t,n){var r=Hy(e);return r.tu(),new nS(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:kS.bind(null,e),Jr:wS.bind(null,e),Go:xS.bind(null,e)}),e.fu.push(function(){var t=ee(X().mark((function t(n){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),mS(e)?vS(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:gS(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function GS(e){return e.gu||(e.gu=function(e,t,n){var r=Hy(e);return r.tu(),new rS(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:DS.bind(null,e),Jr:jS.bind(null,e),Yo:MS.bind(null,e),Jo:US.bind(null,e)}),e.fu.push(function(){var t=ee(X().mark((function t(n){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,CS(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.au.length>0&&(Vy("RemoteStore","Stopping write stream with ".concat(e.au.length," pending writes")),e.au=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var QS=function(){function e(t,n,r,i,a){Sr(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Qy,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return Er(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Gy(Ky.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function YS(e,t){if(jy("AsyncQueue","".concat(t,": ").concat(e)),Og(e))return new Gy(Ky.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var $S=function(){function e(t){Sr(this,e),this.comparator=t?function(e,n){return t(e,n)||pg.comparator(e.key,n.key)}:function(e,t){return pg.comparator(e.key,t.key)},this.keyedMap=ow(),this.sortedSet=new Wg(this.comparator)}return Er(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),JS=function(){function e(){Sr(this,e),this.yu=new Wg(pg.comparator)}return Er(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):By():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),XS=function(){function e(t,n,r,i,a,o,u,s){Sr(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return Er(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hb(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,$S.emptySet(n),a,r,i,!0,!1)}}]),e}(),ZS=Er((function e(){Sr(this,e),this.Iu=void 0,this.listeners=[]})),eT=Er((function e(){Sr(this,e),this.queries=new nw((function(e){return db(e)}),hb),this.onlineState="Unknown",this.Tu=new Set}));function tT(e,t){return nT.apply(this,arguments)}function nT(){return nT=ee(X().mark((function e(t,n){var r,i,a,o,u;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Hy(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new ZS),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=YS(e.t0,"Initialization of query '".concat(pb(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Eu(r.onlineState),o.Iu&&n.Au(o.Iu)&&uT(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),nT.apply(this,arguments)}function rT(e,t){return iT.apply(this,arguments)}function iT(){return iT=ee(X().mark((function e(t,n){var r,i,a,o,u;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Hy(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),iT.apply(this,arguments)}function aT(e,t){var n,r=Hy(e),i=!1,a=Cr(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=Cr(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Au(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Iu=o}}}catch(f){a.e(f)}finally{a.f()}i&&uT(r)}function oT(e,t,n){var r=Hy(e),i=r.queries.get(t);if(i){var a,o=Cr(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function uT(e){e.Tu.forEach((function(e){e.next()}))}var sT=function(){function e(t,n,r){Sr(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return Er(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Cr(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new XS(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),a=!0):this.Vu(e,this.onlineState)&&(this.Su(e),a=!0),this.Pu=e,a}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"Vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=XS.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}(),cT=function(){function e(t,n){Sr(this,e),this.payload=t,this.byteLength=n}return Er(e,[{key:"Cu",value:function(){return"metadata"in this.payload}}]),e}(),lT=function(){function e(t){Sr(this,e),this.wt=t}return Er(e,[{key:"Wi",value:function(e){return Lw(this.wt,e)}},{key:"zi",value:function(e){return e.metadata.exists?qw(this.wt,e.document,!1):Ok.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}},{key:"Hi",value:function(e){return Pw(e)}}]),e}(),fT=function(){function e(t,n,r){Sr(this,e),this.xu=t,this.localStore=n,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=hT(t)}return Er(e,[{key:"Nu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=fg.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ku",value:function(e){var t,n=new Map,r=new lT(this.wt),i=Cr(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Wi(a.metadata.name),s=Cr(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||dw()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=ee(X().mark((function e(){var t,n,r,i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,RI(this.localStore,new lT(this.wt),this.documents,this.xu.id);case 2:t=e.sent,n=this.ku(this.documents),r=Cr(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,DI(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Mu:this.collectionGroups,Ou:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function hT(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var dT=Er((function e(t){Sr(this,e),this.key=t})),pT=Er((function e(t){Sr(this,e),this.key=t})),vT=function(){function e(t,n){Sr(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=dw(),this.mutatedKeys=dw(),this.Lu=yb(t),this.Uu=new $S(this.Lu)}return Er(e,[{key:"qu",get:function(){return this.Fu}},{key:"Ku",value:function(e,t){var n=this,r=t?t.Gu:new JS,i=t?t.Uu:this.Uu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=vb(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Qu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Lu(f,s)>0||c&&n.Lu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Uu:o,Gu:r,Mi:u,mutatedKeys:a}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var a=e.Gu.pu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return By()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],u=0===this.Bu.size&&this.current?1:0,s=u!==this.$u;return this.$u=u,0!==a.length||s?{snapshot:new XS(this.query,e.Uu,i,a,e.mutatedKeys,0===u,s,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new JS,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=dw(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new pT(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new dT(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.ji,this.Bu=dw();var t=this.Ku(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return XS.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),mT=Er((function e(t,n,r){Sr(this,e),this.query=t,this.targetId=n,this.view=r})),yT=Er((function e(t){Sr(this,e),this.key=t,this.Xu=!1})),gT=function(){function e(t,n,r,i,a,o){Sr(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new nw((function(e){return db(e)}),hb),this.ec=new Map,this.nc=new Set,this.sc=new Wg(pg.comparator),this.ic=new Map,this.rc=new Xx,this.oc={},this.uc=new Map,this.cc=Cx.Rn(),this.onlineState="Unknown",this.ac=void 0}return Er(e,[{key:"isPrimaryClient",get:function(){return!0===this.ac}}]),e}();function kT(e,t){return bT.apply(this,arguments)}function bT(){return bT=ee(X().mark((function e(t,n){var r,i,a,o,u,s;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=hE(t),!(o=r.tc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Yu(),e.next=15;break;case 6:return e.next=8,SI(r.localStore,lb(n));case 8:return u=e.sent,r.isPrimaryClient&&fS(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,wT(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),bT.apply(this,arguments)}function wT(e,t,n,r){return _T.apply(this,arguments)}function _T(){return _T=ee(X().mark((function e(t,n,r,i){var a,o,u,s,c,l;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.hc=function(e,n,r){return function(){var e=ee(X().mark((function e(t,n,r,i){var a,o,u;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Ku(r),e.t0=a.Mi,!e.t0){e.next=6;break}return e.next=5,CI(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Ku(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(zT(t,n.targetId,u.zu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,CI(t.localStore,n,!0);case 3:return a=e.sent,o=new vT(n,a.ji),u=o.Ku(a.documents),s=yw.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),zT(t,r,c.zu),l=new mT(n,r,o),e.abrupt("return",(t.tc.set(n,l),t.ec.has(r)?t.ec.get(r).push(n):t.ec.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),_T.apply(this,arguments)}function xT(e,t){return IT.apply(this,arguments)}function IT(){return IT=ee(X().mark((function e(t,n){var r,i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Hy(t),i=r.tc.get(n),!((a=r.ec.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ec.set(i.targetId,a.filter((function(e){return!hb(e,n)}))),void r.tc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,TI(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),hS(r.remoteStore,i.targetId),jT(r,i.targetId)})).catch(Tg);case 9:e.next=14;break;case 11:return jT(r,i.targetId),e.next=14,TI(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),IT.apply(this,arguments)}function ST(e,t,n){return TT.apply(this,arguments)}function TT(){return TT=ee(X().mark((function e(t,n,r){var i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=dE(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Hy(e),a=sg.now(),o=t.reduce((function(e,t){return e.add(t.key)}),dw());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=iw(),s=dw();return i.Ui.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=Cr(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=zb(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new Hb(c.key,l,Rk(l.value.mapValue),Mb.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:uw(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.oc[e.currentUser.toKey()];r||(r=new Wg(ag)),r=r.insert(t,n),e.oc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,HT(i,a.changes);case 9:return e.next=11,CS(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=YS(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),TT.apply(this,arguments)}function ET(e,t){return CT.apply(this,arguments)}function CT(){return CT=ee(X().mark((function e(t,n){var r,i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Hy(t),e.prev=1,e.next=4,_I(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ic.get(t);n&&(Wy(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?Wy(n.Xu):e.removedDocuments.size>0&&(Wy(n.Xu),n.Xu=!1))})),e.next=8,HT(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Tg(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),CT.apply(this,arguments)}function NT(e,t,n){var r=Hy(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.tc.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Hy(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Cr(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Eu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&uT(n)}(r.eventManager,t),i.length&&r.Zu.Go(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function AT(e,t,n){return PT.apply(this,arguments)}function PT(){return PT=ee(X().mark((function e(t,n,r){var i,a,o,u,s,c;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Hy(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ic.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Wg(pg.comparator)).insert(o,Ok.newNoDocument(o,cg.min())),s=dw().add(o),c=new mw(cg.min(),new Map,new Gg(ag),u,s),e.next=9,ET(i,c);case 9:i.sc=i.sc.remove(o),i.ic.delete(n),WT(i),e.next=16;break;case 14:return e.next=16,TI(i.localStore,n,!1).then((function(){return jT(i,n,r)})).catch(Tg);case 16:case"end":return e.stop()}}),e)}))),PT.apply(this,arguments)}function RT(e,t){return OT.apply(this,arguments)}function OT(){return OT=ee(X().mark((function e(t,n){var r,i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Hy(t),i=n.batch.batchId,e.prev=1,e.next=4,bI(r.localStore,n);case 4:return a=e.sent,VT(r,i,null),UT(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,HT(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Tg(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),OT.apply(this,arguments)}function DT(e,t,n){return LT.apply(this,arguments)}function LT(){return LT=ee(X().mark((function e(t,n,r){var i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Hy(t),e.prev=1,e.next=4,function(e,t){var n=Hy(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Wy(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,VT(i,n,r),UT(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,HT(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Tg(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),LT.apply(this,arguments)}function MT(e,t){return FT.apply(this,arguments)}function FT(){return FT=ee(X().mark((function e(t,n){var r,i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yS((r=Hy(t)).remoteStore)||Vy("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Hy(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.uc.get(i)||[]).push(n),r.uc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=YS(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),FT.apply(this,arguments)}function UT(e,t){(e.uc.get(t)||[]).forEach((function(e){e.resolve()})),e.uc.delete(t)}function VT(e,t,n){var r=Hy(e),i=r.oc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.oc[r.currentUser.toKey()]=i}}function jT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Cr(e.ec.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.tc.delete(a),n&&e.Zu.lc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ec.delete(t),e.isPrimaryClient&&e.rc.us(t).forEach((function(t){e.rc.containsKey(t)||qT(e,t)}))}function qT(e,t){e.nc.delete(t.path.canonicalString());var n=e.sc.get(t);null!==n&&(hS(e.remoteStore,n),e.sc=e.sc.remove(t),e.ic.delete(n),WT(e))}function zT(e,t,n){var r,i=Cr(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof dT?(e.rc.addReference(a.key,t),BT(e,a)):a instanceof pT?(Vy("SyncEngine","Document no longer in limbo: "+a.key),e.rc.removeReference(a.key,t),e.rc.containsKey(a.key)||qT(e,a.key)):By()}}catch(o){i.e(o)}finally{i.f()}}function BT(e,t){var n=t.key,r=n.path.canonicalString();e.sc.get(n)||e.nc.has(r)||(Vy("SyncEngine","New document in limbo: "+n),e.nc.add(r),WT(e))}function WT(e){for(;e.nc.size>0&&e.sc.size<e.maxConcurrentLimboResolutions;){var t=e.nc.values().next().value;e.nc.delete(t);var n=new pg(fg.fromString(t)),r=e.cc.next();e.ic.set(r,new yT(n)),e.sc=e.sc.insert(n,r),fS(e.remoteStore,new L_(lb(ib(n.path)),r,2,jg.ot))}}function HT(e,t,n){return KT.apply(this,arguments)}function KT(){return KT=ee(X().mark((function e(t,n,r){var i,a,o,u;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Hy(t),a=[],o=[],u=[],e.t0=i.tc.isEmpty(),e.t0){e.next=9;break}return i.tc.forEach((function(e,t){u.push(i.hc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=pI.Vi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Zu.Go(a),e.next=9,function(){var e=ee(X().mark((function e(t,n){var r,i,a,o,u,s,c,l;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Hy(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Cg.forEach(n,(function(t){return Cg.forEach(t.Pi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Cg.forEach(t.vi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Og(e.t0)){e.next=10;break}throw e.t0;case 10:Vy("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Cr(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.$i.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.$i=r.$i.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),KT.apply(this,arguments)}function GT(e,t){return QT.apply(this,arguments)}function QT(){return QT=ee(X().mark((function e(t,n){var r,i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Hy(t)).currentUser.isEqual(n)){e.next=11;break}return Vy("SyncEngine","User change. New user:",n.toKey()),e.next=5,gI(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.uc.forEach((function(e){e.forEach((function(e){e.reject(new Gy(Ky.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.uc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,HT(r,i.Ki);case 11:case"end":return e.stop()}}),e)}))),QT.apply(this,arguments)}function YT(e,t){var n=Hy(e),r=n.ic.get(t);if(r&&r.Xu)return dw().add(r.key);var i=dw(),a=n.ec.get(t);if(!a)return i;var o,u=Cr(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.tc.get(s);i=i.unionWith(c.view.qu)}}catch(l){u.e(l)}finally{u.f()}return i}function $T(e,t){return JT.apply(this,arguments)}function JT(){return JT=ee(X().mark((function e(t,n){var r,i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Hy(t),e.next=3,CI(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Ju(i),e.abrupt("return",(r.isPrimaryClient&&zT(r,n.targetId,a.zu),a));case 6:case"end":return e.stop()}}),e)}))),JT.apply(this,arguments)}function XT(e,t){return ZT.apply(this,arguments)}function ZT(){return ZT=ee(X().mark((function e(t,n){var r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Hy(t),e.abrupt("return",AI(r.localStore,n).then((function(e){return HT(r,e)})));case 2:case"end":return e.stop()}}),e)}))),ZT.apply(this,arguments)}function eE(e,t,n,r){return tE.apply(this,arguments)}function tE(){return tE=ee(X().mark((function e(t,n,r,i){var a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Hy(t),e.next=3,function(e,t){var n=Hy(e),r=Hy(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.yn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Cg.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,CS(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(VT(a,n,i||null),UT(a,n),function(e,t){Hy(Hy(e).mutationQueue).In(t)}(a.localStore,n)):By();case 11:return e.next=13,HT(a,o);case 13:e.next=16;break;case 15:Vy("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),tE.apply(this,arguments)}function nE(e,t){return rE.apply(this,arguments)}function rE(){return rE=ee(X().mark((function e(t,n){var r,i,a,o,u,s,c,l;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(hE(r=Hy(t)),dE(r),!0!==n||!0===r.ac){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,iE(r,i.toArray());case 5:return a=e.sent,r.ac=!0,e.next=9,WS(r.remoteStore,!0);case 9:o=Cr(a);try{for(o.s();!(u=o.n()).done;)s=u.value,fS(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ac){e.next=25;break}return c=[],l=Promise.resolve(),r.ec.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return jT(r,t),TI(r.localStore,t,!0)})),hS(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,iE(r,c);case 21:return function(e){var t=Hy(e);t.ic.forEach((function(e,n){hS(t.remoteStore,n)})),t.rc.cs(),t.ic=new Map,t.sc=new Wg(pg.comparator)}(r),r.ac=!1,e.next=25,WS(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),rE.apply(this,arguments)}function iE(e,t,n){return aE.apply(this,arguments)}function aE(){return aE=ee(X().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Hy(t),a=[],o=[],u=Cr(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ec.get(c))||0===f.length){e.next=34;break}return e.next=11,SI(i.localStore,lb(f[0]));case 11:l=e.sent,h=Cr(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.tc.get(p),e.next=20,$T(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,NI(i.localStore,c);case 36:return y=e.sent,e.next=39,SI(i.localStore,y);case 39:return l=e.sent,e.next=42,wT(i,oE(y),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Zu.Go(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),aE.apply(this,arguments)}function oE(e){return rb(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function uE(e){var t=Hy(e);return Hy(Hy(t.localStore).persistence).Ri()}function sE(e,t,n,r){return cE.apply(this,arguments)}function cE(){return cE=ee(X().mark((function e(t,n,r,i){var a,o,u,s;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Hy(t)).ac){e.next=3;break}return e.abrupt("return",void Vy("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ec.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,AI(a.localStore,mb(o[0]));case 10:return u=e.sent,s=mw.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,HT(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,TI(a.localStore,n,!0);case 17:return jT(a,n,i),e.abrupt("break",20);case 19:By();case 20:case"end":return e.stop()}}),e)}))),cE.apply(this,arguments)}function lE(e,t,n){return fE.apply(this,arguments)}function fE(){return fE=ee(X().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=hE(t)).ac){e.next=45;break}a=Cr(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ec.has(u)){e.next=10;break}return Vy("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,NI(i.localStore,u);case 12:return s=e.sent,e.next=15,SI(i.localStore,s);case 15:return c=e.sent,e.next=18,wT(i,oE(s),c.targetId,!1);case 18:fS(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=Cr(r),e.prev=30,h=X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ec.has(t),!e.t0){e.next=5;break}return e.next=5,TI(i.localStore,t,!1).then((function(){hS(i.remoteStore,t),jT(i,t)})).catch(Tg);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),fE.apply(this,arguments)}function hE(e){var t=Hy(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ET.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=YT.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=AT.bind(null,t),t.Zu.Go=aT.bind(null,t.eventManager),t.Zu.lc=oT.bind(null,t.eventManager),t}function dE(e){var t=Hy(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=RT.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=DT.bind(null,t),t}function pE(e,t,n){var r=Hy(e);(function(){var e=ee(X().mark((function e(t,n,r){var i,a,o,u,s;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Hy(e),r=Pw(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ds.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(hT(i)),a=new fT(i,t.localStore,n.wt),e.next=15,n.fc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Nu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.fc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,HT(t,s.Ou,void 0);case 31:return e.next=33,function(e,t){var n=Hy(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ds.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Mu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(qy("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var vE=function(){function e(){Sr(this,e),this.synchronizeTabs=!1}return Er(e,[{key:"initialize",value:function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.wt=ZI(t.databaseInfo.databaseId),this.sharedClientState=this.dc(t),this.persistence=this._c(t),e.next=5,this.persistence.start();case 5:this.localStore=this.wc(t),this.gcScheduler=this.mc(t,this.localStore),this.indexBackfillerScheduler=this.gc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mc",value:function(e,t){return null}},{key:"gc",value:function(e,t){return null}},{key:"wc",value:function(e){return yI(this.persistence,new vI,e.initialUser,this.wt)}},{key:"_c",value:function(e){return new iI(oI.Os,this.wt)}},{key:"dc",value:function(e){return new HI}},{key:"terminate",value:function(){var e=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),mE=function(e){Pr(n,e);var t=Lr(n);function n(e,r,i){var a;return Sr(this,n),(a=t.call(this)).yc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return Er(n,[{key:"initialize",value:function(){var e=ee(X().mark((function e(t){var r=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,io(Rr(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.yc.initialize(this,t);case 4:return e.next=6,dE(this.yc.syncEngine);case 6:return e.next=8,CS(this.yc.remoteStore);case 8:return e.next=10,this.persistence.ci((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wc",value:function(e){return yI(this.persistence,new vI,e.initialUser,this.wt)}},{key:"mc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Lx(n,e.asyncQueue,t)}},{key:"gc",value:function(e,t){var n=new Vg(t,this.persistence);return new Ug(e.asyncQueue,n)}},{key:"_c",value:function(e){var t=dI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?bx.withCacheSize(this.cacheSizeBytes):bx.DEFAULT;return new lI(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,JI(),XI(),this.wt,this.sharedClientState,!!this.forceOwnership)}},{key:"dc",value:function(e){return new HI}}]),n}(vE),yE=function(e){Pr(n,e);var t=Lr(n);function n(e,r){var i;return Sr(this,n),(i=t.call(this,e,r,!1)).yc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return Er(n,[{key:"initialize",value:function(){var e=ee(X().mark((function e(t){var r,i=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,io(Rr(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.yc.syncEngine,e.t0=this.sharedClientState instanceof WI,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={kr:eE.bind(null,r),Mr:sE.bind(null,r),Or:lE.bind(null,r),Ri:uE.bind(null,r),Nr:XT.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.ci(function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nE(i.yc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dc",value:function(e){var t=JI();if(!WI.V(t))throw new Gy(Ky.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=dI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new WI(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(mE),gE=function(){function e(){Sr(this,e)}return Er(e,[{key:"initialize",value:function(){var e=ee(X().mark((function e(t,n){var r=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return NT(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=GT.bind(null,this.syncEngine),e.next=12,WS(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new eT}},{key:"createDatastore",value:function(e){var t,n=ZI(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new $I(t));return function(e,t,n,r){return new iS(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return NT(o.syncEngine,e,0)},a=GI.V()?new GI:new KI,new oS(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new gT(e,t,n,r,i,a);return o&&(u.ac=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Hy(t),Vy("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,cS(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function kE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return ee(X().mark((function r(){var i;return X().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var bE=function(){function e(t){Sr(this,e),this.observer=t,this.muted=!1}return Er(e,[{key:"next",value:function(e){this.observer.next&&this.Ic(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ic(this.observer.error,e):jy("Uncaught Error in snapshot listener:",e)}},{key:"Tc",value:function(){this.muted=!0}},{key:"Ic",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),wE=function(){function e(t,n){var r=this;Sr(this,e),this.Ec=t,this.wt=n,this.metadata=new Qy,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then((function(e){e&&e.Cu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return Er(e,[{key:"close",value:function(){return this.Ec.cancel()}},{key:"getMetadata",value:function(){var e=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fc",value:function(){var e=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Rc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Rc",value:function(){var e=ee(X().mark((function e(){var t,n,r,i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ac.decode(t),r=Number(n),isNaN(r)&&this.Pc("length string (".concat(n,") is not valid number")),e.next=9,this.vc(r);case 9:return i=e.sent,e.abrupt("return",new cT(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"bc",value:function(){var e=ee(X().mark((function e(){var t,n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Vc()<0)){e.next=7;break}return e.next=3,this.Sc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Vc())<0&&this.Pc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Sc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Pc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ac.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Pc",value:function(e){throw this.Ec.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Sc",value:function(){var e=ee(X().mark((function e(){var t,n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ec.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),_E=function(){function e(t){Sr(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return Er(e,[{key:"lookup",value:function(){var e=ee(X().mark((function e(t){var n,r=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Gy(Ky.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=ee(X().mark((function e(t,n){var r,i,a,o,u,s;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Hy(t),i=Uw(r.wt)+"/documents",a={documents:n.map((function(e){return Dw(r.wt,e)}))},e.next=5,r.ao("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=zw(r.wt,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Wy(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Jb(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=ee(X().mark((function e(){var t,n=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=pg.fromPath(t);n.mutations.push(new Xb(r,n.precondition(r)))})),e.next=7,function(){var e=ee(X().mark((function e(t,n){var r,i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Hy(t),i=Uw(r.wt)+"/documents",a={writes:n.map((function(e){return Bw(r.wt,e)}))},e.next=3,r.ro("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw By();t=cg.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Gy(Ky.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Mb.updateTime(t):Mb.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(cg.min()))throw new Gy(Ky.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mb.updateTime(t)}return Mb.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),xE=function(){function e(t,n,r,i,a){Sr(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Dc=r.maxAttempts,this.So=new eS(this.asyncQueue,"transaction_retry")}return Er(e,[{key:"run",value:function(){this.Dc-=1,this.Cc()}},{key:"Cc",value:function(){var e=this;this.So.Io(ee(X().mark((function t(){var n,r;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new _E(e.datastore),(r=e.xc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Nc(t)}))}))})).catch((function(t){e.Nc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"xc",value:function(e){try{var t=this.updateFunction(e);return!uk(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Nc",value:function(e){var t=this;this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Cc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!ew(t)}return!1}}]),e}(),IE=function(){function e(t,n,r,i){var a=this;Sr(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ly.UNAUTHENTICATED,this.clientId=ig.I(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vy("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Vy("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return Er(e,[{key:"getConfiguration",value:function(){var e=ee(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Gy(Ky.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Qy;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(ee(X().mark((function n(){var r;return X().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=YS(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function SE(e,t){return TE.apply(this,arguments)}function TE(){return TE=ee(X().mark((function e(t,n){var r,i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Vy("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,gI(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),TE.apply(this,arguments)}function EE(e,t){return CE.apply(this,arguments)}function CE(){return CE=ee(X().mark((function e(t,n){var r,i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,NE(t);case 3:return r=e.sent,Vy("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return zS(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return zS(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),CE.apply(this,arguments)}function NE(e){return AE.apply(this,arguments)}function AE(){return AE=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Vy("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,SE(t,new vE);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),AE.apply(this,arguments)}function PE(e){return RE.apply(this,arguments)}function RE(){return RE=ee(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Vy("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,EE(t,new gE);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),RE.apply(this,arguments)}function OE(e){return NE(e).then((function(e){return e.persistence}))}function DE(e){return NE(e).then((function(e){return e.localStore}))}function LE(e){return PE(e).then((function(e){return e.remoteStore}))}function ME(e){return PE(e).then((function(e){return e.syncEngine}))}function FE(e){return UE.apply(this,arguments)}function UE(){return UE=ee(X().mark((function e(t){var n,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,PE(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=kT.bind(null,n.syncEngine),r.onUnlisten=xT.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),UE.apply(this,arguments)}function VE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Qy;return e.asyncQueue.enqueueAndForget(ee(X().mark((function i(){return X().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new bE({next:function(a){t.enqueueAndForget((function(){return rT(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Gy(Ky.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Gy(Ky.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new sT(ib(n.path),a,{includeMetadataChanges:!0,Du:!0});return tT(e,o)},i.next=3,FE(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function jE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Qy;return e.asyncQueue.enqueueAndForget(ee(X().mark((function i(){return X().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new bE({next:function(n){t.enqueueAndForget((function(){return rT(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Gy(Ky.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new sT(n,a,{includeMetadataChanges:!0,Du:!0});return tT(e,o)},i.next=3,FE(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var qE=new Map;function zE(e,t,n){if(!n)throw new Gy(Ky.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function BE(e,t,n,r){if(!0===t&&!0===r)throw new Gy(Ky.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function WE(e){if(!pg.isDocumentKey(e))throw new Gy(Ky.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function HE(e){if(pg.isDocumentKey(e))throw new Gy(Ky.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function KE(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":By()}function GE(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Gy(Ky.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=KE(e);throw new Gy(Ky.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function QE(e,t){if(t<=0)throw new Gy(Ky.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var YE=function(){function e(t){var n;if(Sr(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Gy(Ky.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Gy(Ky.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,BE("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return Er(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),$E=function(){function e(t,n,r){Sr(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new YE({}),this._settingsFrozen=!1,t instanceof ok?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Gy(Ky.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ok(e.options.projectId)}(t))}return Er(e,[{key:"app",get:function(){if(!this._app)throw new Gy(Ky.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Gy(Ky.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new YE(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new $y;switch(e.type){case"gapi":var t=e.client;return Wy(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new eg(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Gy(Ky.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=qE.get(e);t&&(Vy("ComponentProvider","Removing Datastore"),qE.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function JE(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=GE(e,$E))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&qy("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Ly.MOCK_USER;else{o=$r(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Gy(Ky.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ly(s)}e._authCredentials=new Jy(new Yy(o,u))}}var XE=function(){function e(t,n,r){Sr(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Er(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new eC(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),ZE=function(){function e(t,n,r){Sr(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Er(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),eC=function(e){Pr(n,e);var t=Lr(n);function n(e,r,i){var a;return Sr(this,n),(a=t.call(this,e,r,ib(i)))._path=i,a.type="collection",a}return Er(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new XE(this.firestore,null,new pg(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(ZE);function tC(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ai(e),zE("collection","path",t),e instanceof $E){var a=fg.fromString.apply(fg,[t].concat(r));return HE(a),new eC(e,null,a)}if(!(e instanceof XE||e instanceof eC))throw new Gy(Ky.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(fg.fromString.apply(fg,[t].concat(r)));return HE(o),new eC(e.firestore,null,o)}function nC(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ai(e),1===arguments.length&&(t=ig.I()),zE("doc","path",t),e instanceof $E){var a=fg.fromString.apply(fg,[t].concat(r));return WE(a),new XE(e,null,new pg(a))}if(!(e instanceof XE||e instanceof eC))throw new Gy(Ky.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(fg.fromString.apply(fg,[t].concat(r)));return WE(o),new XE(e.firestore,e instanceof eC?e.converter:null,new pg(o))}function rC(e,t){return e=Ai(e),t=Ai(t),(e instanceof XE||e instanceof eC)&&(t instanceof XE||t instanceof eC)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function iC(e,t){return e=Ai(e),t=Ai(t),e instanceof ZE&&t instanceof ZE&&e.firestore===t.firestore&&hb(e._query,t._query)&&e.converter===t.converter}var aC=function(){function e(){var t=this;Sr(this,e),this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new eS(this,"async_queue_retry"),this.Kc=function(){var e=XI();e&&Vy("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=XI();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Kc)}return Er(e,[{key:"isShuttingDown",get:function(){return this.Fc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Gc(),this.Qc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;var t=XI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Gc(),this.Fc)return new Promise((function(){}));var n=new Qy;return this.Qc((function(){return t.Fc&&t.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Oc.push(e),t.jc()}))}},{key:"jc",value:function(){var e=ee(X().mark((function e(){var t=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Oc.length){e.next=14;break}return e.prev=1,e.next=4,this.Oc[0]();case 4:this.Oc.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Og(e.t0)){e.next=12;break}throw e.t0;case 12:Vy("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Oc.length>0&&this.So.Io((function(){return t.jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Qc",value:function(e){var t=this,n=this.Mc.then((function(){return t.Lc=!0,e().catch((function(e){t.Bc=e,t.Lc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw jy("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Lc=!1,e}))}));return this.Mc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Gc(),this.qc.indexOf(e)>-1&&(t=0);var i=QS.createAndSchedule(this,e,t,n,(function(e){return r.Wc(e)}));return this.$c.push(i),i}},{key:"Gc",value:function(){this.Bc&&By()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=ee(X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Mc,e.next=3,t;case 3:if(t!==this.Mc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t,n=Cr(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Jc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Cr(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.zc()}))}},{key:"Yc",value:function(e){this.qc.push(e)}},{key:"Wc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function oC(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Cr(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var uC=function(){function e(){Sr(this,e),this._progressObserver={},this._taskCompletionResolver=new Qy,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Er(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),sC=function(e){Pr(n,e);var t=Lr(n);function n(e,r,i){var a;return Sr(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new aC,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return Er(n,[{key:"_terminate",value:function(){return this._firestoreClient||lC(this),this._firestoreClient.terminate()}}]),n}($E);function cC(e){return e._firestoreClient||lC(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function lC(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new ak(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new IE(e._authCredentials,e._appCheckCredentials,e._queue,r)}function fC(e,t,n){var r=new Qy;return e.asyncQueue.enqueue(ee(X().mark((function i(){var a;return X().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,SE(e,n);case 3:return i.next=5,EE(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Ky.FAILED_PRECONDITION||e.code===Ky.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:qy("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function hC(e){return function(e){return e.asyncQueue.enqueue(ee(X().mark((function t(){var n,r;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,OE(e);case 2:return n=t.sent,t.next=5,LE(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Hy(e);return t.lu.delete(0),uS(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(cC(e=GE(e,sC)))}function dC(e){return function(e){return e.asyncQueue.enqueue(ee(X().mark((function t(){var n,r;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,OE(e);case 2:return n=t.sent,t.next=5,LE(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Hy(t)).lu.add(0),e.next=4,cS(n);case 4:n._u.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(cC(e=GE(e,sC)))}function pC(e,t){var n=cC(e=GE(e,sC)),r=new uC;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new wE(e,t)}(function(e,t){if(e instanceof Uint8Array)return kE(e,t);if(e instanceof ArrayBuffer)return kE(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,ZI(t));e.asyncQueue.enqueueAndForget(ee(X().mark((function t(){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=pE,t.next=3,ME(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function vC(e,t){return function(e,t){return e.asyncQueue.enqueue(ee(X().mark((function n(){return X().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Hy(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ds.getNamedQuery(e,t)}))},n.next=3,DE(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(cC(e=GE(e,sC)),t).then((function(t){return t?new ZE(e,null,t.query):null}))}function mC(e){if(e._initialized||e._terminated)throw new Gy(Ky.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var yC=function(){function e(){Sr(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Gy(Ky.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dg(n)}return Er(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var gC=function(){function e(t){Sr(this,e),this._byteString=t}return Er(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Jg.fromBase64String(t))}catch(t){throw new Gy(Ky.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Jg.fromUint8Array(t))}}]),e}(),kC=Er((function e(t){Sr(this,e),this._methodName=t})),bC=function(){function e(t,n){if(Sr(this,e),!isFinite(t)||t<-90||t>90)throw new Gy(Ky.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Gy(Ky.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Er(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return ag(this._lat,e._lat)||ag(this._long,e._long)}}]),e}(),wC=/^__.*__$/,_C=function(){function e(t,n,r){Sr(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Er(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Hb(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wb(e,this.data,t,this.fieldTransforms)}}]),e}(),xC=function(){function e(t,n,r){Sr(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Er(e,[{key:"toMutation",value:function(e,t){return new Hb(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function IC(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw By()}}var SC=function(){function e(t,n,r,i,a,o){Sr(this,e),this.settings=t,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Er(e,[{key:"path",get:function(){return this.settings.path}},{key:"Zc",get:function(){return this.settings.Zc}},{key:"ta",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ea",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.sa(e),r}},{key:"ia",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.Xc(),r}},{key:"ra",value:function(e){return this.ta({path:void 0,na:!0})}},{key:"oa",value:function(e){return HC(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Xc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.sa(this.path.get(e))}},{key:"sa",value:function(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(IC(this.Zc)&&wC.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}]),e}(),TC=function(){function e(t,n,r){Sr(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.wt=r||ZI(t)}return Er(e,[{key:"aa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new SC({Zc:e,methodName:t,ca:n,path:dg.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}]),e}();function EC(e){var t=e._freezeSettings(),n=ZI(e._databaseId);return new TC(e._databaseId,!!t.ignoreUndefinedProperties,n)}function CC(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.aa(a.merge||a.mergeFields?2:0,t,n,i);qC("Data must be an object, but it was:",o,r);var u,s,c=VC(r,o);if(a.merge)u=new $g(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=Cr(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=zC(t,d,n);if(!o.contains(p))throw new Gy(Ky.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));KC(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new $g(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new _C(new Pk(c),u,s)}var NC=function(e){Pr(n,e);var t=Lr(n);function n(){return Sr(this,n),t.apply(this,arguments)}return Er(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Zc)throw 1===e.Zc?e.oa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.oa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(kC);function AC(e,t,n){return new SC({Zc:3,ca:t.settings.ca,methodName:e._methodName,na:n},t.databaseId,t.wt,t.ignoreUndefinedProperties)}var PC=function(e){Pr(n,e);var t=Lr(n);function n(){return Sr(this,n),t.apply(this,arguments)}return Er(n,[{key:"_toFieldTransform",value:function(e){return new Db(e.path,new Tb)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(kC),RC=function(e){Pr(n,e);var t=Lr(n);function n(e,r){var i;return Sr(this,n),(i=t.call(this,e)).ha=r,i}return Er(n,[{key:"_toFieldTransform",value:function(e){var t=AC(this,e,!0),n=this.ha.map((function(e){return UC(e,t)})),r=new Eb(n);return new Db(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(kC),OC=function(e){Pr(n,e);var t=Lr(n);function n(e,r){var i;return Sr(this,n),(i=t.call(this,e)).ha=r,i}return Er(n,[{key:"_toFieldTransform",value:function(e){var t=AC(this,e,!0),n=this.ha.map((function(e){return UC(e,t)})),r=new Nb(n);return new Db(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(kC),DC=function(e){Pr(n,e);var t=Lr(n);function n(e,r){var i;return Sr(this,n),(i=t.call(this,e)).la=r,i}return Er(n,[{key:"_toFieldTransform",value:function(e){var t=new Pb(e.wt,wb(e.wt,this.la));return new Db(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(kC);function LC(e,t,n,r){var i=e.aa(1,t,n);qC("Data must be an object, but it was:",i,r);var a=[],o=Pk.empty();zg(r,(function(e,r){var u=WC(t,e,n);r=Ai(r);var s=i.ia(u);if(r instanceof NC)a.push(u);else{var c=UC(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new $g(a);return new xC(o,u,i.fieldTransforms)}function MC(e,t,n,r,i,a){var o=e.aa(1,t,n),u=[zC(t,r,n)],s=[i];if(a.length%2!=0)throw new Gy(Ky.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(zC(t,a[c])),s.push(a[c+1]);for(var l=[],f=Pk.empty(),h=u.length-1;h>=0;--h)if(!KC(l,u[h])){var d=u[h],p=s[h];p=Ai(p);var v=o.ia(d);if(p instanceof NC)l.push(d);else{var m=UC(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new $g(l);return new xC(f,y,o.fieldTransforms)}function FC(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return UC(n,e.aa(r?4:3,t))}function UC(e,t){if(jC(e=Ai(e)))return qC("Unsupported field value:",t,e),VC(e,t);if(e instanceof kC)return function(e,t){if(!IC(t.Zc))throw t.oa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.oa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Cr(e);try{for(a.s();!(n=a.n()).done;){var o=UC(n.value,t.ra(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Ai(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return wb(t.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=sg.fromDate(e);return{timestampValue:Cw(t.wt,n)}}if(e instanceof sg){var r=new sg(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Cw(t.wt,r)}}if(e instanceof bC)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof gC)return{bytesValue:Nw(t.wt,e._byteString)};if(e instanceof XE){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.oa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Rw(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.oa("Unsupported field value: ".concat(KE(e)))}(e,t)}function VC(e,t){var n={};return Bg(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):zg(e,(function(e,r){var i=UC(r,t.ea(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function jC(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof sg||e instanceof bC||e instanceof gC||e instanceof XE||e instanceof kC)}function qC(e,t,n){if(!jC(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=KE(n);throw"an object"===r?t.oa(e+" a custom object"):t.oa(e+" "+r)}}function zC(e,t,n){if((t=Ai(t))instanceof yC)return t._internalPath;if("string"==typeof t)return WC(e,t);throw HC("Field path arguments must be of type string or ",e,!1,void 0,n)}var BC=new RegExp("[~\\*/\\[\\]]");function WC(e,t,n){if(t.search(BC)>=0)throw HC("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Mr(yC,Ri(t.split(".")))._internalPath}catch(r){throw HC("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function HC(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Gy(Ky.INVALID_ARGUMENT,u+e+s)}function KC(e,t){return e.some((function(e){return e.isEqual(t)}))}var GC=function(){function e(t,n,r,i,a){Sr(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return Er(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new XE(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new QC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(YC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),QC=function(e){Pr(n,e);var t=Lr(n);function n(){return Sr(this,n),t.apply(this,arguments)}return Er(n,[{key:"data",value:function(){return io(Rr(n.prototype),"data",this).call(this)}}]),n}(GC);function YC(e,t){return"string"==typeof t?WC(e,t):t instanceof yC?t._internalPath:t._delegate._internalPath}var $C=function(){function e(t,n){Sr(this,e),this.hasPendingWrites=t,this.fromCache=n}return Er(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),JC=function(e){Pr(n,e);var t=Lr(n);function n(e,r,i,a,o,u){var s;return Sr(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Er(n,[{key:"exists",value:function(){return io(Rr(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new XC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(YC("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(GC),XC=function(e){Pr(n,e);var t=Lr(n);function n(){return Sr(this,n),t.apply(this,arguments)}return Er(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return io(Rr(n.prototype),"data",this).call(this,e)}}]),n}(JC),ZC=function(){function e(t,n,r,i){Sr(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new $C(i.hasPendingWrites,i.fromCache),this.query=r}return Er(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new XC(n._firestore,n._userDataWriter,r.key,r,new $C(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Gy(Ky.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new XC(e._firestore,e._userDataWriter,t.doc.key,t.doc,new $C(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new XC(e._firestore,e._userDataWriter,t.doc.key,t.doc,new $C(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:eN(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function eN(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return By()}}function tN(e,t){return e instanceof JC&&t instanceof JC?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof ZC&&t instanceof ZC&&e._firestore===t._firestore&&iC(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function nN(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Gy(Ky.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var rN=Er((function e(){Sr(this,e)}));function iN(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var aN=function(e){Pr(n,e);var t=Lr(n);function n(e,r,i){var a;return Sr(this,n),(a=t.call(this)).fa=e,a.da=r,a._a=i,a.type="where",a}return Er(n,[{key:"_apply",value:function(e){var t=EC(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Gy(Ky.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){mN(o,a);var s,c=[],l=Cr(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(vN(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=vN(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||mN(o,a),u=FC(n,"where",o,"in"===a||"not-in"===a);var h=zk.create(i,a,u);return function(e,t){if(t.ht()){var n=ub(e);if(null!==n&&!n.isEqual(t.field))throw new Gy(Ky.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=ob(e);null!==r&&yN(e,t.field,r)}var i=function(e,t){var n,r=Cr(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Gy(Ky.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Gy(Ky.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new ZE(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new nb(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(rN);var oN=function(e){Pr(n,e);var t=Lr(n);function n(e,r){var i;return Sr(this,n),(i=t.call(this)).fa=e,i.wa=r,i.type="orderBy",i}return Er(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Gy(Ky.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Gy(Ky.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Xk(t,n);return function(e,t){if(null===ob(e)){var n=ub(e);null!==n&&yN(e,n,t.field)}}(e,r),r}(e._query,this.fa,this.wa);return new ZE(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new nb(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(rN);var uN=function(e){Pr(n,e);var t=Lr(n);function n(e,r,i){var a;return Sr(this,n),(a=t.call(this)).type=e,a.ma=r,a.ga=i,a}return Er(n,[{key:"_apply",value:function(e){return new ZE(e.firestore,e.converter,fb(e._query,this.ma,this.ga))}}]),n}(rN);var sN=function(e){Pr(n,e);var t=Lr(n);function n(e,r,i){var a;return Sr(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return Er(n,[{key:"_apply",value:function(e){var t=pN(e,this.type,this.ya,this.pa);return new ZE(e.firestore,e.converter,function(e,t){return new nb(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(rN);function cN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new sN("startAt",t,!0)}function lN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new sN("startAfter",t,!1)}var fN=function(e){Pr(n,e);var t=Lr(n);function n(e,r,i){var a;return Sr(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return Er(n,[{key:"_apply",value:function(e){var t=pN(e,this.type,this.ya,this.pa);return new ZE(e.firestore,e.converter,function(e,t){return new nb(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(rN);function hN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new fN("endBefore",t,!1)}function dN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new fN("endAt",t,!0)}function pN(e,t,n,r){if(n[0]=Ai(n[0]),n[0]instanceof GC)return function(e,t,n,r,i){if(!r)throw new Gy(Ky.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=Cr(cb(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(kk(t,r.key));else{var c=r.data.field(s.field);if(nk(c))throw new Gy(Ky.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Gy(Ky.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Jk(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=EC(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Gy(Ky.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Gy(Ky.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!sb(e)&&-1!==c.indexOf("/"))throw new Gy(Ky.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(fg.fromString(c));if(!pg.isDocumentKey(l))throw new Gy(Ky.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new pg(l);u.push(kk(t,f))}else{var h=FC(n,r,c);u.push(h)}}return new Jk(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function vN(e,t,n){if("string"==typeof(n=Ai(n))){if(""===n)throw new Gy(Ky.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sb(t)&&-1!==n.indexOf("/"))throw new Gy(Ky.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(fg.fromString(n));if(!pg.isDocumentKey(r))throw new Gy(Ky.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return kk(e,new pg(r))}if(n instanceof XE)return kk(e,n._key);throw new Gy(Ky.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(KE(n),"."))}function mN(e,t){if(!Array.isArray(e)||0===e.length)throw new Gy(Ky.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Gy(Ky.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function yN(e,t,n){if(!n.isEqual(t))throw new Gy(Ky.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var gN={maxAttempts:5},kN=function(){function e(){Sr(this,e)}return Er(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(hk(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ek(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(tk(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw By()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return zg(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new bC(ek(e.latitude),ek(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=rk(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ik(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Zg(e);return new sg(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=fg.fromString(e);Wy(n_(n));var r=new ok(n.get(1),n.get(3)),i=new pg(n.popFirst(5));return r.isEqual(t)||jy("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function bN(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var wN=function(e){Pr(n,e);var t=Lr(n);function n(e){var r;return Sr(this,n),(r=t.call(this)).firestore=e,r}return Er(n,[{key:"convertBytes",value:function(e){return new gC(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new XE(this.firestore,null,t)}}]),n}(kN),_N=function(){function e(t,n){Sr(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=EC(t)}return Er(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=xN(e,this._firestore),i=bN(r.converter,t,n),a=CC(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Mb.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=xN(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Ai(t))||t instanceof yC?MC(this._dataReader,"WriteBatch.update",i._key,t,n,o):LC(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Mb.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=xN(e,this._firestore);return this._mutations=this._mutations.concat(new Jb(t._key,Mb.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Gy(Ky.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function xN(e,t){if((e=Ai(e)).firestore!==t)throw new Gy(Ky.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var IN=function(e){Pr(n,e);var t=Lr(n);function n(e){var r;return Sr(this,n),(r=t.call(this)).firestore=e,r}return Er(n,[{key:"convertBytes",value:function(e){return new gC(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new XE(this.firestore,null,t)}}]),n}(kN);function SN(e){e=GE(e,XE);var t=GE(e.firestore,sC),n=cC(t),r=new IN(t);return function(e,t){var n=new Qy;return e.asyncQueue.enqueueAndForget(ee(X().mark((function r(){return X().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ee(X().mark((function e(t,n,r){var i,a;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Hy(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Gy(Ky.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=YS(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,DE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new JC(t,r,e._key,n,new $C(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function TN(e){e=GE(e,ZE);var t=GE(e.firestore,sC),n=cC(t),r=new IN(t);return function(e,t){var n=new Qy;return e.asyncQueue.enqueueAndForget(ee(X().mark((function r(){return X().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ee(X().mark((function e(t,n,r){var i,a,o,u,s;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,CI(t,n,!0);case 3:i=e.sent,a=new vT(n,i.ji),o=a.Ku(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=YS(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,DE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new ZC(t,r,e,n)}))}function EN(e,t,n){e=GE(e,XE);var r=GE(e.firestore,sC),i=bN(e.converter,t,n);return PN(r,[CC(EC(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Mb.none())])}function CN(e,t,n){e=GE(e,XE);for(var r=GE(e.firestore,sC),i=EC(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return PN(r,[("string"==typeof(t=Ai(t))||t instanceof yC?MC(i,"updateDoc",e._key,t,n,o):LC(i,"updateDoc",e._key,t)).toMutation(e._key,Mb.exists(!0))])}function NN(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Ai(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||oC(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(oC(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof XE)l=GE(e.firestore,sC),f=ib(e._key.path),c={next:function(t){n[s]&&n[s](RN(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=GE(e,ZE);l=GE(p.firestore,sC),f=p._query;var v=new IN(l);c={next:function(e){n[s]&&n[s](new ZC(l,v,p,e))},error:n[s+1],complete:n[s+2]},nN(e._query)}return function(e,t,n,r){var i=new bE(r),a=new sT(t,i,n);return e.asyncQueue.enqueueAndForget(ee(X().mark((function t(){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=tT,t.next=3,FE(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Tc(),e.asyncQueue.enqueueAndForget(ee(X().mark((function t(){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=rT,t.next=3,FE(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(cC(l),f,h,c)}function AN(e,t){return function(e,t){var n=new bE(t);return e.asyncQueue.enqueueAndForget(ee(X().mark((function t(){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Hy(e).Tu.add(t),t.next()},t.next=3,FE(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Tc(),e.asyncQueue.enqueueAndForget(ee(X().mark((function t(){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Hy(e).Tu.delete(t)},t.next=3,FE(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(cC(e=GE(e,sC)),oC(t)?t:{next:t})}function PN(e,t){return function(e,t){var n=new Qy;return e.asyncQueue.enqueueAndForget(ee(X().mark((function r(){return X().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=ST,r.next=3,ME(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(cC(e),t)}function RN(e,t,n){var r=n.docs.get(t._key),i=new IN(e);return new JC(e,i,t._key,r,new $C(n.hasPendingWrites,n.fromCache),t.converter)}var ON=function(e){Pr(n,e);var t=Lr(n);function n(e,r){var i;return Sr(this,n),(i=t.call(this,e,r))._firestore=e,i}return Er(n,[{key:"get",value:function(e){var t=this,r=xN(e,this._firestore),i=new IN(this._firestore);return io(Rr(n.prototype),"get",this).call(this,e).then((function(e){return new JC(t._firestore,i,r._key,e._document,new $C(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){Sr(this,e),this._firestore=t,this._transaction=n,this._dataReader=EC(t)}return Er(e,[{key:"get",value:function(e){var t=this,n=xN(e,this._firestore),r=new wN(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return By();var i=e[0];if(i.isFoundDocument())return new GC(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new GC(t._firestore,r,n._key,null,n.converter);throw By()}))}},{key:"set",value:function(e,t,n){var r=xN(e,this._firestore),i=bN(r.converter,t,n),a=CC(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=xN(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Ai(t))||t instanceof yC?MC(this._dataReader,"Transaction.update",i._key,t,n,o):LC(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=xN(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function DN(e,t,n){e=GE(e,sC);var r=Object.assign(Object.assign({},gN),n);return function(e){if(e.maxAttempts<1)throw new Gy(Ky.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Qy;return e.asyncQueue.enqueueAndForget(ee(X().mark((function i(){var a;return X().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return PE(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new xE(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(cC(e),(function(n){return t(new ON(e,n))}),r)}function LN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new RC("arrayUnion",t)}function MN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new OC("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){My=e}(Ta),ka(new Oi("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new sC(i,new Xy(e.getProvider("auth-internal")),new ng(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Ra(Dy,"3.4.14",e),Ra(Dy,"3.4.14","esm2017")}();function FN(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Gy("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function UN(){if("undefined"===typeof Uint8Array)throw new Gy("unimplemented","Uint8Arrays are not available in this environment.")}function VN(){if("undefined"==typeof atob)throw new Gy("unimplemented","Blobs are unavailable in Firestore in this environment.")}var jN=function(){function e(t){Sr(this,e),this._delegate=t}return Er(e,[{key:"toBase64",value:function(){return VN(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return UN(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return VN(),new e(gC.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return UN(),new e(gC.fromUint8Array(t))}}]),e}();function qN(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=Cr(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var zN=function(){function e(){Sr(this,e)}return Er(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){mC(e=GE(e,sC));var n=cC(e),r=e._freezeSettings(),i=new gE;return fC(n,i,new mE(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){mC(e=GE(e,sC));var t=cC(e),n=e._freezeSettings(),r=new gE;return fC(t,r,new yE(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Gy(Ky.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Qy;return e._queue.enqueueAndForgetEvenWhileRestricted(ee(X().mark((function n(){return X().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=ee(X().mark((function e(t){var n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ag.V()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Ag.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(dI(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),BN=function(){function e(t,n,r){var i=this;Sr(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof ok||(this._appCompat=t)}return Er(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||qy("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};JE(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return hC(this._delegate)}},{key:"disableNetwork",value:function(){return dC(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&BE("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Qy;return e.asyncQueue.enqueueAndForget(ee(X().mark((function n(){return X().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=MT,n.next=3,ME(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(cC(e=GE(e,sC)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return AN(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Gy("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new rA(this,tC(this._delegate,e))}catch(SV){throw YN(SV,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new QN(this,nC(this._delegate,e))}catch(SV){throw YN(SV,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new eA(this,function(e,t){if(e=GE(e,$E),zE("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Gy(Ky.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new ZE(e,null,function(e){return new nb(fg.emptyPath(),e)}(t))}(this._delegate,e))}catch(SV){throw YN(SV,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return DN(this._delegate,(function(n){return e(new HN(t,n))}))}},{key:"batch",value:function(){var e=this;return cC(this._delegate),new KN(new _N(this._delegate,(function(t){return PN(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return pC(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return vC(this._delegate,e).then((function(e){return e?new eA(t,e):null}))}}]),e}(),WN=function(e){Pr(n,e);var t=Lr(n);function n(e){var r;return Sr(this,n),(r=t.call(this)).firestore=e,r}return Er(n,[{key:"convertBytes",value:function(e){return new jN(new gC(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return QN.forKey(t,this.firestore,null)}}]),n}(kN);var HN=function(){function e(t,n){Sr(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new WN(t)}return Er(e,[{key:"get",value:function(e){var t=this,n=iA(e);return this._delegate.get(n).then((function(e){return new XN(t._firestore,new JC(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=iA(e);return n?(FN("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=iA(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=iA(e);return this._delegate.delete(t),this}}]),e}(),KN=function(){function e(t){Sr(this,e),this._delegate=t}return Er(e,[{key:"set",value:function(e,t,n){var r=iA(e);return n?(FN("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=iA(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=iA(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),GN=function(){function e(t,n,r){Sr(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return Er(e,[{key:"fromFirestore",value:function(e,t){var n=new XC(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ZN(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new WN(t),n),i.set(n,a)),a}}]),e}();GN.INSTANCES=new WeakMap;var QN=function(){function e(t,n){Sr(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new WN(t)}return Er(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new rA(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new rA(this.firestore,tC(this._delegate,e))}catch(SV){throw YN(SV,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Ai(e))instanceof XE&&rC(this._delegate,e)}},{key:"set",value:function(e,t){t=FN("DocumentReference.set",t);try{return t?EN(this._delegate,e,t):EN(this._delegate,e)}catch(SV){throw YN(SV,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?CN(this._delegate,e):CN.apply(void 0,[this._delegate,e,t].concat(r))}catch(SV){throw YN(SV,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return PN(GE(e.firestore,sC),[new Jb(e._key,Mb.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=$N(n),a=JN(n,(function(t){return new XN(e.firestore,new JC(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return NN(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?SN(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=GE(e,XE);var t=GE(e.firestore,sC);return VE(cC(t),e._key,{source:"server"}).then((function(n){return RN(t,e,n)}))}(this._delegate):function(e){e=GE(e,XE);var t=GE(e.firestore,sC);return VE(cC(t),e._key).then((function(n){return RN(t,e,n)}))}(this._delegate),t.then((function(e){return new XN(n.firestore,new JC(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(GN.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Gy("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new XE(n._delegate,r,new pg(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new XE(n._delegate,r,t))}}]),e}();function YN(e,t,n){return e.message=e.message.replace(t,n),e}function $N(e){var t,n=Cr(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!qN(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function JN(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=qN(e[0])?e[0]:qN(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var XN=function(){function e(t,n){Sr(this,e),this._firestore=t,this._delegate=n}return Er(e,[{key:"ref",get:function(){return new QN(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return tN(this._delegate,e._delegate)}}]),e}(),ZN=function(e){Pr(n,e);var t=Lr(n);function n(){return Sr(this,n),t.apply(this,arguments)}return Er(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||By()}(void 0!==t),t}}]),n}(XN),eA=function(){function e(t,n){Sr(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new WN(t)}return Er(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,iN(this._delegate,function(e,t,n){var r=t,i=YC("where",e);return new aN(i,r,n)}(t,n,r)))}catch(SV){throw YN(SV,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,iN(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=YC("orderBy",e);return new oN(n,t)}(t,n)))}catch(SV){throw YN(SV,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,iN(this._delegate,function(e){return QE("limit",e),new uN("limit",e,"F")}(t)))}catch(SV){throw YN(SV,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,iN(this._delegate,function(e){return QE("limitToLast",e),new uN("limitToLast",e,"L")}(t)))}catch(SV){throw YN(SV,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,iN(this._delegate,cN.apply(void 0,arguments)))}catch(SV){throw YN(SV,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,iN(this._delegate,lN.apply(void 0,arguments)))}catch(SV){throw YN(SV,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,iN(this._delegate,hN.apply(void 0,arguments)))}catch(SV){throw YN(SV,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,iN(this._delegate,dN.apply(void 0,arguments)))}catch(SV){throw YN(SV,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return iC(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?TN(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=GE(e,ZE);var t=GE(e.firestore,sC),n=cC(t),r=new IN(t);return jE(n,e._query,{source:"server"}).then((function(n){return new ZC(t,r,e,n)}))}(this._delegate):function(e){e=GE(e,ZE);var t=GE(e.firestore,sC),n=cC(t),r=new IN(t);return nN(e._query),jE(n,e._query).then((function(n){return new ZC(t,r,e,n)}))}(this._delegate),t.then((function(e){return new nA(n.firestore,new ZC(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=$N(n),a=JN(n,(function(t){return new nA(e.firestore,new ZC(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return NN(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(GN.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),tA=function(){function e(t,n){Sr(this,e),this._firestore=t,this._delegate=n}return Er(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new ZN(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),nA=function(){function e(t,n){Sr(this,e),this._firestore=t,this._delegate=n}return Er(e,[{key:"query",get:function(){return new eA(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new ZN(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new tA(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new ZN(n._firestore,r))}))}},{key:"isEqual",value:function(e){return tN(this._delegate,e._delegate)}}]),e}(),rA=function(e){Pr(n,e);var t=Lr(n);function n(e,r){var i;return Sr(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return Er(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new QN(this.firestore,e):null}},{key:"doc",value:function(e){try{return new QN(this.firestore,void 0===e?nC(this._delegate):nC(this._delegate,e))}catch(SV){throw YN(SV,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=GE(e.firestore,sC),r=nC(e),i=bN(e.converter,t);return PN(n,[CC(EC(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Mb.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new QN(t.firestore,e)}))}},{key:"isEqual",value:function(e){return rC(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(GN.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(eA);function iA(e){return GE(e,XE)}var aA=function(){function e(){Sr(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=Mr(yC,n)}return Er(e,[{key:"isEqual",value:function(e){return(e=Ai(e))instanceof yC&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(dg.keyField().canonicalString())}}]),e}(),oA=function(){function e(t){Sr(this,e),this._delegate=t}return Er(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new PC("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new NC("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=LN.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=MN.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new DC("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),uA={Firestore:BN,GeoPoint:bC,Timestamp:sg,Blob:jN,Transaction:HN,WriteBatch:KN,DocumentReference:QN,DocumentSnapshot:XN,Query:eA,QueryDocumentSnapshot:ZN,QuerySnapshot:nA,CollectionReference:rA,FieldPath:aA,FieldValue:oA,setLogLevel:function(e){!function(e){Fy.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Oi("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},uA)))}(e,(function(e,t){return new BN(e,t,new zN)})),e.registerVersion("@firebase/firestore-compat","0.1.23")}(no);var sA="@firebase/database",cA="0.13.5",lA="";function fA(e){lA=e}var hA=function(){function e(t){Sr(this,e),this.domStorage_=t,this.prefix_="firebase:"}return Er(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),li(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ci(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),dA=function(){function e(){Sr(this,e),this.cache_={},this.isInMemoryStorage=!0}return Er(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return hi(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),pA=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new hA(t)}}catch(SV){}return new dA},vA=pA("localStorage"),mA=pA("sessionStorage"),yA=new Wi("@firebase/database"),gA=function(){var e=1;return function(){return e++}}(),kA=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,qr(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new wi;n.update(t);var r=n.digest();return Wr.encodeByteArray(r)},bA=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?li(r):r,t+=" "}return t},wA=null,_A=!0,xA=function(e,t){qr(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(yA.logLevel=Fi.VERBOSE,wA=yA.log.bind(yA),t&&mA.set("logging_enabled",!0)):"function"===typeof e?wA=e:(wA=null,mA.remove("logging_enabled"))},IA=function(){if(!0===_A&&(_A=!1,null===wA&&!0===mA.get("logging_enabled")&&xA(!0)),wA){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=bA.apply(null,t);wA(r)}},SA=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];IA.apply(void 0,[e].concat(n))}},TA=function(){var e="FIREBASE INTERNAL ERROR: "+bA.apply(void 0,arguments);yA.error(e)},EA=function(){var e="FIREBASE FATAL ERROR: ".concat(bA.apply(void 0,arguments));throw yA.error(e),new Error(e)},CA=function(){var e="FIREBASE WARNING: "+bA.apply(void 0,arguments);yA.warn(e)},NA=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},AA="[MIN_NAME]",PA="[MAX_NAME]",RA=function(e,t){if(e===t)return 0;if(e===AA||t===PA)return-1;if(t===AA||e===PA)return 1;var n=zA(e),r=zA(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},OA=function(e,t){return e===t?0:e<t?-1:1},DA=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+li(t))},LA=function e(t){if("object"!==typeof t||null===t)return li(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=li(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},MA=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function FA(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var UA=function(e){qr(!NA(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var s=u.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(s.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var VA=new RegExp("^-?(0*)\\d{1,10}$"),jA=-2147483648,qA=2147483647,zA=function(e){if(VA.test(e)){var t=Number(e);if(t>=jA&&t<=qA)return t}return null},BA=function(e){try{e()}catch(SV){setTimeout((function(){var t=SV.stack||"";throw CA("Exception was thrown by user callback.",t),SV}),Math.floor(0))}},WA=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},HA=function(){function e(t,n){var r=this;Sr(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return Er(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){CA('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),KA=function(){function e(t,n,r){var i=this;Sr(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return Er(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(IA("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',CA(e)}}]),e}(),GA=function(){function e(t){Sr(this,e),this.accessToken=t}return Er(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();GA.OWNER="owner";var QA="5",YA=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,$A="websocket",JA="long_polling",XA=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];Sr(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=vA.get("host:"+t)||this._host}return Er(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&vA.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function ZA(e,t,n){var r;if(qr("string"===typeof t,"typeof type must == string"),qr("object"===typeof n,"typeof params must == object"),t===$A)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==JA)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return FA(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var eP=function(){function e(){Sr(this,e),this.counters_={}}return Er(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;hi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return Qr(void 0,this.counters_)}}]),e}(),tP={},nP={};function rP(e){var t=e.toString();return tP[t]||(tP[t]=new eP),tP[t]}var iP=function(){function e(t){Sr(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return Er(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&BA((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),aP="start",oP="close",uP=function(){function e(t,n,r,i,a,o,u){var s=this;Sr(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=SA(t),this.stats_=rP(n),this.urlFn=function(e){return s.appCheckToken&&(e.ac=s.appCheckToken),ZA(n,JA,e)}}return Er(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new iP(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(ri()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new sP((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===aP)n.id=a,n.password=o;else{if(i!==oP)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=QA,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&YA.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=li(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=Hr(t),r=MA(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!ri()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=li(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!ri()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),sP=function(){function e(t,n,r,i){if(Sr(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,ri())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=gA(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(SV){IA("frame writing exception"),SV.stack&&IA(SV.stack),IA(SV)}}}return Er(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;ri()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){IA("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(SV){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||IA("No IE domain setting required")}catch(SV){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),cP=null;"undefined"!==typeof MozWebSocket?cP=MozWebSocket:"undefined"!==typeof WebSocket&&(cP=WebSocket);var lP=function(){function e(t,n,r,i,a,o,u){Sr(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=SA(this.connId),this.stats_=rP(n),this.connURL=e.connectionURL_(n,o,u,i,r),this.nodeAdmin=n.nodeAdmin}return Er(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,vA.set("previous_websocket_failure",!0);try{var r;if(ri()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(QA,"/").concat(lA,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/twitter-clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyDr7gSfy5mcvs3eSUluMrWt7u5YnNmztxQ",REACT_APP_AUTH_DOMAIN:"twitter-clone-e2920.firebaseapp.com",REACT_APP_PROJECT_ID:"twitter-clone-e2920",REACT_APP_STORAGE_BUCKET:"twitter-clone-e2920.appspot.com",REACT_APP_MESSAGING_SENDER_ID:"736440001454",REACT_APP_APP_ID:"1:736440001454:web:16a50313f65f23178d1e3f"},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new cP(this.connURL,[],r)}catch(SV){this.log_("Error instantiating WebSocket.");var u=SV.message||SV.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){vA.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=ci(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(qr(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=li(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=MA(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(SV){this.log_("Exception thrown from WebSocket.send():",SV.message||SV.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=QA,!ri()&&"undefined"!==typeof location&&location.hostname&&YA.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a.ac=r),i&&(a.p=i),ZA(e,$A,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==cP&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return vA.isInMemoryStorage||!0===vA.get("previous_websocket_failure")}}]),e}();lP.responsesRequiredToBeHealthy=2,lP.healthyTimeout=3e4;var fP=function(){function e(t){Sr(this,e),this.initTransports_(t)}return Er(e,[{key:"initTransports_",value:function(t){var n=lP&&lP.isAvailable(),r=n&&!lP.previouslyFailed();if(t.webSocketOnly&&(n||CA("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[lP];else{var i,a=this.transports_=[],o=Cr(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var u=i.value;u&&u.isAvailable()&&a.push(u)}}catch(s){o.e(s)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[uP,lP]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();fP.globalTransportInitialized_=!1;var hP=function(){function e(t,n,r,i,a,o,u,s,c,l){Sr(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=SA("c:"+this.id+":"),this.transportManager_=new fP(n),this.log_("Connection created"),this.start_()}return Er(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=WA((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=DA("t",e),n=DA("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=DA("t",e),n=DA("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=DA("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?TA("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):TA("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),QA!==n&&CA("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),WA((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):WA((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(vA.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),dP=function(){function e(){Sr(this,e)}return Er(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),pP=function(){function e(t){Sr(this,e),this.allowedEvents_=t,this.listeners_={},qr(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return Er(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=Ri(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){qr(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),vP=function(e){Pr(n,e);var t=Lr(n);function n(){var e;return Sr(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Xr()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Er(n,[{key:"getInitialEvent",value:function(e){return qr("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(pP),mP=function(){function e(t,n){if(Sr(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return Er(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function yP(){return new mP("")}function gP(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function kP(e){return e.pieces_.length-e.pieceNum_}function bP(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new mP(e.pieces_,t)}function wP(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function _P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function xP(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new mP(t,0)}function IP(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof mP)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new mP(n,0)}function SP(e){return e.pieceNum_>=e.pieces_.length}function TP(e,t){var n=gP(e),r=gP(t);if(null===n)return t;if(n===r)return TP(bP(e),bP(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function EP(e,t){for(var n=_P(e,0),r=_P(t,0),i=0;i<n.length&&i<r.length;i++){var a=RA(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function CP(e,t){if(kP(e)!==kP(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function NP(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(kP(e)>kP(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var AP=Er((function e(t,n){Sr(this,e),this.errorPrefix_=n,this.parts_=_P(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=Ni(this.parts_[r]);PP(this)}));function PP(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+RP(e))}function RP(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var OP=function(e){Pr(n,e);var t=Lr(n);function n(){var e,r,i;return Sr(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return Er(n,[{key:"getInitialEvent",value:function(e){return qr("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(pP),DP=1e3,LP=function(e){Pr(n,e);var t=Lr(n);function n(e,r,i,a,o,u,s,c){var l;if(Sr(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=u,l.appCheckTokenProvider_=s,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=SA("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=DP,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!ri())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return OP.getInstance().on("visible",l.onVisible_,Nr(l)),-1===e.host.indexOf("fblocal")&&vP.getInstance().on("online",l.onOnline_,Nr(l)),l}return Er(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(li(i)),qr(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new Yr,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),qr(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),qr(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var u=o.d,s=o.s;n.warnOnListenWarnings_(u,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(i,a),e.onComplete&&e.onComplete(s,u))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=fi(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=fi(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),qr(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+li(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):TA("Unrecognized action received from server: "+li(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;qr(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=DP,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=DP,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=DP),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=ee(X().mark((function e(){var t,r,i,a,o,u,s,l,f,h,d,p,v,m,y=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,u=!1,s=null,l=function(){s?s.close():(u=!0,i())},f=function(e){qr(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)},this.realtime_={close:l,sendRequest:f},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);case 19:d=e.sent,p=c(d,2),v=p[0],m=p[1],u?IA("getToken() completed but was canceled"):(IA("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=m&&m.token,s=new hP(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){CA(e+" ("+y.repoInfo_.toString()+")"),y.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&CA(e.t0),l());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){IA("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){IA("Resuming connection for reason: "+e),delete this.interruptReasons_[e],pi(this.interruptReasons_)&&(this.reconnectDelay_=DP,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return LA(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new mP(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){IA("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){IA("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=Cr(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=Cr(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}},{key:"sendConnectStats_",value:function(){var e={},t="js";ri()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+lA.replace(/\./g,"-")]=1,Xr()?e["framework.cordova"]=1:ti()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=vP.getInstance().currentlyOnline();return pi(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&hi(e,"w")){var n=di(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();CA("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(dP);LP.nextPersistentConnectionId_=0,LP.nextConnectionId_=0;var MP,FP=function(){function e(t,n){Sr(this,e),this.name=t,this.node=n}return Er(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),UP=function(){function e(){Sr(this,e)}return Er(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new FP(AA,e),r=new FP(AA,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return FP.MIN}}]),e}(),VP=function(e){Pr(n,e);var t=Lr(n);function n(){return Sr(this,n),t.apply(this,arguments)}return Er(n,[{key:"compare",value:function(e,t){return RA(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw zr("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return FP.MIN}},{key:"maxPost",value:function(){return new FP(PA,MP)}},{key:"makePost",value:function(e,t){return qr("string"===typeof e,"KeyIndex indexValue must always be a string."),new FP(e,MP)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return MP},set:function(e){MP=e}}]),n}(UP),jP=new VP,qP=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Sr(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return Er(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),zP=function(){function e(t,n,r,i,a){Sr(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:HP.EMPTY_NODE,this.right=null!=a?a:HP.EMPTY_NODE}return Er(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return HP.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return HP.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();zP.RED=!0,zP.BLACK=!1;var BP,WP=function(){function e(){Sr(this,e)}return Er(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new zP(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),HP=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;Sr(this,e),this.comparator_=t,this.root_=n}return Er(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,zP.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,zP.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new qP(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new qP(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new qP(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new qP(this.root_,null,this.comparator_,!0,e)}}]),e}();function KP(e,t){return RA(e.name,t.name)}function GP(e,t){return RA(e,t)}HP.EMPTY_NODE=new WP;var QP,YP,$P,JP=function(e){return"number"===typeof e?"number:"+UA(e):"string:"+e},XP=function(e){if(e.isLeafNode()){var t=e.val();qr("string"===typeof t||"number"===typeof t||"object"===typeof t&&hi(t,".sv"),"Priority must be a string or number.")}else qr(e===BP||e.isEmpty(),"priority of unexpected type.");qr(e===BP||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},ZP=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;Sr(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,qr(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),XP(this.priorityNode_)}return Er(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return SP(t)?this:".priority"===gP(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=gP(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(qr(".priority"!==r||1===kP(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(bP(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+JP(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?UA(this.value_):this.value_,this.lazyHash_=kA(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(qr(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return qr(i>=0,"Unknown leaf type: "+n),qr(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return QP},set:function(e){QP=e}}]),e}();ZP.VALUE_TYPE_ORDER=["object","boolean","number","string"];var eR,tR,nR=function(e){Pr(n,e);var t=Lr(n);function n(){return Sr(this,n),t.apply(this,arguments)}return Er(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?RA(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return FP.MIN}},{key:"maxPost",value:function(){return new FP(PA,new ZP("[PRIORITY-POST]",$P))}},{key:"makePost",value:function(e,t){var n=YP(e);return new FP(t,new ZP("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(UP),rR=new nR,iR=Math.log(2),aR=function(){function e(t){Sr(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/iR,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return Er(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),oR=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,u=i-r;if(0===u)return null;if(1===u)return a=e[r],o=n?n(a):a,new zP(o,a.node,zP.BLACK,null,null);var s=parseInt(u/2,10)+r,c=t(r,s),l=t(s+1,i);return a=e[s],o=n?n(a):a,new zP(o,a.node,zP.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,u=function(t,r){var a=o-t,u=o;o-=t;var c=i(a+1,u),l=e[a],f=n?n(l):l;s(new zP(f,l.node,r,null,c))},s=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),f=Math.pow(2,t.count-(c+1));l?u(f,zP.BLACK):(u(f,zP.BLACK),u(f,zP.RED))}return a}(new aR(e.length));return new HP(r||t,a)},uR={},sR=function(){function e(t,n){Sr(this,e),this.indexes_=t,this.indexSet_=n}return Er(e,[{key:"get",value:function(e){var t=di(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof HP?t:null}},{key:"hasIndex",value:function(e){return hi(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){qr(t!==jP,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(FP.Wrap),u=o.getNext();u;)a=a||t.isDefinedOn(u.node),i.push(u),u=o.getNext();r=a?oR(i,t.getCompare()):uR;var s=t.toString(),c=Object.assign({},this.indexSet_);c[s]=t;var l=Object.assign({},this.indexes_);return l[s]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(vi(this.indexes_,(function(e,i){var a=di(r.indexSet_,i);if(qr(a,"Missing index implementation for "+i),e===uR){if(a.isDefinedOn(t.node)){for(var o=[],u=n.getIterator(FP.Wrap),s=u.getNext();s;)s.name!==t.name&&o.push(s),s=u.getNext();return o.push(t),oR(o,a.getCompare())}return uR}var c=n.get(t.name),l=e;return c&&(l=l.remove(new FP(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(vi(this.indexes_,(function(e){if(e===uR)return e;var r=n.get(t.name);return r?e.remove(new FP(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return qr(uR&&rR,"ChildrenNode.ts has not been loaded"),eR=eR||new e({".priority":uR},{".priority":rR})}}]),e}(),cR=function(){function e(t,n,r){Sr(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&XP(this.priorityNode_),this.children_.isEmpty()&&qr(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Er(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||tR}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?tR:t}},{key:"getChild",value:function(e){var t=gP(e);return null===t?this:this.getImmediateChild(t).getChild(bP(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(qr(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new FP(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?tR:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=gP(e);if(null===n)return t;qr(".priority"!==gP(e)||1===kP(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(bP(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(rR,(function(o,u){n[o]=u.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var u in n)o[u]=n[u];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+JP(this.getPriority().val())+":"),this.forEachChild(rR,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":kA(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new FP(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new FP(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new FP(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,FP.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,FP.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===lR?-1:0}},{key:"withIndex",value:function(t){if(t===jP||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===jP||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(rR),r=t.getIterator(rR),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===jP?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return tR||(tR=new e(new HP(GP),null,sR.Default))}}]),e}();cR.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var lR=new(function(e){Pr(n,e);var t=Lr(n);function n(){return Sr(this,n),t.call(this,new HP(GP),cR.EMPTY_NODE,sR.Default)}return Er(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return cR.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(cR));Object.defineProperties(FP,{MIN:{value:new FP(AA,cR.EMPTY_NODE)},MAX:{value:new FP(PA,lR)}}),VP.__EMPTY_NODE=cR.EMPTY_NODE,ZP.__childrenNodeConstructor=cR,BP=lR,function(e){$P=e}(lR);function fR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return cR.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),qr(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new ZP(n,fR(t))}if(e instanceof Array){var r=cR.EMPTY_NODE;return FA(e,(function(t,n){if(hi(e,t)&&"."!==t.substring(0,1)){var i=fR(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(fR(t))}var i=[],a=!1,o=e;if(FA(o,(function(e,t){if("."!==e.substring(0,1)){var n=fR(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new FP(e,n)))}})),0===i.length)return cR.EMPTY_NODE;var u=oR(i,KP,(function(e){return e.name}),GP);if(a){var s=oR(i,rR.getCompare());return new cR(u,fR(t),new sR({".priority":s},{".priority":rR}))}return new cR(u,fR(t),sR.Default)}!function(e){YP=e}(fR);var hR=function(e){Pr(n,e);var t=Lr(n);function n(e){var r;return Sr(this,n),(r=t.call(this)).indexPath_=e,qr(!SP(e)&&".priority"!==gP(e),"Can't create PathIndex with empty path or .priority key"),r}return Er(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?RA(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=fR(e),r=cR.EMPTY_NODE.updateChild(this.indexPath_,n);return new FP(t,r)}},{key:"maxPost",value:function(){var e=cR.EMPTY_NODE.updateChild(this.indexPath_,lR);return new FP(PA,e)}},{key:"toString",value:function(){return _P(this.indexPath_,0).join("/")}}]),n}(UP),dR=function(e){Pr(n,e);var t=Lr(n);function n(){return Sr(this,n),t.apply(this,arguments)}return Er(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?RA(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return FP.MIN}},{key:"maxPost",value:function(){return FP.MAX}},{key:"makePost",value:function(e,t){var n=fR(e);return new FP(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(UP),pR=new dR,vR="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",mR=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=vR.charAt(n%64),n=Math.floor(n/64);qr(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=vR.charAt(t[r]);return qr(20===o.length,"nextPushId: Length should be 20."),o}}(),yR=function(e){if("2147483647"===e)return"-";var t=zA(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return PA;var a=n[i],o=vR.charAt(vR.indexOf(a)+1);return n[i]=o,n.slice(0,i+1).join("")},gR=function(e){if("-2147483648"===e)return AA;var t=zA(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=vR.charAt(vR.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function kR(e){return{type:"value",snapshotNode:e}}function bR(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function wR(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function _R(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var xR=function(){function e(t){Sr(this,e),this.index_=t}return Er(e,[{key:"updateChild",value:function(e,t,n,r,i,a){qr(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(wR(t,o)):qr(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(bR(t,n)):a.trackChildChange(_R(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(rR,(function(e,r){t.hasChild(e)||n.trackChildChange(wR(e,r))})),t.isLeafNode()||t.forEachChild(rR,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(_R(t,r,i))}else n.trackChildChange(bR(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?cR.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),IR=function(){function e(t){Sr(this,e),this.indexedFilter_=new xR(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return Er(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new FP(t,n))||(n=cR.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=cR.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(cR.EMPTY_NODE);var i=this;return t.forEachChild(rR,(function(e,t){i.matches(new FP(e,t))||(r=r.updateImmediateChild(e,cR.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),SR=function(){function e(t){Sr(this,e),this.rangedFilter_=new IR(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return Er(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new FP(t,n))||(n=cR.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=cR.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=cR.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),o)<=0:this.index_.compare(o,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(o.name,o.node),a++}}else{var u,s,c,l;if(r=(r=t.withIndex(this.index_)).updatePriority(cR.EMPTY_NODE),this.reverse_){l=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),s=this.rangedFilter_.getStartPost();var f=this.index_.getCompare();c=function(e,t){return f(t,e)}}else l=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),s=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();for(var h=0,d=!1;l.hasNext();){var p=l.getNext();!d&&c(u,p)<=0&&(d=!0),d&&h<this.limit_&&c(p,s)<=0?h++:r=r.updateImmediateChild(p.name,cR.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var u=e;qr(u.numChildren()===this.limit_,"");var s=new FP(t,n),c=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),l=this.rangedFilter_.matches(s);if(u.hasChild(t)){for(var f=u.getImmediateChild(t),h=r.getChildAfterChild(this.index_,c,this.reverse_);null!=h&&(h.name===t||u.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);var d=null==h?1:a(h,s);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(_R(t,n,f)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(wR(t,f));var p=u.updateImmediateChild(t,cR.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(null!=i&&i.trackChildChange(bR(h.name,h.node)),p.updateImmediateChild(h.name,h.node)):p}return n.isEmpty()?e:l&&a(c,s)>=0?(null!=i&&(i.trackChildChange(wR(c.name,c.node)),i.trackChildChange(bR(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(c.name,cR.EMPTY_NODE)):e}}]),e}(),TR=function(){function e(){Sr(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=rR}return Er(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return qr(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return qr(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:AA}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return qr(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return qr(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:PA}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return qr(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===rR}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function ER(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function CR(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function NR(e,t){var n=e.copy();return n.index_=t,n}function AR(e){var t,n={};return e.isDefault()||(e.index_===rR?t="$priority":e.index_===pR?t="$value":e.index_===jP?t="$key":(qr(e.index_ instanceof hR,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=li(t),e.startSet_&&(n.startAt=li(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+li(e.indexStartName_))),e.endSet_&&(n.endAt=li(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+li(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function PR(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==rR&&(t.i=e.index_.toString()),t}var RR=function(e){Pr(n,e);var t=Lr(n);function n(e,r,i,a){var o;return Sr(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=SA("p:rest:"),o.listens_={},o}return Er(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var u=n.getListenId_(e,r),s={};this.listens_[u]=s;var c=AR(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),di(a.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=AR(e._queryParams),r=e._path.toString(),i=new Yr;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=c(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var s=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+gi(n);t.log_("Sending REST request for "+s);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(r&&4===l.readyState){t.log_("REST Response for "+s+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=ci(l.responseText)}catch(SV){CA("Failed to parse JSON response for "+s+": "+l.responseText)}r(null,e)}else 401!==l.status&&404!==l.status&&CA("Got unsuccessful REST response for "+s+" Status: "+l.status),r(l.status);r=null}},l.open("GET",s,!0),l.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(qr(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(dP),OR=function(){function e(){Sr(this,e),this.rootNode_=cR.EMPTY_NODE}return Er(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function DR(){return{value:null,children:new Map}}function LR(e,t,n){if(SP(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=gP(t);e.children.has(r)||e.children.set(r,DR()),LR(e.children.get(r),t=bP(t),n)}}function MR(e,t){if(SP(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(rR,(function(t,n){LR(e,new mP(t),n)})),MR(e,t)}if(e.children.size>0){var r=gP(t);if(t=bP(t),e.children.has(r))MR(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function FR(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){FR(r,new mP(t.toString()+"/"+e),n)}))}var UR,VR=function(){function e(t){Sr(this,e),this.collection_=t,this.last_=null}return Er(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&FA(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),jR=function(){function e(t,n){Sr(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new VR(t);var r=1e4+2e4*Math.random();WA(this.reportStats_.bind(this),Math.floor(r))}return Er(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;FA(t,(function(t,i){i>0&&hi(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),WA(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function qR(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(UR||(UR={}));var zR,BR=function(){function e(t,n,r){Sr(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=UR.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return Er(e,[{key:"operationForChild",value:function(t){if(SP(this.path)){if(null!=this.affectedTree.value)return qr(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new mP(t));return new e(yP(),n,this.revert)}return qr(gP(this.path)===t,"operationForChild called for unrelated child."),new e(bP(this.path),this.affectedTree,this.revert)}}]),e}(),WR=function(){function e(t,n){Sr(this,e),this.source=t,this.path=n,this.type=UR.LISTEN_COMPLETE}return Er(e,[{key:"operationForChild",value:function(t){return SP(this.path)?new e(this.source,yP()):new e(this.source,bP(this.path))}}]),e}(),HR=function(){function e(t,n,r){Sr(this,e),this.source=t,this.path=n,this.snap=r,this.type=UR.OVERWRITE}return Er(e,[{key:"operationForChild",value:function(t){return SP(this.path)?new e(this.source,yP(),this.snap.getImmediateChild(t)):new e(this.source,bP(this.path),this.snap)}}]),e}(),KR=function(){function e(t,n,r){Sr(this,e),this.source=t,this.path=n,this.children=r,this.type=UR.MERGE}return Er(e,[{key:"operationForChild",value:function(t){if(SP(this.path)){var n=this.children.subtree(new mP(t));return n.isEmpty()?null:n.value?new HR(this.source,yP(),n.value):new e(this.source,yP(),n)}return qr(gP(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,bP(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),GR=function(){function e(t,n,r){Sr(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return Er(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(SP(e))return this.isFullyInitialized()&&!this.filtered_;var t=gP(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),QR=Er((function e(t){Sr(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function YR(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw zr("Should only compare child_ events.");var r=new FP(t.childName,t.snapshotNode),i=new FP(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function $R(e,t){return{eventCache:e,serverCache:t}}function JR(e,t,n,r){return $R(new GR(t,n,r),e.serverCache)}function XR(e,t,n,r){return $R(e.eventCache,new GR(t,n,r))}function ZR(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function eO(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var tO=function(){return zR||(zR=new HP(OA)),zR},nO=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tO();Sr(this,e),this.value=t,this.children=n}return Er(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:yP(),value:this.value};if(SP(e))return null;var n=gP(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(bP(e),t);return null!=i?{path:IP(new mP(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(SP(t))return this;var n=gP(t),r=this.children.get(n);return null!==r?r.subtree(bP(t)):new e(null)}},{key:"set",value:function(t,n){if(SP(t))return new e(n,this.children);var r=gP(t),i=(this.children.get(r)||new e(null)).set(bP(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(SP(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=gP(t),r=this.children.get(n);if(r){var i,a=r.remove(bP(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(SP(e))return this.value;var t=gP(e),n=this.children.get(t);return n?n.get(bP(e)):null}},{key:"setTree",value:function(t,n){if(SP(t))return n;var r,i=gP(t),a=(this.children.get(i)||new e(null)).setTree(bP(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(yP(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(IP(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,yP(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(SP(e))return null;var i=gP(e),a=this.children.get(i);return a?a.findOnPath_(bP(e),IP(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,yP(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(SP(t))return this;this.value&&r(n,this.value);var i=gP(t),a=this.children.get(i);return a?a.foreachOnPath_(bP(t),IP(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(yP(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(IP(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return FA(t,(function(e,t){n=n.set(new mP(e),t)})),n}}]),e}(),rO=function(){function e(t){Sr(this,e),this.writeTree_=t}return Er(e,null,[{key:"empty",value:function(){return new e(new nO(null))}}]),e}();function iO(e,t,n){if(SP(t))return new rO(new nO(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=TP(i,t);return a=a.updateChild(o,n),new rO(e.writeTree_.set(i,a))}var u=new nO(n),s=e.writeTree_.setTree(t,u);return new rO(s)}function aO(e,t,n){var r=e;return FA(n,(function(e,n){r=iO(r,IP(t,e),n)})),r}function oO(e,t){if(SP(t))return rO.empty();var n=e.writeTree_.setTree(t,new nO(null));return new rO(n)}function uO(e,t){return null!=sO(e,t)}function sO(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(TP(n.path,t)):null}function cO(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(rR,(function(e,n){t.push(new FP(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new FP(e,n.value))})),t}function lO(e,t){if(SP(t))return e;var n=sO(e,t);return new rO(null!=n?new nO(n):e.writeTree_.subtree(t))}function fO(e){return e.writeTree_.isEmpty()}function hO(e,t){return dO(yP(),e.writeTree_,t)}function dO(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(qr(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=dO(IP(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(IP(e,".priority"),r)),n}function pO(e,t){return CO(t,e)}function vO(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function mO(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));qr(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var u=e.allWrites[o];u.visible&&(o>=n&&yO(u,r.path)?i=!1:NP(r.path,u.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=kO(e.allWrites,gO,yP()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=oO(e.visibleWrites,r.path):FA(r.children,(function(t){e.visibleWrites=oO(e.visibleWrites,IP(r.path,t))}));return!0}return!1}function yO(e,t){if(e.snap)return NP(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&NP(IP(e.path,n),t))return!0;return!1}function gO(e){return e.visible}function kO(e,t,n){for(var r=rO.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,u=void 0;if(a.snap)NP(n,o)?r=iO(r,u=TP(n,o),a.snap):NP(o,n)&&(u=TP(o,n),r=iO(r,yP(),a.snap.getChild(u)));else{if(!a.children)throw zr("WriteRecord should have .snap or .children");if(NP(n,o))r=aO(r,u=TP(n,o),a.children);else if(NP(o,n))if(SP(u=TP(o,n)))r=aO(r,yP(),a.children);else{var s=di(a.children,gP(u));if(s){var c=s.getChild(bP(u));r=iO(r,yP(),c)}}}}}return r}function bO(e,t,n,r,i){if(r||i){var a=lO(e.visibleWrites,t);if(!i&&fO(a))return n;if(i||null!=n||uO(a,yP())){return hO(kO(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(NP(e.path,t)||NP(t,e.path))}),t),n||cR.EMPTY_NODE)}return null}var o=sO(e.visibleWrites,t);if(null!=o)return o;var u=lO(e.visibleWrites,t);return fO(u)?n:null!=n||uO(u,yP())?hO(u,n||cR.EMPTY_NODE):null}function wO(e,t,n,r){return bO(e.writeTree,e.treePath,t,n,r)}function _O(e,t){return function(e,t,n){var r=cR.EMPTY_NODE,i=sO(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(rR,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=lO(e.visibleWrites,t);return n.forEachChild(rR,(function(e,t){var n=hO(lO(a,new mP(e)),t);r=r.updateImmediateChild(e,n)})),cO(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return cO(lO(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function xO(e,t,n,r){return function(e,t,n,r,i){qr(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=IP(t,n);if(uO(e.visibleWrites,a))return null;var o=lO(e.visibleWrites,a);return fO(o)?i.getChild(n):hO(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function IO(e,t){return function(e,t){return sO(e.visibleWrites,t)}(e.writeTree,IP(e.treePath,t))}function SO(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var u,s=lO(e.visibleWrites,t),c=sO(s,yP());if(null!=c)u=c;else{if(null==n)return[];u=hO(s,n)}if((u=u.withIndex(o)).isEmpty()||u.isLeafNode())return[];for(var l=[],f=o.getCompare(),h=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o),d=h.getNext();d&&l.length<i;)0!==f(d,r)&&l.push(d),d=h.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function TO(e,t,n){return function(e,t,n,r){var i=IP(t,n),a=sO(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?hO(lO(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function EO(e,t){return CO(IP(e.treePath,t),e.writeTree)}function CO(e,t){return{treePath:e,writeTree:t}}var NO=function(){function e(){Sr(this,e),this.changeMap=new Map}return Er(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;qr("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),qr(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,_R(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,wR(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,bR(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw zr("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,_R(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),AO=new(function(){function e(){Sr(this,e)}return Er(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),PO=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Sr(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return Er(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new GR(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return TO(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:eO(this.viewCache_),i=SO(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function RO(e,t,n,r,i){var a,o,u=new NO;if(n.type===UR.OVERWRITE){var s=n;s.source.fromUser?a=LO(e,t,s.path,s.snap,r,i,u):(qr(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.serverCache.isFiltered()&&!SP(s.path),a=DO(e,t,s.path,s.snap,r,i,o,u))}else if(n.type===UR.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var u=t;return r.foreach((function(r,s){var c=IP(n,r);MO(t,gP(c))&&(u=LO(e,u,c,s,i,a,o))})),r.foreach((function(r,s){var c=IP(n,r);MO(t,gP(c))||(u=LO(e,u,c,s,i,a,o))})),u}(e,t,c.path,c.children,r,i,u):(qr(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=UO(e,t,c.path,c.children,r,i,o,u))}else if(n.type===UR.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=IO(r,n))return t;var u,s=new PO(r,t,i),c=t.eventCache.getNode();if(SP(n)||".priority"===gP(n)){var l;if(t.serverCache.isFullyInitialized())l=wO(r,eO(t));else{var f=t.serverCache.getNode();qr(f instanceof cR,"serverChildren would be complete if leaf node"),l=_O(r,f)}u=e.filter.updateFullNode(c,l,a)}else{var h=gP(n),d=TO(r,h,t.serverCache);null==d&&t.serverCache.isCompleteForChild(h)&&(d=c.getImmediateChild(h)),(u=null!=d?e.filter.updateChild(c,h,d,bP(n),s,a):t.eventCache.getNode().hasChild(h)?e.filter.updateChild(c,h,cR.EMPTY_NODE,bP(n),s,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=wO(r,eO(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,o,a))}return o=t.serverCache.isFullyInitialized()||null!=IO(r,yP()),JR(t,u,o,e.filter.filtersNodes())}(e,t,l.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=IO(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(SP(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return DO(e,t,n,s.getNode().getChild(n),i,a,u,o);if(SP(n)){var c=new nO(null);return s.getNode().forEachChild(jP,(function(e,t){c=c.set(new mP(e),t)})),UO(e,t,n,c,i,a,u,o)}return t}var l=new nO(null);return r.foreach((function(e,t){var r=IP(n,e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))})),UO(e,t,n,l,i,a,u,o)}(e,t,l.path,l.affectedTree,r,i,u)}else{if(n.type!==UR.LISTEN_COMPLETE)throw zr("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=XR(t,a.getNode(),a.isFullyInitialized()||SP(n),a.isFiltered());return OO(e,o,n,r,AO,i)}(e,t,n.path,r,u)}var f=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=ZR(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(kR(ZR(t)))}}(t,a,f),{viewCache:a,changes:f}}function OO(e,t,n,r,i,a){var o,u,s=t.eventCache;if(null!=IO(r,n))return t;if(SP(n))if(qr(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=eO(t),l=_O(r,c instanceof cR?c:cR.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var f=wO(r,eO(t));o=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var h=gP(n);if(".priority"===h){qr(1===kP(n),"Can't have a priority with additional path components");var d=s.getNode(),p=xO(r,n,d,u=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):s.getNode()}else{var v,m=bP(n);if(s.isCompleteForChild(h)){u=t.serverCache.getNode();var y=xO(r,n,s.getNode(),u);v=null!=y?s.getNode().getImmediateChild(h).updateChild(m,y):s.getNode().getImmediateChild(h)}else v=TO(r,h,t.serverCache);o=null!=v?e.filter.updateChild(s.getNode(),h,v,m,i,a):s.getNode()}}return JR(t,o,s.isFullyInitialized()||SP(n),e.filter.filtersNodes())}function DO(e,t,n,r,i,a,o,u){var s,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(SP(n))s=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var f=c.getNode().updateChild(n,r);s=l.updateFullNode(c.getNode(),f,null)}else{var h=gP(n);if(!c.isCompleteForPath(n)&&kP(n)>1)return t;var d=bP(n),p=c.getNode().getImmediateChild(h).updateChild(d,r);s=".priority"===h?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),h,p,d,AO,null)}var v=XR(t,s,c.isFullyInitialized()||SP(n),l.filtersNodes());return OO(e,v,n,i,new PO(i,v,a),u)}function LO(e,t,n,r,i,a,o){var u,s,c=t.eventCache,l=new PO(i,t,a);if(SP(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=JR(t,s,!0,e.filter.filtersNodes());else{var f=gP(n);if(".priority"===f)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=JR(t,s,c.isFullyInitialized(),c.isFiltered());else{var h,d=bP(n),p=c.getNode().getImmediateChild(f);if(SP(d))h=r;else{var v=l.getCompleteChild(f);h=null!=v?".priority"===wP(d)&&v.getChild(xP(d)).isEmpty()?v:v.updateChild(d,r):cR.EMPTY_NODE}if(p.equals(h))u=t;else u=JR(t,e.filter.updateChild(c.getNode(),f,h,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return u}function MO(e,t){return e.eventCache.isCompleteForChild(t)}function FO(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function UO(e,t,n,r,i,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,c=t;s=SP(n)?r:new nO(null).setTree(n,r);var l=t.serverCache.getNode();return s.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var s=FO(0,t.serverCache.getNode().getImmediateChild(n),r);c=DO(e,c,new mP(n),s,i,a,o,u)}})),s.children.inorderTraversal((function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!s){var f=FO(0,t.serverCache.getNode().getImmediateChild(n),r);c=DO(e,c,new mP(n),f,i,a,o,u)}})),c}var VO,jO=function(){function e(t,n){Sr(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new xR(i.getIndex()),o=(r=i).loadsAllData()?new xR(r.getIndex()):r.hasLimit()?new SR(r):new IR(r);this.processor_=function(e){return{filter:e}}(o);var u=n.serverCache,s=n.eventCache,c=a.updateFullNode(cR.EMPTY_NODE,u.getNode(),null),l=o.updateFullNode(cR.EMPTY_NODE,s.getNode(),null),f=new GR(c,u.isFullyInitialized(),a.filtersNodes()),h=new GR(l,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=$R(h,f),this.eventGenerator_=new QR(this.query_)}return Er(e,[{key:"query",get:function(){return this.query_}}]),e}();function qO(e,t){var n=eO(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!SP(t)&&!n.getImmediateChild(gP(t)).isEmpty())?n.getChild(t):null}function zO(e){return 0===e.eventRegistrations_.length}function BO(e,t,n){var r=[];if(n){qr(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var u=e.eventRegistrations_[o];if(u.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(u)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function WO(e,t,n,r){t.type===UR.MERGE&&null!==t.source.queryId&&(qr(eO(e.viewCache_),"We should always have a full cache before handling merges"),qr(ZR(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,u=RO(e.processor_,o,t,n,r);return i=e.processor_,a=u.viewCache,qr(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),qr(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),qr(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,HO(e,u.changes,u.viewCache.eventCache.getNode(),null)}function HO(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),YR(e,i,"child_removed",t,r,n),YR(e,i,"child_added",t,r,n),YR(e,i,"child_moved",a,r,n),YR(e,i,"child_changed",t,r,n),YR(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var KO,GO=Er((function e(){Sr(this,e),this.views=new Map}));function QO(e){return 0===e.views.size}function YO(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return qr(null!=a,"SyncTree gave us an op for an invalid query."),WO(a,t,n,r)}var o,u=[],s=Cr(e.views.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u=u.concat(WO(c,t,n,r))}}catch(l){s.e(l)}finally{s.f()}return u}function $O(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var u=wO(n,i?r:null),s=!1;u?s=!0:r instanceof cR?(u=_O(n,r),s=!1):(u=cR.EMPTY_NODE,s=!1);var c=$R(new GR(u,s,!1),new GR(r,i,!1));return new jO(t,c)}return o}function JO(e,t,n,r,i,a){var o=$O(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(rR,(function(e,t){r.push(bR(e,t))})),n.isFullyInitialized()&&r.push(kR(n.getNode())),HO(e,r,n.getNode(),t)}(o,n)}function XO(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],u=rD(e);if("default"===i){var s,l=Cr(e.views.entries());try{for(l.s();!(s=l.n()).done;){var f=c(s.value,2),h=f[0],d=f[1];o=o.concat(BO(d,n,r)),zO(d)&&(e.views.delete(h),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(v){l.e(v)}finally{l.f()}}else{var p=e.views.get(i);p&&(o=o.concat(BO(p,n,r)),zO(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return u&&!rD(e)&&a.push(new(qr(VO,"Reference.ts has not been loaded"),VO)(t._repo,t._path)),{removed:a,events:o}}function ZO(e){var t,n=[],r=Cr(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function eD(e,t){var n,r=null,i=Cr(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||qO(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function tD(e,t){if(t._queryParams.loadsAllData())return iD(e);var n=t._queryIdentifier;return e.views.get(n)}function nD(e,t){return null!=tD(e,t)}function rD(e){return null!=iD(e)}function iD(e){var t,n=Cr(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var aD=1,oD=Er((function e(t){Sr(this,e),this.listenProvider_=t,this.syncPointTree_=new nO(null),this.pendingWriteTree_={visibleWrites:rO.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function uD(e,t,n,r,i){return function(e,t,n,r,i){qr(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=iO(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?mD(e,new HR({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function sD(e,t,n,r){!function(e,t,n,r){qr(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=aO(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=nO.fromObject(n);return mD(e,new KR({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function cD(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=vO(e.pendingWriteTree_,t),i=mO(e.pendingWriteTree_,t);if(i){var a=new nO(null);return null!=r.snap?a=a.set(yP(),!0):FA(r.children,(function(e){a=a.set(new mP(e),!0)})),mD(e,new BR(r.path,a,n))}return[]}function lD(e,t,n){return mD(e,new HR({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function fD(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t._path,o=e.syncPointTree_.get(a),u=[];if(o&&("default"===t._queryIdentifier||nD(o,t))){var s=XO(o,t,n,r);QO(o)&&(e.syncPointTree_=e.syncPointTree_.remove(a));var c=s.removed;if(u=s.events,!i){var l=-1!==c.findIndex((function(e){return e._queryParams.loadsAllData()})),f=e.syncPointTree_.findOnPath(a,(function(e,t){return rD(t)}));if(l&&!f){var h=e.syncPointTree_.subtree(a);if(!h.isEmpty())for(var d=SD(h),p=0;p<d.length;++p){var v=d[p],m=v.query,y=kD(e,v);e.listenProvider_.startListening(TD(m),bD(e,m),y.hashFn,y.onComplete)}}if(!f&&c.length>0&&!r)if(l){var g=null;e.listenProvider_.stopListening(TD(t),g)}else c.forEach((function(t){var n=e.queryToTagMap.get(wD(t));e.listenProvider_.stopListening(TD(t),n)}))}ED(e,c)}return u}function hD(e,t,n,r){var i=_D(e,r);if(null!=i){var a=xD(i),o=a.path,u=a.queryId,s=TP(o,t);return ID(e,o,new HR(qR(u),s,n))}return[]}function dD(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=TP(e,i);a=a||eD(t,n),o=o||rD(t)}));var u,s=e.syncPointTree_.get(i);if(s?(o=o||rD(s),a=a||eD(s,yP())):(s=new GO,e.syncPointTree_=e.syncPointTree_.set(i,s)),null!=a)u=!0;else{u=!1,a=cR.EMPTY_NODE;var c=e.syncPointTree_.subtree(i);c.foreachChild((function(e,t){var n=eD(t,yP());n&&(a=a.updateImmediateChild(e,n))}))}var l=nD(s,t);if(!l&&!t._queryParams.loadsAllData()){var f=wD(t);qr(!e.queryToTagMap.has(f),"View does not exist, but we have a tag");var h=CD();e.queryToTagMap.set(f,h),e.tagToQueryMap.set(h,f)}var d=pO(e.pendingWriteTree_,i),p=JO(s,t,n,d,a,u);if(!l&&!o&&!r){var v=tD(s,t);p=p.concat(ND(e,t,v))}return p}function pD(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=eD(n,TP(e,t));if(r)return r}));return bO(r,t,i,n,!0)}function vD(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=TP(e,n);r=r||eD(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||eD(i,yP()):(i=new GO,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new GR(r,!0,!1):null;return function(e){return ZR(e.viewCache_)}($O(i,t,pO(e.pendingWriteTree_,t._path),a?o.getNode():cR.EMPTY_NODE,a))}function mD(e,t){return yD(t,e.syncPointTree_,null,pO(e.pendingWriteTree_,yP()))}function yD(e,t,n,r){if(SP(e.path))return gD(e,t,n,r);var i=t.get(yP());null==n&&null!=i&&(n=eD(i,yP()));var a=[],o=gP(e.path),u=e.operationForChild(o),s=t.children.get(o);if(s&&u){var c=n?n.getImmediateChild(o):null,l=EO(r,o);a=a.concat(yD(u,s,c,l))}return i&&(a=a.concat(YO(i,e,r,n))),a}function gD(e,t,n,r){var i=t.get(yP());null==n&&null!=i&&(n=eD(i,yP()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,u=EO(r,t),s=e.operationForChild(t);s&&(a=a.concat(gD(s,i,o,u)))})),i&&(a=a.concat(YO(i,e,r,n))),a}function kD(e,t){var n=t.query,r=bD(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||cR.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=_D(e,n);if(r){var i=xD(r),a=i.path,o=i.queryId,u=TP(a,t);return ID(e,a,new WR(qR(o),u))}return[]}(e,n._path,r):function(e,t){return mD(e,new WR({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return fD(e,n,null,i)}}}function bD(e,t){var n=wD(t);return e.queryToTagMap.get(n)}function wD(e){return e._path.toString()+"$"+e._queryIdentifier}function _D(e,t){return e.tagToQueryMap.get(t)}function xD(e){var t=e.indexOf("$");return qr(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new mP(e.substr(0,t))}}function ID(e,t,n){var r=e.syncPointTree_.get(t);return qr(r,"Missing sync point for query tag that we're tracking"),YO(r,n,pO(e.pendingWriteTree_,t),null)}function SD(e){return e.fold((function(e,t,n){if(t&&rD(t))return[iD(t)];var r=[];return t&&(r=ZO(t)),FA(n,(function(e,t){r=r.concat(t)})),r}))}function TD(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(qr(KO,"Reference.ts has not been loaded"),KO)(e._repo,e._path):e}function ED(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=wD(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}function CD(){return aD++}function ND(e,t,n){var r=t._path,i=bD(e,t),a=kD(e,n),o=e.listenProvider_.startListening(TD(t),i,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(r);if(i)qr(!rD(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var s=u.fold((function(e,t,n){if(!SP(e)&&t&&rD(t))return[iD(t).query];var r=[];return t&&(r=r.concat(ZO(t).map((function(e){return e.query})))),FA(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<s.length;++c){var l=s[c];e.listenProvider_.stopListening(TD(l),bD(e,l))}return o}var AD=function(){function e(t){Sr(this,e),this.node_=t}return Er(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),PD=function(){function e(t,n){Sr(this,e),this.syncTree_=t,this.path_=n}return Er(e,[{key:"getImmediateChild",value:function(t){var n=IP(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return pD(this.syncTree_,this.path_)}}]),e}(),RD=function(e,t,n){return e&&"object"===typeof e?(qr(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?OD(e[".sv"],t,n):"object"===typeof e[".sv"]?DD(e[".sv"],t):void qr(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},OD=function(e,t,n){if("timestamp"===e)return n.timestamp;qr(!1,"Unexpected server value: "+e)},DD=function(e,t,n){e.hasOwnProperty("increment")||qr(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&qr(!1,"Unexpected increment value: "+r);var i=t.node();if(qr(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},LD=function(e,t,n,r){return FD(t,new PD(n,e),r)},MD=function(e,t,n){return FD(e,new AD(t),n)};function FD(e,t,n){var r,i=e.getPriority().val(),a=RD(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,u=RD(o.getValue(),t,n);return u!==o.getValue()||a!==o.getPriority().val()?new ZP(u,fR(a)):e}var s=e;return r=s,a!==s.getPriority().val()&&(r=r.updatePriority(new ZP(a))),s.forEachChild(rR,(function(e,i){var a=FD(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var UD=Er((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};Sr(this,e),this.name=t,this.parent=n,this.node=r}));function VD(e,t){for(var n=t instanceof mP?t:new mP(t),r=e,i=gP(n);null!==i;){var a=di(r.node.children,i)||{children:{},childCount:0};r=new UD(i,r,a),i=gP(n=bP(n))}return r}function jD(e){return e.node.value}function qD(e,t){e.node.value=t,KD(e)}function zD(e){return e.node.childCount>0}function BD(e,t){FA(e.node.children,(function(n,r){t(new UD(n,e,r))}))}function WD(e,t,n,r){n&&!r&&t(e),BD(e,(function(e){WD(e,t,!0,r)})),n&&r&&t(e)}function HD(e){return new mP(null===e.parent?e.name:HD(e.parent)+"/"+e.name)}function KD(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===jD(e)&&!zD(e)}(n),i=hi(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,KD(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,KD(e))}(e.parent,e.name,e)}var GD=/[\[\].#$\/\u0000-\u001F\u007F]/,QD=/[\[\].#$\u0000-\u001F\u007F]/,YD=10485760,$D=function(e){return"string"===typeof e&&0!==e.length&&!GD.test(e)},JD=function(e){return"string"===typeof e&&0!==e.length&&!QD.test(e)},XD=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!NA(e)||e&&"object"===typeof e&&hi(e,".sv")},ZD=function(e,t,n,r){r&&void 0===t||eL(Ti(e,"value"),t,n)},eL=function e(t,n,r){var i=r instanceof mP?new AP(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+RP(i));if("function"===typeof n)throw new Error(t+"contains a function "+RP(i)+" with contents = "+n.toString());if(NA(n))throw new Error(t+"contains "+n.toString()+" "+RP(i));if("string"===typeof n&&n.length>YD/3&&Ni(n)>YD)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+RP(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(FA(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!$D(n)))throw new Error(t+" contains an invalid key ("+n+") "+RP(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Ni(t),PP(e)}(i,n),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=Ni(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+RP(i)+" in addition to actual children.")}},tL=function(e,t,n,r){if(!r||void 0!==t){var i=Ti(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];FA(t,(function(e,t){var r=new mP(e);if(eL(i,t,IP(n,r)),".priority"===wP(r)&&!XD(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=_P(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!$D(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(EP);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&NP(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},nL=function(e,t,n){if(!n||void 0!==t){if(NA(t))throw new Error(Ti(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!XD(t))throw new Error(Ti(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},rL=function(e,t,n,r){if((!r||void 0!==n)&&!$D(n))throw new Error(Ti(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},iL=function(e,t,n,r){if((!r||void 0!==n)&&!JD(n))throw new Error(Ti(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},aL=function(e,t){if(".info"===gP(t))throw new Error(e+" failed = Can't modify data under /.info/")},oL=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!$D(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),JD(e)}(n))throw new Error(Ti(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},uL=Er((function e(){Sr(this,e),this.eventLists_=[],this.recursionDepth_=0}));function sL(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||CP(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function cL(e,t,n){sL(e,n),fL(e,(function(e){return CP(e,t)}))}function lL(e,t,n){sL(e,n),fL(e,(function(e){return NP(e,t)||NP(t,e)}))}function fL(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(hL(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function hL(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();wA&&IA("event: "+n.toString()),BA(r)}}}var dL="repo_interrupt",pL=function(){function e(t,n,r,i){Sr(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new uL,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=DR(),this.transactionQueueTree_=new UD,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return Er(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function vL(e,t,n){if(e.stats_=rP(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new RR(e.repoInfo_,(function(t,n,r,i){gL(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return kL(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{li(n)}catch(SV){throw new Error("Invalid authOverride provided: "+SV)}}e.persistentConnection_=new LP(e.repoInfo_,t,(function(t,n,r,i){gL(e,t,n,r,i)}),(function(t){kL(e,t)}),(function(t){!function(e,t){FA(t,(function(t,n){bL(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return nP[n]||(nP[n]=t()),nP[n]}(e.repoInfo_,(function(){return new jR(e.stats_,e.server_)})),e.infoData_=new OR,e.infoSyncTree_=new oD({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=lD(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),bL(e,"connected",!1),e.serverSyncTree_=new oD({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);lL(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function mL(e){var t=e.infoData_.getNode(new mP(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function yL(e){return(t=(t={timestamp:mL(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function gL(e,t,n,r,i){e.dataUpdateCount++;var a=new mP(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var u=vi(n,(function(e){return fR(e)}));o=function(e,t,n,r){var i=_D(e,r);if(i){var a=xD(i),o=a.path,u=a.queryId,s=TP(o,t),c=nO.fromObject(n);return ID(e,o,new KR(qR(u),s,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var s=fR(n);o=hD(e.serverSyncTree_,a,s,i)}else if(r){var c=vi(n,(function(e){return fR(e)}));o=function(e,t,n){var r=nO.fromObject(n);return mD(e,new KR({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=fR(n);o=lD(e.serverSyncTree_,a,l)}var f=a;o.length>0&&(f=RL(e,a)),lL(e.eventQueue_,f,o)}function kL(e,t){bL(e,"connected",t),!1===t&&function(e){EL(e,"onDisconnectEvents");var t=yL(e),n=DR();FR(e.onDisconnect_,yP(),(function(r,i){var a=LD(r,i,e.serverSyncTree_,t);LR(n,r,a)}));var r=[];FR(n,yP(),(function(t,n){r=r.concat(lD(e.serverSyncTree_,t,n));var i=FL(e,t);RL(e,i)})),e.onDisconnect_=DR(),lL(e.eventQueue_,yP(),r)}(e)}function bL(e,t,n){var r=new mP("/.info/"+t),i=fR(n);e.infoData_.updateSnapshot(r,i);var a=lD(e.infoSyncTree_,r,i);lL(e.eventQueue_,r,a)}function wL(e){return e.nextWriteId_++}function _L(e,t,n,r,i){EL(e,"set",{path:t.toString(),value:n,priority:r});var a=yL(e),o=fR(n,r),u=pD(e.serverSyncTree_,t),s=MD(o,u,a),c=wL(e),l=uD(e.serverSyncTree_,t,s,c,!0);sL(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||CA("set at "+t+" failed: "+n);var o=cD(e.serverSyncTree_,c,!a);lL(e.eventQueue_,t,o),CL(e,i,n,r)}));var f=FL(e,t);RL(e,f),lL(e.eventQueue_,f,[])}function xL(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&MR(e.onDisconnect_,t),CL(e,n,r,i)}))}function IL(e,t,n,r){var i=fR(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&LR(e.onDisconnect_,t,i),CL(e,r,n,a)}))}function SL(e,t,n){var r;r=".info"===gP(t._path)?fD(e.infoSyncTree_,t,n):fD(e.serverSyncTree_,t,n),cL(e.eventQueue_,t._path,r)}function TL(e){e.persistentConnection_&&e.persistentConnection_.interrupt(dL)}function EL(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];IA.apply(void 0,[t].concat(r))}function CL(e,t,n,r){t&&BA((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function NL(e,t,n){return pD(e.serverSyncTree_,t,n)||cR.EMPTY_NODE}function AL(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||ML(e,t),jD(t)){var n=DL(e,t);qr(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&PL(e,HD(t),n)}else zD(t)&&BD(t,(function(t){AL(e,t)}))}function PL(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=NL(e,t,r),a=i,o=i.hash(),u=0;u<n.length;u++){var s=n[u];qr(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var c=TP(t,s.path);a=a.updateChild(c,s.currentOutputSnapshotRaw)}var l=a.val(!0),f=t;e.server_.put(f.toString(),l,(function(r){EL(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(cD(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},u=0;u<n.length;u++)o(u);ML(e,VD(e.transactionQueueTree_,t)),AL(e,e.transactionQueueTree_),lL(e.eventQueue_,t,i);for(var s=0;s<a.length;s++)BA(a[s])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{CA("transaction at "+f.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}RL(e,t)}}),o)}function RL(e,t){var n=OL(e,t),r=HD(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),u=function(a){var u,s=t[a],c=TP(n,s.path),l=!1,f=void 0;if(qr(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)l=!0,f=s.abortReason,i=i.concat(cD(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)l=!0,f="maxretry",i=i.concat(cD(e.serverSyncTree_,s.currentWriteId,!0));else{var h=NL(e,s.path,o);s.currentInputSnapshot=h;var d=t[a].update(h.val());if(void 0!==d){eL("transaction failed: Data returned ",d,s.path);var p=fR(d);"object"===typeof d&&null!=d&&hi(d,".priority")||(p=p.updatePriority(h.getPriority()));var v=s.currentWriteId,m=yL(e),y=MD(p,h,m);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=y,s.currentWriteId=wL(e),o.splice(o.indexOf(v),1),i=(i=i.concat(uD(e.serverSyncTree_,s.path,y,s.currentWriteId,s.applyLocally))).concat(cD(e.serverSyncTree_,v,!0))}else l=!0,f="nodata",i=i.concat(cD(e.serverSyncTree_,s.currentWriteId,!0))}lL(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===f?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(f),!1,null)}))))},s=0;s<t.length;s++)u(s);ML(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)BA(r[c]);AL(e,e.transactionQueueTree_)}(e,DL(e,n),r),r}function OL(e,t){var n,r=e.transactionQueueTree_;for(n=gP(t);null!==n&&void 0===jD(r);)r=VD(r,n),n=gP(t=bP(t));return r}function DL(e,t){var n=[];return LL(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function LL(e,t,n){var r=jD(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);BD(t,(function(t){LL(e,t,n)}))}function ML(e,t){var n=jD(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,qD(t,n.length>0?n:void 0)}BD(t,(function(t){ML(e,t)}))}function FL(e,t){var n=HD(OL(e,t)),r=VD(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){UL(e,t)})),UL(e,r),WD(r,(function(t){UL(e,t)})),n}function UL(e,t){var n=jD(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(qr(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(qr(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(cD(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?qD(t,void 0):n.length=a+1,lL(e.eventQueue_,HD(t),i);for(var u=0;u<r.length;u++)BA(r[u])}}var VL=function(e,t){var n=jL(e),r=n.namespace;"firebase.com"===n.domain&&EA(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||EA("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&CA("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new XA(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new mP(n.pathString)}},jL=function(e){var t="",n="",r="",i="",a="",o=!0,u="https",s=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(u=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(l,f)),l<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(SV){}t+="/"+i}return t}(e.substring(l,f)));var h=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=Cr(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):CA("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,f)));(c=t.indexOf(":"))>=0?(o="https"===u||"wss"===u,s=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in h&&(a=h.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:u,pathString:i,namespace:a}},qL=function(){function e(t,n,r,i){Sr(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return Er(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+li(this.snapshot.exportVal())}}]),e}(),zL=function(){function e(t,n,r){Sr(this,e),this.eventRegistration=t,this.error=n,this.path=r}return Er(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),BL=function(){function e(t,n){Sr(this,e),this.snapshotCallback=t,this.cancelCallback=n}return Er(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return qr(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),WL=function(){function e(t,n){Sr(this,e),this._repo=t,this._path=n}return Er(e,[{key:"cancel",value:function(){var e=new Yr;return xL(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){aL("OnDisconnect.remove",this._path);var e=new Yr;return IL(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){aL("OnDisconnect.set",this._path),ZD("OnDisconnect.set",e,this._path,!1);var t=new Yr;return IL(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){aL("OnDisconnect.setWithPriority",this._path),ZD("OnDisconnect.setWithPriority",e,this._path,!1),nL("OnDisconnect.setWithPriority",t,!1);var n=new Yr;return function(e,t,n,r,i){var a=fR(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&LR(e.onDisconnect_,t,a),CL(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){aL("OnDisconnect.update",this._path),tL("OnDisconnect.update",e,this._path,!1);var t=new Yr;return function(e,t,n,r){if(pi(n))return IA("onDisconnect().update() called with empty data.  Don't do anything."),void CL(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&FA(n,(function(n,r){var i=fR(r);LR(e.onDisconnect_,IP(t,n),i)})),CL(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),HL=function(){function e(t,n,r,i){Sr(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return Er(e,[{key:"key",get:function(){return SP(this._path)?null:wP(this._path)}},{key:"ref",get:function(){return new YL(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=PR(this._queryParams),t=LA(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return PR(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=Ai(t))instanceof e))return!1;var n=this._repo===t._repo,r=CP(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function KL(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function GL(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===jP){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==AA)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==PA)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===rR){if(null!=t&&!XD(t)||null!=n&&!XD(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(qr(e.getIndex()instanceof hR||e.getIndex()===pR,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function QL(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var YL=function(e){Pr(n,e);var t=Lr(n);function n(e,r){return Sr(this,n),t.call(this,e,r,new TR,!1)}return Er(n,[{key:"parent",get:function(){var e=xP(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(HL),$L=function(){function e(t,n,r){Sr(this,e),this._node=t,this.ref=n,this._index=r}return Er(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new mP(t),r=ZL(this.ref,t);return new e(this._node.getChild(n),r,rR)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,ZL(n.ref,r),rR))}))}},{key:"hasChild",value:function(e){var t=new mP(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function JL(e,t){return(e=Ai(e))._checkNotDeleted("ref"),void 0!==t?ZL(e._root,t):e._root}function XL(e,t){(e=Ai(e))._checkNotDeleted("refFromURL");var n=VL(t,e._repo.repoInfo_.nodeAdmin);oL("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||EA("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),JL(e,n.path.toString())}function ZL(e,t){var n,r,i,a;return null===gP((e=Ai(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),iL(n,r,i,a)):iL("child","path",t,!1),new YL(e._repo,IP(e._path,t))}function eM(e,t){e=Ai(e),aL("push",e._path),ZD("push",t,e._path,!0);var n,r=mL(e._repo),i=mR(r),a=ZL(e,i),o=ZL(e,i);return n=null!=t?nM(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function tM(e){return aL("remove",e._path),nM(e,null)}function nM(e,t){e=Ai(e),aL("set",e._path),ZD("set",t,e._path,!1);var n=new Yr;return _L(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function rM(e,t){e=Ai(e),aL("setPriority",e._path),nL("setPriority",t,!1);var n=new Yr;return _L(e._repo,IP(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}function iM(e,t,n){if(aL("setWithPriority",e._path),ZD("setWithPriority",t,e._path,!1),nL("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new Yr;return _L(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}function aM(e,t){tL("update",t,e._path,!1);var n=new Yr;return function(e,t,n,r){EL(e,"update",{path:t.toString(),value:n});var i=!0,a=yL(e),o={};if(FA(n,(function(n,r){i=!1,o[n]=LD(IP(t,n),fR(r),e.serverSyncTree_,a)})),i)IA("update() called with empty data.  Don't do anything."),CL(0,r,"ok",void 0);else{var u=wL(e),s=sD(e.serverSyncTree_,t,o,u);sL(e.eventQueue_,s),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||CA("update at "+t+" failed: "+n);var o=cD(e.serverSyncTree_,u,!a),s=o.length>0?RL(e,t):t;lL(e.eventQueue_,s,o),CL(0,r,n,i)})),FA(n,(function(n){var r=FL(e,IP(t,n));RL(e,r)})),lL(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function oM(e){e=Ai(e);var t=new BL((function(){})),n=new uM(t);return function(e,t,n){var r=vD(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((function(r){var i,a=fR(r).withIndex(t._queryParams.getIndex());if(dD(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())i=lD(e.serverSyncTree_,t._path,a);else{var o=bD(e.serverSyncTree_,t);i=hD(e.serverSyncTree_,t._path,a,o)}return lL(e.eventQueue_,t._path,i),fD(e.serverSyncTree_,t,n,null,!0),a}),(function(n){return EL(e,"get for query "+li(t)+" failed: "+n),Promise.reject(new Error(n))}))}(e._repo,e,n).then((function(t){return new $L(t,new YL(e._repo,e._path),e._queryParams.getIndex())}))}var uM=function(){function e(t){Sr(this,e),this.callbackContext=t}return Er(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new qL("value",this,new $L(e.snapshotNode,new YL(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new zL(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),sM=function(){function e(t,n){Sr(this,e),this.eventType=t,this.callbackContext=n}return Er(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new zL(this,e,t):null}},{key:"createEvent",value:function(e,t){qr(null!=e.childName,"Child events should have a childName.");var n=ZL(new YL(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new qL(e.type,this,new $L(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function cM(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,u=function(t,n){SL(e._repo,e,c),o(t,n)};u.userCallback=n.userCallback,u.context=n.context,n=u}var s=new BL(n,a||void 0),c="value"===t?new uM(s):new sM(t,s);return function(e,t,n){var r;r=".info"===gP(t._path)?dD(e.infoSyncTree_,t,n):dD(e.serverSyncTree_,t,n),cL(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return SL(e._repo,e,c)}}function lM(e,t,n,r){return cM(e,"value",t,n,r)}function fM(e,t,n,r){return cM(e,"child_added",t,n,r)}function hM(e,t,n,r){return cM(e,"child_changed",t,n,r)}function dM(e,t,n,r){return cM(e,"child_moved",t,n,r)}function pM(e,t,n,r){return cM(e,"child_removed",t,n,r)}function vM(e,t,n){var r=null,i=n?new BL(n):null;"value"===t?r=new uM(i):t&&(r=new sM(t,i)),SL(e._repo,e,r)}var mM=Er((function e(){Sr(this,e)})),yM=function(e){Pr(n,e);var t=Lr(n);function n(e,r){var i;return Sr(this,n),(i=t.call(this))._value=e,i._key=r,i}return Er(n,[{key:"_apply",value:function(e){ZD("endAt",this._value,e._path,!0);var t=CR(e._queryParams,this._value,this._key);if(QL(t),GL(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new HL(e._repo,e._path,t,e._orderByCalled)}}]),n}(mM);function gM(e,t){return rL("endAt","key",t,!0),new yM(e,t)}var kM=function(e){Pr(n,e);var t=Lr(n);function n(e,r){var i;return Sr(this,n),(i=t.call(this))._value=e,i._key=r,i}return Er(n,[{key:"_apply",value:function(e){ZD("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===jP?("string"===typeof t&&(t=gR(t)),r=CR(e,t,n)):r=CR(e,t,null==n?AA:gR(n)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(QL(t),GL(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new HL(e._repo,e._path,t,e._orderByCalled)}}]),n}(mM);function bM(e,t){return rL("endBefore","key",t,!0),new kM(e,t)}var wM=function(e){Pr(n,e);var t=Lr(n);function n(e,r){var i;return Sr(this,n),(i=t.call(this))._value=e,i._key=r,i}return Er(n,[{key:"_apply",value:function(e){ZD("startAt",this._value,e._path,!0);var t=ER(e._queryParams,this._value,this._key);if(QL(t),GL(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new HL(e._repo,e._path,t,e._orderByCalled)}}]),n}(mM);function _M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return rL("startAt","key",t,!0),new wM(e,t)}var xM=function(e){Pr(n,e);var t=Lr(n);function n(e,r){var i;return Sr(this,n),(i=t.call(this))._value=e,i._key=r,i}return Er(n,[{key:"_apply",value:function(e){ZD("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===jP?("string"===typeof t&&(t=yR(t)),r=ER(e,t,n)):r=ER(e,t,null==n?PA:yR(n)),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(QL(t),GL(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new HL(e._repo,e._path,t,e._orderByCalled)}}]),n}(mM);function IM(e,t){return rL("startAfter","key",t,!0),new xM(e,t)}var SM=function(e){Pr(n,e);var t=Lr(n);function n(e){var r;return Sr(this,n),(r=t.call(this))._limit=e,r}return Er(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new HL(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(mM);function TM(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new SM(e)}var EM=function(e){Pr(n,e);var t=Lr(n);function n(e){var r;return Sr(this,n),(r=t.call(this))._limit=e,r}return Er(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new HL(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(mM);function CM(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new EM(e)}var NM=function(e){Pr(n,e);var t=Lr(n);function n(e){var r;return Sr(this,n),(r=t.call(this))._path=e,r}return Er(n,[{key:"_apply",value:function(e){KL(e,"orderByChild");var t=new mP(this._path);if(SP(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new hR(t),r=NR(e._queryParams,n);return GL(r),new HL(e._repo,e._path,r,!0)}}]),n}(mM);function AM(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return iL("orderByChild","path",e,!1),new NM(e)}var PM=function(e){Pr(n,e);var t=Lr(n);function n(){return Sr(this,n),t.apply(this,arguments)}return Er(n,[{key:"_apply",value:function(e){KL(e,"orderByKey");var t=NR(e._queryParams,jP);return GL(t),new HL(e._repo,e._path,t,!0)}}]),n}(mM);function RM(){return new PM}var OM=function(e){Pr(n,e);var t=Lr(n);function n(){return Sr(this,n),t.apply(this,arguments)}return Er(n,[{key:"_apply",value:function(e){KL(e,"orderByPriority");var t=NR(e._queryParams,rR);return GL(t),new HL(e._repo,e._path,t,!0)}}]),n}(mM);function DM(){return new OM}var LM=function(e){Pr(n,e);var t=Lr(n);function n(){return Sr(this,n),t.apply(this,arguments)}return Er(n,[{key:"_apply",value:function(e){KL(e,"orderByValue");var t=NR(e._queryParams,pR);return GL(t),new HL(e._repo,e._path,t,!0)}}]),n}(mM);function MM(){return new LM}var FM=function(e){Pr(n,e);var t=Lr(n);function n(e,r){var i;return Sr(this,n),(i=t.call(this))._value=e,i._key=r,i}return Er(n,[{key:"_apply",value:function(e){if(ZD("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new yM(this._value,this._key)._apply(new wM(this._value,this._key)._apply(e))}}]),n}(mM);function UM(e,t){return rL("equalTo","key",t,!0),new FM(e,t)}function VM(e){for(var t=Ai(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];t=u._apply(t)}return t}!function(e){qr(!VO,"__referenceConstructor has already been defined"),VO=e}(YL),function(e){qr(!KO,"__referenceConstructor has already been defined"),KO=e}(YL);var jM={},qM=!1;function zM(e,t,n,r){e.repoInfo_=new XA("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function BM(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||EA("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),IA("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,u=VL(a,i),s=u.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/twitter-clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyDr7gSfy5mcvs3eSUluMrWt7u5YnNmztxQ",REACT_APP_AUTH_DOMAIN:"twitter-clone-e2920.firebaseapp.com",REACT_APP_PROJECT_ID:"twitter-clone-e2920",REACT_APP_STORAGE_BUCKET:"twitter-clone-e2920.appspot.com",REACT_APP_MESSAGING_SENDER_ID:"736440001454",REACT_APP_APP_ID:"1:736440001454:web:16a50313f65f23178d1e3f"}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(s.namespace),s=(u=VL(a,i)).repoInfo):o=!u.repoInfo.secure;var l=i&&o?new GA(GA.OWNER):new KA(e.name,e.options,t);oL("Invalid Firebase Database URL",u),SP(u.path)||EA("Database URL must point to the root of a Firebase Database (not including a child path).");var f=function(e,t,n,r){var i=jM[t.name];i||(i={},jM[t.name]=i);var a=i[e.toURLString()];a&&EA("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new pL(e,qM,n,r),i[e.toURLString()]=a,a}(s,e,l,new HA(e.name,n));return new WM(f,e)}var WM=function(){function e(t,n){Sr(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return Er(e,[{key:"_repo",get:function(){return this._instanceStarted||(vL(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new YL(this._repo,yP())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=jM[t];n&&n[e.key]===e||EA("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),TL(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&EA("Cannot call "+e+" on a deleted database.")}}]),e}();function HM(){fP.IS_TRANSPORT_INITIALIZED&&CA("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function KM(){HM(),uP.forceDisallow()}function GM(){HM(),lP.forceDisallow(),uP.forceAllow()}function QM(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=Ai(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&EA("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&EA('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new GA(GA.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:$r(r.mockUserToken,e.app.options.projectId);a=new GA(o)}zM(i,t,n,a)}function YM(e){(e=Ai(e))._checkNotDeleted("goOffline"),TL(e._repo)}function $M(e){var t;(e=Ai(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(dL)}function JM(e,t){xA(e,t)}var XM={".sv":"timestamp"};var ZM=function(){function e(t,n){Sr(this,e),this.committed=t,this.snapshot=n}return Er(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function eF(e,t,n){var r;if(e=Ai(e),aL("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new Yr,o=lM(e,(function(){}));return function(e,t,n,r,i,a){EL(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:gA(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=NL(e,t,void 0);o.currentInputSnapshot=u;var s=o.update(u.val());if(void 0===s)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{eL("transaction failed: Data returned ",s,o.path),o.status=0;var c,l=VD(e.transactionQueueTree_,t),f=jD(l)||[];f.push(o),qD(l,f),"object"===typeof s&&null!==s&&hi(s,".priority")?(c=di(s,".priority"),qr(XD(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(pD(e.serverSyncTree_,t)||cR.EMPTY_NODE).getPriority().val();var h=yL(e),d=fR(s,c),p=MD(d,u,h);o.currentOutputSnapshotRaw=d,o.currentOutputSnapshotResolved=p,o.currentWriteId=wL(e);var v=uD(e.serverSyncTree_,t,p,o.currentWriteId,o.applyLocally);lL(e.eventQueue_,t,v),AL(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new $L(r,new YL(e._repo,e._path),rR),a.resolve(new ZM(n,i)))}),o,i),a.promise}LP.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},LP.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){fA(Ta),ka(new Oi("database",(function(e,t){var n=t.instanceIdentifier;return BM(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Ra(sA,cA,e),Ra(sA,cA,"esm2017")}();var tF=new Wi("@firebase/database-compat"),nF=function(e){var t="FIREBASE WARNING: "+e;tF.warn(t)},rF=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(Ti(e,t)+"must be a boolean.")},iF=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Ti(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},aF=function(){function e(t){Sr(this,e),this._delegate=t}return Er(e,[{key:"cancel",value:function(e){Si("OnDisconnect.cancel",0,1,arguments.length),Ei("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){Si("OnDisconnect.remove",0,1,arguments.length),Ei("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){Si("OnDisconnect.set",1,2,arguments.length),Ei("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){Si("OnDisconnect.setWithPriority",2,3,arguments.length),Ei("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(Si("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,nF("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ei("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),oF=function(){function e(t,n){Sr(this,e),this.committed=t,this.snapshot=n}return Er(e,[{key:"toJSON",value:function(){return Si("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),uF=function(){function e(t,n){Sr(this,e),this._database=t,this._delegate=n}return Er(e,[{key:"val",value:function(){return Si("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return Si("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return Si("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return Si("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return Si("DataSnapshot.child",0,1,arguments.length),t=String(t),iL("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return Si("DataSnapshot.hasChild",1,1,arguments.length),iL("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return Si("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return Si("DataSnapshot.forEach",1,1,arguments.length),Ei("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return Si("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return Si("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return Si("DataSnapshot.ref",0,0,arguments.length),new cF(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),sF=function(){function e(t,n){Sr(this,e),this.database=t,this._delegate=n}return Er(e,[{key:"on",value:function(t,n,r,i){var a,o=this;Si("Query.on",2,4,arguments.length),Ei("Query.on","callback",n,!1);var u=e.getCancelAndContextArgs_("Query.on",r,i),s=function(e,t){n.call(u.context,new uF(o.database,e),t)};s.userCallback=n,s.context=u.context;var c=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(t){case"value":return lM(this._delegate,s,c),n;case"child_added":return fM(this._delegate,s,c),n;case"child_removed":return pM(this._delegate,s,c),n;case"child_changed":return hM(this._delegate,s,c),n;case"child_moved":return dM(this._delegate,s,c),n;default:throw new Error(Ti("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(Si("Query.off",0,3,arguments.length),iF("Query.off",e,!0),Ei("Query.off","callback",t,!0),Ci("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,vM(this._delegate,e,r)}else vM(this._delegate,e)}},{key:"get",value:function(){var e=this;return oM(this._delegate).then((function(t){return new uF(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var a=this;Si("Query.once",1,4,arguments.length),Ei("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,i),u=new Yr,s=function(e,t){var r=new uF(a.database,e);n&&n.call(o.context,r,t),u.resolve(r)};s.userCallback=n,s.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),u.reject(e)};switch(t){case"value":lM(this._delegate,s,c,{onlyOnce:!0});break;case"child_added":fM(this._delegate,s,c,{onlyOnce:!0});break;case"child_removed":pM(this._delegate,s,c,{onlyOnce:!0});break;case"child_changed":hM(this._delegate,s,c,{onlyOnce:!0});break;case"child_moved":dM(this._delegate,s,c,{onlyOnce:!0});break;default:throw new Error(Ti("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}},{key:"limitToFirst",value:function(t){return Si("Query.limitToFirst",1,1,arguments.length),new e(this.database,VM(this._delegate,TM(t)))}},{key:"limitToLast",value:function(t){return Si("Query.limitToLast",1,1,arguments.length),new e(this.database,VM(this._delegate,CM(t)))}},{key:"orderByChild",value:function(t){return Si("Query.orderByChild",1,1,arguments.length),new e(this.database,VM(this._delegate,AM(t)))}},{key:"orderByKey",value:function(){return Si("Query.orderByKey",0,0,arguments.length),new e(this.database,VM(this._delegate,RM()))}},{key:"orderByPriority",value:function(){return Si("Query.orderByPriority",0,0,arguments.length),new e(this.database,VM(this._delegate,DM()))}},{key:"orderByValue",value:function(){return Si("Query.orderByValue",0,0,arguments.length),new e(this.database,VM(this._delegate,MM()))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Si("Query.startAt",0,2,arguments.length),new e(this.database,VM(this._delegate,_M(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Si("Query.startAfter",0,2,arguments.length),new e(this.database,VM(this._delegate,IM(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Si("Query.endAt",0,2,arguments.length),new e(this.database,VM(this._delegate,gM(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Si("Query.endBefore",0,2,arguments.length),new e(this.database,VM(this._delegate,bM(t,n)))}},{key:"equalTo",value:function(t,n){return Si("Query.equalTo",1,2,arguments.length),new e(this.database,VM(this._delegate,UM(t,n)))}},{key:"toString",value:function(){return Si("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return Si("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(Si("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new cF(this.database,new YL(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,Ei(e,"cancel",r.cancel,!0),r.context=n,Ci(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(Ti(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),cF=function(e){Pr(n,e);var t=Lr(n);function n(e,r){var i;return Sr(this,n),(i=t.call(this,e,new HL(r._repo,r._path,new TR,!1))).database=e,i._delegate=r,i}return Er(n,[{key:"getKey",value:function(){return Si("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return Si("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,ZL(this._delegate,e))}},{key:"getParent",value:function(){Si("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return Si("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){Si("Reference.set",1,2,arguments.length),Ei("Reference.set","onComplete",t,!0);var n=nM(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(Si("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,nF("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}aL("Reference.update",this._delegate._path),Ei("Reference.update","onComplete",t,!0);var i=aM(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){Si("Reference.setWithPriority",2,3,arguments.length),Ei("Reference.setWithPriority","onComplete",n,!0);var r=iM(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){Si("Reference.remove",0,1,arguments.length),Ei("Reference.remove","onComplete",e,!0);var t=tM(this._delegate);return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"transaction",value:function(e,t,n){var r=this;Si("Reference.transaction",1,3,arguments.length),Ei("Reference.transaction","transactionUpdate",e,!1),Ei("Reference.transaction","onComplete",t,!0),rF("Reference.transaction","applyLocally",n,!0);var i=eF(this._delegate,e,{applyLocally:n}).then((function(e){return new oF(e.committed,new uF(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){Si("Reference.setPriority",1,2,arguments.length),Ei("Reference.setPriority","onComplete",t,!0);var n=rM(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;Si("Reference.push",0,2,arguments.length),Ei("Reference.push","onComplete",t,!0);var i=eM(this._delegate,e),a=i.then((function(e){return new n(r.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,i);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return aL("Reference.onDisconnect",this._delegate._path),new aF(new WL(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(sF),lF=function(){function e(t,n){var r=this;Sr(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()},forceWebSockets:KM,forceLongPolling:GM}}return Er(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};QM(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(Si("database.ref",0,1,arguments.length),e instanceof cF){var t=XL(this._delegate,e.toString());return new cF(this,t)}var n=JL(this._delegate,e);return new cF(this,n)}},{key:"refFromURL",value:function(e){var t="database.refFromURL";Si(t,1,1,arguments.length);var n=XL(this._delegate,e);return new cF(this,n)}},{key:"goOffline",value:function(){return Si("database.goOffline",0,0,arguments.length),YM(this._delegate)}},{key:"goOnline",value:function(){return Si("database.goOnline",0,0,arguments.length),$M(this._delegate)}}]),e}();lF.ServerValue={TIMESTAMP:XM,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var fF=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.namespace,o=e.nodeAdmin,u=void 0!==o&&o;fA(r);var s=new Li("auth-internal",new Ui("database-standalone"));return s.setComponent(new Oi("auth-internal",(function(){return i}),"PRIVATE")),{instance:new lF(BM(t,s,void 0,n,u),t),namespace:a}}}),hF=lF.ServerValue;!function(e){e.INTERNAL.registerComponent(new Oi("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new lF(i,r)}),"PUBLIC").setServiceProps({Reference:cF,Query:sF,Database:lF,DataSnapshot:uF,enableLogging:JM,INTERNAL:fF,ServerValue:hF}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","0.2.5")}(no);var dF="firebasestorage.googleapis.com",pF=function(e){Pr(n,e);var t=Lr(n);function n(e,r){var i;return Sr(this,n),(i=t.call(this,vF(e),"Firebase Storage: ".concat(r," (").concat(vF(e),")"))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(Nr(i),n.prototype),i}return Er(n,[{key:"_codeEquals",value:function(e){return vF(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(ai);function vF(e){return"storage/"+e}function mF(){return new pF("unknown","An unknown error occurred, please check the error payload for server response.")}function yF(){return new pF("canceled","User canceled the upload/download.")}function gF(){return new pF("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function kF(e){return new pF("invalid-argument",e)}function bF(){return new pF("app-deleted","The Firebase app was deleted.")}function wF(e){return new pF("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function _F(e,t){return new pF("invalid-format","String does not match format '"+e+"': "+t)}function xF(e){throw new pF("internal-error","Internal error: "+e)}var IF,SF=function(){function e(t,n){Sr(this,e),this.bucket=t,this.path_=n}return Er(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(SV){return new e(t,"")}if(""===r.path)return r;throw new pF("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===dF?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new pF("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),TF=function(){function e(t){Sr(this,e),this.promise_=Promise.reject(t)}return Er(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function EF(e){return"string"===typeof e||e instanceof String}function CF(e){return NF()&&e instanceof Blob}function NF(){return"undefined"!==typeof Blob}function AF(e,t,n,r){if(r<t)throw kF("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw kF("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function PF(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function RF(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(IF||(IF={}));var OF=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this;Sr(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return Er(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(SV){i(SV)}else if(null!==a){var u=mF();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?bF():yF());else i(new pF("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new DF(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new DF(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===IF.NO_ERROR,a=r.getStatus();if(n&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new DF(o,r))}else{var u=r.getErrorCode()===IF.ABORT;t(!1,new DF(!1,null,u))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),DF=Er((function e(t,n,r){Sr(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function LF(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function MF(){for(var e=LF(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(NF())return new Blob(n);throw new pF("unsupported-environment","This browser doesn't seem to support creating Blobs")}var FF={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},UF=Er((function e(t,n){Sr(this,e),this.data=t,this.contentType=n||null}));function VF(e,t){switch(e){case FF.RAW:return new UF(jF(t));case FF.BASE64:case FF.BASE64URL:return new UF(qF(e,t));case FF.DATA_URL:return new UF(function(e){var t=new zF(e);return t.base64?qF(FF.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(SV){throw _F(FF.DATA_URL,"Malformed data URL.")}return jF(t)}(t.rest)}(t),new zF(t).contentType)}throw mF()}function jF(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function qF(e,t){switch(e){case FF.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw _F(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case FF.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw _F(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(SV){throw _F(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var zF=Er((function e(t){Sr(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw _F(FF.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var BF=function(){function e(t,n){Sr(this,e);var r=0,i="";CF(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return Er(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(CF(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(NF()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(MF.apply(null,i))}var a=n.map((function(e){return EF(e)?VF(FF.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function WF(e){var t;try{t=JSON.parse(e)}catch(SV){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function HF(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function KF(e,t){return t}var GF=Er((function e(t,n,r,i){Sr(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||KF})),QF=null;function YF(){if(QF)return QF;var e=[];e.push(new GF("bucket")),e.push(new GF("generation")),e.push(new GF("metageneration")),e.push(new GF("name","fullPath",!0));var t=new GF("name");t.xform=function(e,t){return function(e){return!EF(e)||e.length<2?e:HF(e)}(t)},e.push(t);var n=new GF("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new GF("timeCreated")),e.push(new GF("updated")),e.push(new GF("md5Hash",null,!0)),e.push(new GF("cacheControl",null,!0)),e.push(new GF("contentDisposition",null,!0)),e.push(new GF("contentEncoding",null,!0)),e.push(new GF("contentLanguage",null,!0)),e.push(new GF("contentType",null,!0)),e.push(new GF("metadata","customMetadata",!0)),QF=e}function $F(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new SF(n,r);return t._makeStorageReference(i)}})}(r,e),r}function JF(e,t,n){var r=WF(t);return null===r?null:$F(e,r,n)}function XF(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}function ZF(e,t,n){var r=WF(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes){var i,a=Cr(n.prefixes);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new SF(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n.items){var s,c=Cr(n.items);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new SF(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var eU=Er((function e(t,n,r,i){Sr(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function tU(e){if(!e)throw mF()}function nU(e,t){return function(n,r){var i=JF(e,r,t);return tU(null!==i),i}}function rU(e,t){return function(n,r){var i=JF(e,r,t);return tU(null!==i),function(e,t,n,r){var i=WF(t);if(null===i)return null;if(!EF(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return PF("/b/"+o(i)+"/o/"+o(a),n,r)+RF({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function iU(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new pF("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new pF("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new pF("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new pF("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function aU(e){var t=iU(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new pF("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function oU(e,t,n){var r=PF(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new eU(r,"GET",nU(e,n),i);return a.errorHandler=aU(t),a}function uU(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=PF(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new eU(o,"GET",function(e,t){return function(n,r){var i=ZF(e,t,r);return tU(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=iU(t),s}function sU(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function cU(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=sU(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+XF(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=BF.getBlob(c,r,l);if(null===f)throw gF();var h={name:s.fullPath},d=PF(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new eU(d,"POST",nU(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=iU(t),v}var lU=Er((function e(t,n,r,i){Sr(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function fU(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(SV){tU(!1)}return tU(!!n&&-1!==(t||["active"]).indexOf(n)),n}var hU=262144;function dU(e,t,n,r,i,a,o,u){var s=new lU(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new pF("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},p=r.slice(f,h);if(null===p)throw gF();var v=t.maxUploadRetryTime,m=new eU(n,"POST",(function(e,n){var i,o=fU(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?nU(t,a)(e,n):null,new lU(u,c,"final"===o,i)}),v);return m.headers=d,m.body=p.uploadData(),m.progressCallback=u||null,m.errorHandler=iU(e),m}var pU={STATE_CHANGED:"state_changed"},vU={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function mU(e){switch(e){case"running":case"pausing":case"canceling":return vU.RUNNING;case"paused":return vU.PAUSED;case"success":return vU.SUCCESS;case"canceled":return vU.CANCELED;default:return vU.ERROR}}var yU=Er((function e(t,n,r){Sr(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function gU(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var kU=function(){function e(){var t=this;Sr(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=IF.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=IF.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=IF.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return Er(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw xF("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw xF("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw xF("cannot .getStatus() before sending");try{return this.xhr_.status}catch(SV){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw xF("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw xF("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),bU=function(e){Pr(n,e);var t=Lr(n);function n(){return Sr(this,n),t.apply(this,arguments)}return Er(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(kU);function wU(){return new bU}var _U=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Sr(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=YF(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return Er(e,[{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=c(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=sU(t,r,i),u={name:o.fullPath},s=PF(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=XF(o,n),f=e.maxUploadRetryTime,h=new eU(s,"POST",(function(e){var t;fU(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(SV){tU(!1)}return tU(EF(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=iU(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,wU,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new eU(n,"POST",(function(e){var t=fU(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(SV){tU(!1)}n||tU(!1);var i=Number(n);return tU(!isNaN(i)),new lU(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=iU(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,wU,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=hU*this._chunkMultiplier,n=new lU(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=dU(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(SV){return e._error=SV,void e._transition("error")}var u=e._ref.storage._makeRequest(o,wU,i,a);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){hU*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=oU(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,wU,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=cU(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,wU,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=yF(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=mU(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new yU(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(mU(this._state)){case vU.SUCCESS:gU(this._resolve.bind(null,this.snapshot))();break;case vU.CANCELED:case vU.ERROR:gU(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(mU(this._state)){case vU.RUNNING:case vU.PAUSED:e.next&&gU(e.next.bind(e,this.snapshot))();break;case vU.SUCCESS:e.complete&&gU(e.complete.bind(e))();break;default:e.error&&gU(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),xU=function(){function e(t,n){Sr(this,e),this._service=t,this._location=n instanceof SF?n:SF.makeFromUrl(n,t.host)}return Er(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new SF(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return HF(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new SF(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw wF(e)}}]),e}();function IU(e,t,n){return SU.apply(this,arguments)}function SU(){return(SU=ee(X().mark((function e(t,n,r){var i,a,o,u;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,TU(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,Ri(u.prefixes)),(a=n.items).push.apply(a,Ri(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,IU(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function TU(e,t){null!=t&&"number"===typeof t.maxResults&&AF("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=uU(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,wU)}function EU(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=PF(t.fullServerUrl(),e.host,e._protocol),a=XF(n,r),o=e.maxOperationRetryTime,u=new eU(i,"PATCH",nU(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=aU(t),u}(e.storage,e._location,t,YF());return e.storage.makeRequestWithTokens(n,wU)}function CU(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=PF(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new eU(r,"GET",rU(e,n),i);return a.errorHandler=aU(t),a}(e.storage,e._location,YF());return e.storage.makeRequestWithTokens(t,wU).then((function(e){if(null===e)throw new pF("no-download-url","The given file does not have any download URLs.");return e}))}function NU(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=PF(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new eU(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=aU(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,wU)}function AU(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new SF(e._location.bucket,n);return new xU(e.storage,r)}function PU(e,t){if(e instanceof LU){var n=e;if(null==n._bucket)throw new pF("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new xU(n,n._bucket);return null!=t?PU(r,t):r}return void 0!==t?AU(e,t):e}function RU(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof LU)return new xU(e,t);throw kF("To use ref(service, url), the first argument must be a Storage instance.")}return PU(e,t)}function OU(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:SF.makeFromBucketSpec(n,e)}function DU(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:$r(i,e.app.options.projectId))}var LU=function(){function e(t,n,r,i,a){Sr(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=dF,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?SF.makeFromBucketSpec(i,this._host):OU(this._host,this.app.options)}return Er(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=SF.makeFromBucketSpec(this._url,e):this._bucket=OU(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){AF("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){AF("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=ee(X().mark((function e(){var t,n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=ee(X().mark((function e(){var t,n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new xU(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new TF(bF());var a=function(e,t,n,r,i,a){var o=RF(e.urlParams),u=e.url+o,s=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(s,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(s,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(s,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(s,r),new OF(u,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then((function(){return i._requests.delete(a)}),(function(){return i._requests.delete(a)})),a}},{key:"makeRequestWithTokens",value:function(){var e=ee(X().mark((function e(t,n){var r,i,a,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=c(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),MU="@firebase/storage",FU="0.9.9",UU="storage";function VU(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new _U(e,new BF(t),n)}(e=Ai(e),t,n)}function jU(e){return function(e){e._throwIfRoot("getMetadata");var t=oU(e.storage,e._location,YF());return e.storage.makeRequestWithTokens(t,wU)}(e=Ai(e))}function qU(e){return function(e){var t={prefixes:[],items:[]};return IU(e,t).then((function(){return t}))}(e=Ai(e))}function zU(e,t){return RU(e=Ai(e),t)}function BU(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};DU(e,t,n,r)}function WU(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new LU(r,i,a,n,Ta)}ka(new Oi(UU,WU,"PUBLIC").setMultipleInstances(!0)),Ra(MU,FU,""),Ra(MU,FU,"esm2017");var HU=function(){function e(t,n,r){Sr(this,e),this._delegate=t,this.task=n,this.ref=r}return Er(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),KU=function(){function e(t,n){Sr(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Er(e,[{key:"snapshot",get:function(){return new HU(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new HU(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new HU(e,i,i._ref))}:{next:t.next?function(e){return t.next(new HU(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),GU=function(){function e(t,n){Sr(this,e),this._delegate=t,this._service=n}return Er(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new QU(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new QU(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),QU=function(){function e(t,n){Sr(this,e),this._delegate=t,this.storage=n}return Er(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return AU(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new KU(VU(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:FF.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=VF(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new KU(new _U(this._delegate,new BF(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return qU(this._delegate).then((function(t){return new GU(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return TU(e=Ai(e),t)}(this._delegate,e||void 0).then((function(e){return new GU(e,t.storage)}))}},{key:"getMetadata",value:function(){return jU(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return EU(e=Ai(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return CU(Ai(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),NU(Ai(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw wF(e)}}]),e}(),YU=function(){function e(t,n){Sr(this,e),this.app=t,this._delegate=n}return Er(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if($U(e))throw kF("ref() expected a child path but got a URL, use refFromURL instead.");return new QU(zU(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!$U(e))throw kF("refFromURL() expected a full URL but got a child path, use ref() instead.");try{SF.makeFromUrl(e,this._delegate.host)}catch(SV){throw kF("refFromUrl() expected a valid full URL but got an invalid one.")}return new QU(zU(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};BU(this._delegate,e,t,n)}}]),e}();function $U(e){return/^[A-Za-z]+:\/\//.test(e)}function JU(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new YU(r,i)}!function(e){var t={TaskState:vU,TaskEvent:pU,StringFormat:FF,Storage:YU,Reference:QU};e.INTERNAL.registerComponent(new Oi("storage-compat",JU,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.17")}(no);no.initializeApp({apiKey:"AIzaSyDr7gSfy5mcvs3eSUluMrWt7u5YnNmztxQ",authDomain:"twitter-clone-e2920.firebaseapp.com",projectId:"twitter-clone-e2920",storageBucket:"twitter-clone-e2920.appspot.com",messagingSenderId:"736440001454",appId:"1:736440001454:web:16a50313f65f23178d1e3f"});var XU,ZU=no,eV=no.auth(),tV=no.firestore(),nV=no.storage(),rV=n(184),iV=function(e){var t=e.tweetObj,n=e.isOwner,i=c(r.useState(!1),2),a=i[0],o=i[1],u=c(r.useState(t.text),2),s=u[0],l=u[1],f=function(){o(!a)},h=function(){var e=ee(X().mark((function e(n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,tV.collection("tweets").doc(t.id).update({text:s});case 3:o(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,rV.jsx)("div",{className:"tweet",children:a?(0,rV.jsxs)(rV.Fragment,{children:[(0,rV.jsxs)("form",{onSubmit:h,className:"container tweetEdit",children:[(0,rV.jsx)("input",{value:s,onChange:function(e){var t=e.target.value;l(t)},type:"text",maxLength:120,autoFocus:!0,className:"formInput"}),(0,rV.jsx)("input",{type:"submit",value:"Update",className:"formBtn"})]}),(0,rV.jsx)("span",{onClick:f,className:"formBtn cancelBtn",children:"Cancel"})]}):(0,rV.jsxs)(rV.Fragment,{children:[(0,rV.jsx)("h4",{children:t.text}),(0,rV.jsxs)("div",{children:[t.attachment&&(0,rV.jsx)("img",{src:t.attachment,alt:""}),n&&(0,rV.jsxs)("div",{className:"tweet__actions",children:[(0,rV.jsx)("span",{onClick:f,children:(0,rV.jsx)(xr,{icon:ae})}),(0,rV.jsx)("span",{onClick:function(){window.confirm("Are you sure you want to delete this tweet?")&&(t.attachment&&nV.refFromURL(t.attachment).delete(),tV.collection("tweets").doc(t.id).delete())},children:(0,rV.jsx)(xr,{icon:ue})})]})]})]})})},aV=function(e){var t=e.userObj,n=e.refreshUserObj,i=V(),a=c(r.useState([]),2),o=a[0],u=a[1],s=c(r.useState(""),2),l=s[0],f=s[1];r.useEffect((function(){tV.collection("tweets").where("creatorId","==",t.uid).orderBy("createdAt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return re({id:e.id},e.data())}));u(t)}))}),[t.uid]);var h=function(){var e=ee(X().mark((function e(r){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),t.displayName===l){e.next=5;break}return e.next=4,t.updateProfile({displayName:l});case 4:n();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,rV.jsxs)("div",{className:"container",children:[(0,rV.jsxs)("form",{onSubmit:h,className:"profileForm",children:[(0,rV.jsx)("input",{onChange:function(e){var t=e.target.value;f(t)},type:"text",autoFocus:!0,placeholder:"Display Name",value:l,className:"formInput"}),(0,rV.jsx)("input",{type:"submit",value:"Update Profile",className:"formBtn",style:{marginTop:10}})]}),t&&(0,rV.jsxs)(rV.Fragment,{children:[(0,rV.jsx)("h1",{children:t.uid}),o.map((function(e){return(0,rV.jsx)(iV,{tweetObj:e,isOwner:t.uid===e.creatorId},e.id)}))]}),(0,rV.jsx)("span",{className:"formBtn cancelBtn logOut",onClick:function(){eV.signOut(),i("/")},children:"Log Out"})]})},oV={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3 .3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5 .3-6.2 2.3zm44.2-1.7c-2.9 .7-4.9 2.6-4.6 4.9 .3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3 .7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3 .3 2.9 2.3 3.9 1.6 1 3.6 .7 4.3-.7 .7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3 .7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3 .7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]},uV={prefix:"fab",iconName:"google",icon:[488,512,[],"f1a0","M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"]},sV={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.4 151.7c.325 4.548 .325 9.097 .325 13.65 0 138.7-105.6 298.6-298.6 298.6-59.45 0-114.7-17.22-161.1-47.11 8.447 .974 16.57 1.299 25.34 1.299 49.06 0 94.21-16.57 130.3-44.83-46.13-.975-84.79-31.19-98.11-72.77 6.498 .974 12.99 1.624 19.82 1.624 9.421 0 18.84-1.3 27.61-3.573-48.08-9.747-84.14-51.98-84.14-102.1v-1.299c13.97 7.797 30.21 12.67 47.43 13.32-28.26-18.84-46.78-51.01-46.78-87.39 0-19.49 5.197-37.36 14.29-52.95 51.65 63.67 129.3 105.3 216.4 109.8-1.624-7.797-2.599-15.92-2.599-24.04 0-57.83 46.78-104.9 104.9-104.9 30.21 0 57.5 12.67 76.67 33.14 23.72-4.548 46.46-13.32 66.6-25.34-7.798 24.37-24.37 44.83-46.13 57.83 21.12-2.273 41.58-8.122 60.43-16.24-14.29 20.79-32.16 39.31-52.63 54.25z"]},cV=function(){var e=c(r.useState(!0),2),t=e[0],n=e[1],i=c(r.useState(""),2),a=i[0],o=i[1],u=c(r.useState(""),2),s=u[0],l=u[1],f=c(r.useState(""),2),h=f[0],d=f[1],p=function(e){var t=e.target,n=t.name,r=t.value;"email"===n?o(r):"password"===n&&l(r)},v=function(){var e=ee(X().mark((function e(n){var r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),e.prev=1,!t){e.next=9;break}return console.log("new account"),e.next=6,eV.createUserWithEmailAndPassword(a,s);case 6:r=e.sent,e.next=12;break;case 9:return e.next=11,eV.signInWithEmailAndPassword(a,s);case 11:r=e.sent;case 12:console.log(r),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),d(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}();return(0,rV.jsxs)(rV.Fragment,{children:[(0,rV.jsxs)("form",{onSubmit:v,className:"container",children:[(0,rV.jsx)("input",{name:"email",type:"email",placeholder:"Email",required:!0,value:a,onChange:p,className:"authInput"}),(0,rV.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:s,onChange:p,className:"authInput"}),(0,rV.jsx)("button",{type:"submit",className:"authInput authSubmit",children:t?"Sign Up":"Sign In"}),h&&(0,rV.jsx)("span",{className:"authError",children:h})]})," ",(0,rV.jsx)("span",{onClick:function(){return n((function(e){return!e}))},className:"authSwitch",children:t?"Sign In":"Create Account"})]})},lV=function(){var e=function(){var e=ee(X().mark((function e(t){var n,r,i;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(n=t.target.name)?r=new ZU.auth.GoogleAuthProvider:"github"===n&&(r=new ZU.auth.GithubAuthProvider),e.next=4,eV.signInWithPopup(r);case 4:i=e.sent,console.log(i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,rV.jsxs)("div",{className:"authContainer",children:[(0,rV.jsx)(xr,{icon:sV,color:"#04AAFF",size:"3x",style:{marginBottom:30}}),(0,rV.jsx)(cV,{}),(0,rV.jsxs)("div",{className:"authBtns",children:[(0,rV.jsxs)("button",{onClick:e,name:"google",className:"authBtn",children:["Continue with Google ",(0,rV.jsx)(xr,{icon:uV})]}),(0,rV.jsxs)("button",{onClick:e,name:"github",className:"authBtn",children:["Continue with Github ",(0,rV.jsx)(xr,{icon:oV})]})]})]})},fV=new Uint8Array(16);function hV(){if(!XU&&!(XU="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return XU(fV)}var dV=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var pV=function(e){return"string"===typeof e&&dV.test(e)},vV=[],mV=0;mV<256;++mV)vV.push((mV+256).toString(16).substr(1));var yV=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(vV[e[t+0]]+vV[e[t+1]]+vV[e[t+2]]+vV[e[t+3]]+"-"+vV[e[t+4]]+vV[e[t+5]]+"-"+vV[e[t+6]]+vV[e[t+7]]+"-"+vV[e[t+8]]+vV[e[t+9]]+"-"+vV[e[t+10]]+vV[e[t+11]]+vV[e[t+12]]+vV[e[t+13]]+vV[e[t+14]]+vV[e[t+15]]).toLowerCase();if(!pV(n))throw TypeError("Stringified UUID is invalid");return n};var gV=function(e,t,n){var r=(e=e||{}).random||(e.rng||hV)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return yV(r)},kV=function(e){var t=e.userObj,n=c(r.useState(""),2),i=n[0],a=n[1],o=c(r.useState(null),2),u=o[0],s=o[1],l=function(){var e=ee(X().mark((function e(n){var r,o,c;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==i){e.next=2;break}return e.abrupt("return");case 2:if(n.preventDefault(),r="",!u){e.next=13;break}return o=nV.ref().child("".concat(t.uid,"/").concat(gV())),e.next=8,o.putString(u,"data_url");case 8:return c=e.sent,console.log(c),e.next=12,c.ref.getDownloadURL();case 12:r=e.sent;case 13:tV.collection("tweets").add({text:i,createdAt:Date.now(),creatorId:t.uid,attachment:r}),a(""),s(null);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,rV.jsxs)("form",{onSubmit:l,className:"factoryForm",children:[(0,rV.jsxs)("div",{className:"factoryInput__container",children:[(0,rV.jsx)("input",{value:i,onChange:function(e){var t=e.target.value;a(t)},type:"text",placeholder:"What's on your mind?",maxLength:120,className:"factoryInput_input"}),(0,rV.jsx)("input",{type:"submit",value:"Post"})]}),(0,rV.jsxs)("label",{htmlFor:"attach-file",className:"factoryInput__label",children:[(0,rV.jsx)("span",{children:"Add Photos"}),(0,rV.jsx)(xr,{icon:oe})]}),(0,rV.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){s(e.currentTarget.result)},n.readAsDataURL(t)},id:"attach-file",style:{opacity:0}}),u&&(0,rV.jsxs)("div",{className:"factoryForm__attachment",children:[(0,rV.jsx)("img",{src:u,style:{backgroundImage:u}}),(0,rV.jsxs)("div",{className:"factoryForm__clear",onClick:function(){s("")},children:[(0,rV.jsx)("span",{children:"Remove"}),(0,rV.jsx)(xr,{icon:ce})]})]})]})},bV=function(e){var t=e.userObj,n=c(r.useState([]),2),i=n[0],a=n[1];return r.useEffect((function(){tV.collection("tweets").orderBy("createdAt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return re({id:e.id},e.data())}));a(t)}))}),[]),console.log(i),(0,rV.jsxs)("div",{className:"container",children:[(0,rV.jsx)(kV,{userObj:t}),(0,rV.jsx)("div",{style:{marginTop:30},children:i.map((function(e){return(0,rV.jsx)(iV,{tweetObj:e,isOwner:t.uid===e.creatorId},e.id)}))})]})},wV={prefix:"far",iconName:"user",icon:[448,512,[62144,128100],"f007","M272 304h-96C78.8 304 0 382.8 0 480c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32C448 382.8 369.2 304 272 304zM48.99 464C56.89 400.9 110.8 352 176 352h96c65.16 0 119.1 48.95 127 112H48.99zM224 256c70.69 0 128-57.31 128-128c0-70.69-57.31-128-128-128S96 57.31 96 128C96 198.7 153.3 256 224 256zM224 48c44.11 0 80 35.89 80 80c0 44.11-35.89 80-80 80S144 172.1 144 128C144 83.89 179.9 48 224 48z"]},_V=function(e){var t=e.userObj;return(0,rV.jsx)("nav",{children:(0,rV.jsxs)("ul",{style:{display:"flex",justifyContent:"center",marginTop:50},children:[(0,rV.jsx)("li",{children:(0,rV.jsx)($,{to:"/",style:{marginRight:10},children:(0,rV.jsx)(xr,{icon:sV,color:"#04AAFF",size:"2x"})})}),(0,rV.jsx)("li",{children:(0,rV.jsxs)($,{to:"/profile",style:{marginLeft:10,display:"flex",flexDirection:"column",alignItems:"center",fontSize:12},children:[(0,rV.jsx)(xr,{icon:wV,color:"#04AAFF",size:"2x"}),(0,rV.jsx)("span",{style:{marginTop:10},children:t.displayName?"".concat(t.displayName,"'s Profile"):"Profile"})]})})]})})},xV=function(e){var t=e.isAuthenticated,n=e.userObj,r=e.refreshUserObj;return(0,rV.jsxs)(Y,{children:[t&&(0,rV.jsx)(_V,{userObj:n}),(0,rV.jsx)(W,{style:{maxWidth:890,width:"100%",margin:"0 auto",marginTop:80,display:"flex",justifyContent:"center"},children:t?(0,rV.jsxs)(rV.Fragment,{children:[(0,rV.jsx)(z,{exact:!0,path:"/",element:(0,rV.jsx)(bV,{userObj:n})}),(0,rV.jsx)(z,{exact:!0,path:"/profile",element:(0,rV.jsx)(aV,{userObj:n,refreshUserObj:r})})]}):(0,rV.jsx)(z,{path:"/",element:(0,rV.jsx)(lV,{})})})]})};var IV=function(){var e=c(r.useState(!1),2),t=e[0],n=e[1],i=c(r.useState(!1),2),a=i[0],o=i[1],u=c(r.useState(null),2),s=u[0],l=u[1];return r.useEffect((function(){eV.onAuthStateChanged((function(e){e?(o(!0),l({displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}})):o(!1),n(!0)}))}),[]),(0,rV.jsxs)(rV.Fragment,{children:[t?(0,rV.jsx)(xV,{isAuthenticated:a,userObj:s,refreshUserObj:function(){var e=eV.currentUser;l({displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}})}}):"Initializing...",(0,rV.jsxs)("footer",{children:["\xa9 ",(new Date).getFullYear()," Twitter-Copy"]})]})};i.createRoot(document.getElementById("root")).render((0,rV.jsx)(r.StrictMode,{children:(0,rV.jsx)(IV,{})}))}()}();
//# sourceMappingURL=main.3440132c.js.map